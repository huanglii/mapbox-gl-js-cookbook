import{_ as r,r as p,o as u,c as d,a as n,b as s,d as a,w as o,e}from"./app-WXFCxs9o.js";const k={},m=n("h1",{id:"表达式",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#表达式","aria-hidden":"true"},"#"),s(" 表达式")],-1),v=n("code",null,"layout",-1),h=n("code",null,"paint",-1),g=n("code",null,"filter",-1),b={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/",target:"_blank",rel:"noopener noreferrer"},_=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;circle-radius&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;interpolate&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;linear&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;zoom&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// when zoom is 0, set each feature&#39;s circle radius to the value of its &quot;rating&quot; property</span>
    <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rating&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token comment">// when zoom is 10, set each feature&#39;s circle radius to four times the value of its &quot;rating&quot; property</span>
    <span class="token number">10</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rating&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><p class="custom-container-title">注意</p><p>在表达式中， <code>layout</code> 属性和 <code>paint</code> 属性有一个很重要的区别。<code>paint</code> 属性，只要缩放级别发生变化，都会重新计算 <code>paint</code> 属性，即使是小数变化，比如在 4.1 - 4.6 之间。而 <code>layout</code> 属性只在整数缩放级别时计算，在 4.1 - 4.6 之间不会发生变化，只有在高于 5 或小于 4 时计算。</p></div><p>以下举例假设要素具有如下属性：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;苹果,香蕉&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;有点意思&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;district&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">500000</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;重庆市&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fruit&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fruits&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;苹果&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;香蕉&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;price&quot;</span><span class="token operator">:</span> <span class="token number">99</span><span class="token punctuation">,</span>
  <span class="token property">&quot;color&quot;</span><span class="token operator">:</span> <span class="token string">&quot;#F00&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><iframe src="https://codesandbox.io/embed/mapbox-gl-cookbook-playground-7z3rz3?fontsize=14&amp;hidenavigation=1&amp;module=%2Fsrc%2FApp.vue&amp;theme=light&amp;view=preview" style="width:100%;height:300px;border:0;border-radius:6px;overflow:hidden;" title="mapbox-gl-cookbook-playground" allow="accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking" sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"></iframe>`,5),y={id:"types",tabindex:"-1"},x=n("a",{class:"header-anchor",href:"#types","aria-hidden":"true"},"#",-1),f={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#types",target:"_blank",rel:"noopener noreferrer"},q=n("p",null,"表达式拥有强大的类型系统，并支持转换和检测。比如，表达式的输入和输出数据类型需和样式规范中的类型一致，在计算表达式时会自动检测，如果检测到错误，会在控制台输出错误提示。",-1),j={id:"feature-data",tabindex:"-1"},w=n("a",{class:"header-anchor",href:"#feature-data","aria-hidden":"true"},"#",-1),E={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#feature-data",target:"_blank",rel:"noopener noreferrer"},B={id:"accumulated",tabindex:"-1"},F=n("a",{class:"header-anchor",href:"#accumulated","aria-hidden":"true"},"#",-1),z={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#accumulated",target:"_blank",rel:"noopener noreferrer"},C=n("code",null,"GeoJSON",-1),O={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/sources/#geojson-clusterProperties",target:"_blank",rel:"noopener noreferrer"},A=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// 聚合点会新增 \`sum\` 属性，表示聚合的所有点的 \`value\` 值的和</span>
map<span class="token punctuation">.</span><span class="token function">addSource</span><span class="token punctuation">(</span><span class="token string">&#39;points&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;geojson&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token string">&#39;/data/point.geojson&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">cluster</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">clusterProperties</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">sum</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span><span class="token string">&#39;+&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;accumulated&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;sum&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;value&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 要素 value 属性</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>参考：<a href="/mapbox-gl-js-cookbook/data/point/cluster">聚合</a></p></blockquote>`,2),T={id:"feature-state",tabindex:"-1"},L=n("a",{class:"header-anchor",href:"#feature-state","aria-hidden":"true"},"#",-1),S={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#feature-state",target:"_blank",rel:"noopener noreferrer"},P=e(`<p>要素状态，要素状态不是数据的某一属性，需要通过编码对某要素设置，如给要素设置 <code>hover</code> 状态（如下），然后在表达式中即可使用：<code>[&#39;feature-state&#39;, &#39;hover&#39;]</code></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>map<span class="token punctuation">.</span><span class="token function">setFeatureState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">source</span><span class="token operator">:</span> <span class="token string">&#39;states&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">id</span><span class="token operator">:</span> hoveredStateId <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">hover</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),N={href:"https://docs.mapbox.com/mapbox-gl-js/example/hover-styles/",target:"_blank",rel:"noopener noreferrer"},V={id:"lookup",tabindex:"-1"},H=n("a",{class:"header-anchor",href:"#lookup","aria-hidden":"true"},"#",-1),I={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#lookup",target:"_blank",rel:"noopener noreferrer"},M={id:"at",tabindex:"-1"},R=n("a",{class:"header-anchor",href:"#at","aria-hidden":"true"},"#",-1),G={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#at",target:"_blank",rel:"noopener noreferrer"},J=e(`<p>从数组中检索项目。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;to-string&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;at&#39;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;fruits&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 香蕉</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,2),D={id:"get",tabindex:"-1"},Z=n("a",{class:"header-anchor",href:"#get","aria-hidden":"true"},"#",-1),K={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#get",target:"_blank",rel:"noopener noreferrer"},Q=e(`<p>获取要素属性，如果提供了第二个参数，则判断第二个参数对象。语法如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> string<span class="token punctuation">]</span><span class="token operator">:</span> value

<span class="token punctuation">[</span><span class="token string">&quot;get&quot;</span><span class="token punctuation">,</span> string<span class="token punctuation">,</span> object<span class="token punctuation">]</span><span class="token operator">:</span> value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>示例：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">]</span> <span class="token comment">// 有点意思</span>
<span class="token comment">// 对象</span>
<span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;literal&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;重庆市&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 重庆市</span>
<span class="token comment">// 要素属性对象</span>
<span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;object&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;district&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 重庆市</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="has" tabindex="-1"><a class="header-anchor" href="#has" aria-hidden="true">#</a> has</h3><p>判断当前要素是否存在属性值，如果提供了第二个参数，则判断第二个参数对象。如使用要素的 <code>color</code> 属性设置注记颜色，没有该属性则使用 <code>#000</code>：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;text-color&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&#39;case&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;has&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;color&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;color&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&#39;#000&#39;</span>
<span class="token punctuation">]</span> <span class="token comment">// #F00</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="in" tabindex="-1"><a class="header-anchor" href="#in" aria-hidden="true">#</a> in</h3><p>判断输入值（字符串或数组）中是否存在关键字。如判断 <code>title</code> 属性中是否存在 <code>意思</code> 子串和 <code>fruits</code> 属性中是否存在 <code>苹果</code> 项：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">&#39;in&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;意思&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">]</span> <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token string">&#39;in&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;苹果&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;fruits&#39;</span><span class="token punctuation">]</span> <span class="token comment">// true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="slice" tabindex="-1"><a class="header-anchor" href="#slice" aria-hidden="true">#</a> slice</h3><p>数组或字符串切片</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;slice&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;title&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span> <span class="token comment">// 点意</span>
<span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;slice&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;fruits&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// [&quot;香蕉&quot;]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,13),U={id:"decision",tabindex:"-1"},W=n("a",{class:"header-anchor",href:"#decision","aria-hidden":"true"},"#",-1),X={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#decision",target:"_blank",rel:"noopener noreferrer"},Y=n("p",null,[s("在表达式中，可使用常用的条件逻辑，比如："),n("code",null,'"if/then/else"'),s(" 的逻辑可使用 "),n("code",null,"'case'"),s(" 表达式，如需将输入的特定值映射不同的输出，可使用 "),n("code",null,"'match'"),s(" 表达式。")],-1),$={id:"case",tabindex:"-1"},nn=n("a",{class:"header-anchor",href:"#case","aria-hidden":"true"},"#",-1),sn={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#case",target:"_blank",rel:"noopener noreferrer"},an=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;circle-color&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&#39;case&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;price&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;#F00&#39;</span><span class="token punctuation">,</span> <span class="token comment">// if ＜ 50 红色</span>
  <span class="token punctuation">[</span><span class="token string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;price&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">&#39;#0F0&#39;</span><span class="token punctuation">,</span> <span class="token comment">// else if ＜ 100 绿色</span>
  <span class="token string">&#39;#00F&#39;</span> <span class="token comment">// else 蓝色</span>
<span class="token punctuation">]</span> <span class="token comment">// 因为 price = 99，所以最终会显示为绿色。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),tn={id:"coalesce",tabindex:"-1"},en=n("a",{class:"header-anchor",href:"#coalesce","aria-hidden":"true"},"#",-1),pn={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#coalesce",target:"_blank",rel:"noopener noreferrer"},on=e(`<p>依次计算每一个表达式，直到得到一个有效值。比如下面表达式中，先取 <code>name_zh-Hans</code> 属性，如果不存在或为空，再取 <code>name_en</code> ，如果仍然无效，就取 <code>name</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&#39;coalesce&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name_zh-Hans&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name_en&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),cn={id:"match",tabindex:"-1"},ln=n("a",{class:"header-anchor",href:"#match","aria-hidden":"true"},"#",-1),rn={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#match",target:"_blank",rel:"noopener noreferrer"},un=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;icon-image&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&#39;match&#39;</span><span class="token punctuation">,</span>
  <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;type&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">&#39;fruit&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;fruit-icon&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 类型是 fruit，显示 fruit-icon</span>
  <span class="token string">&#39;vegetable&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;vegetable-icon&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 类型是 vegetable vegetable-icon</span>
  <span class="token string">&#39;default-icon&#39;</span> <span class="token comment">// 无匹配时，默认图标</span>
<span class="token punctuation">]</span> <span class="token comment">// 因为 type = 99，所以最终会显示 fruit-icon。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,1),dn={id:"within",tabindex:"-1"},kn=n("a",{class:"header-anchor",href:"#within","aria-hidden":"true"},"#",-1),mn={href:"https://docs.mapbox.com/style-spec/reference/expressions/#within",target:"_blank",rel:"noopener noreferrer"},vn=e(`<p>如果要素完全包含在输入的多边形内，则返回 <code>true</code>，否则返回 <code>false</code>。输入可以是类型为 Polygon、MultiPolygon、Feature 或 FeatureCollection 的有效 GeoJSON，仅支持 <code>Point</code> 和 <code>LineString</code>。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&quot;filter&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;coordinates&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">107</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">107</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">29</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">108</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">[</span><span class="token number">107</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">]</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Polygon&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),hn={id:"ramps-scales-curves",tabindex:"-1"},gn=n("a",{class:"header-anchor",href:"#ramps-scales-curves","aria-hidden":"true"},"#",-1),bn={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#ramps-scales-curves",target:"_blank",rel:"noopener noreferrer"},_n={id:"interpolate",tabindex:"-1"},yn=n("a",{class:"header-anchor",href:"#interpolate","aria-hidden":"true"},"#",-1),xn={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#interpolate",target:"_blank",rel:"noopener noreferrer"},fn=e(`<p>通过在输入和输出值对之间插值来产生连续、平滑的结果。支持 <code>linear</code>、<code>exponential</code> 和 <code>cubic-bezier</code>，<code>stops</code> 数值必须严格增序。语法如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">&quot;interpolate&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">interpolation</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;linear&quot;</span><span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token string">&quot;exponential&quot;</span><span class="token punctuation">,</span> base<span class="token punctuation">]</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token string">&quot;cubic-bezier&quot;</span><span class="token punctuation">,</span> x1<span class="token punctuation">,</span> y1<span class="token punctuation">,</span> x2<span class="token punctuation">,</span> y2<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
  <span class="token literal-property property">stop_input_1</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">stop_output_1</span><span class="token operator">:</span> OutputType<span class="token punctuation">,</span>
  <span class="token literal-property property">stop_input_n</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">stop_output_n</span><span class="token operator">:</span> OutputType<span class="token punctuation">,</span> <span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token function">OutputType</span> <span class="token punctuation">(</span>number<span class="token punctuation">,</span> array<span class="token operator">&lt;</span>number<span class="token operator">&gt;</span><span class="token punctuation">,</span> or Color<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>interpolate-hcl</code> 和 <code>interpolate-lab</code> 与其类似，但是输出必须为 <code>Color</code>，前者在 Hue-Chroma-Luminance 色彩空间插值，后者在 CIELAB 色彩空间插值。</p>`,3),qn={id:"step",tabindex:"-1"},jn=n("a",{class:"header-anchor",href:"#step","aria-hidden":"true"},"#",-1),wn={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#step",target:"_blank",rel:"noopener noreferrer"},En=e(`<p>通过评估由输入和输出值对定义的分段常数函数，产生离散的阶梯式结果。<code>stops</code> 数值必须严格增序。语法如下：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">&quot;step&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">input</span><span class="token operator">:</span> number<span class="token punctuation">,</span>
  <span class="token literal-property property">stop_output_0</span><span class="token operator">:</span> OutputType<span class="token punctuation">,</span>
  <span class="token literal-property property">stop_input_1</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">stop_output_1</span><span class="token operator">:</span> OutputType<span class="token punctuation">,</span>
  <span class="token literal-property property">stop_input_n</span><span class="token operator">:</span> number<span class="token punctuation">,</span> <span class="token literal-property property">stop_output_n</span><span class="token operator">:</span> OutputType<span class="token punctuation">,</span> <span class="token operator">...</span>
<span class="token punctuation">]</span><span class="token operator">:</span> OutputType
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),Bn=e(`<h2 id="variable-binding" tabindex="-1"><a class="header-anchor" href="#variable-binding" aria-hidden="true">#</a> Variable binding</h2><ul><li>let 绑定变量</li><li>var 引用 <code>let</code> 绑定的变量</li></ul><p>如：<code>name</code> 字段值有 <code>&#39;香蕉&#39;</code>、<code>&#39;苹果,香蕉&#39;</code> 等以逗号分隔的词，仅展示第一个值：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">{</span>
  <span class="token string-property property">&#39;text-field&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&#39;let&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;idx&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;index-of&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;,&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span>
      <span class="token string">&#39;case&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#39;&lt;&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;var&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;idx&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">[</span><span class="token string">&#39;slice&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;name&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;var&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;idx&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="string" tabindex="-1"><a class="header-anchor" href="#string" aria-hidden="true">#</a> String</h2><ul><li>downcase 转小写</li><li>upcase 转大写</li></ul><h2 id="color" tabindex="-1"><a class="header-anchor" href="#color" aria-hidden="true">#</a> Color</h2><ul><li>rgb</li><li>rgba</li></ul><h2 id="math" tabindex="-1"><a class="header-anchor" href="#math" aria-hidden="true">#</a> Math</h2>`,9),Fn={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/expressions/#math",target:"_blank",rel:"noopener noreferrer"},zn=e(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token string-property property">&#39;circle-radius&#39;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;get&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;gdp&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="zoom" tabindex="-1"><a class="header-anchor" href="#zoom" aria-hidden="true">#</a> Zoom</h2><p>获取当前缩放级别，仅用于 <code>step</code> 或 <code>interpolate</code> 表达式的输入。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">&#39;zoom&#39;</span><span class="token punctuation">]</span><span class="token operator">:</span> number
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="heatmap" tabindex="-1"><a class="header-anchor" href="#heatmap" aria-hidden="true">#</a> Heatmap</h2><p>获取热力图图层中像素的核密度估计，只能用于 <code>heatmap-color</code> 属性。</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token punctuation">[</span><span class="token string">&#39;heatmap-density&#39;</span><span class="token punctuation">]</span><span class="token operator">:</span> number
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,7);function Cn(On,An){const t=p("ExternalLinkIcon"),i=p("common-code-view"),l=p("ClientOnly"),c=p("RouterLink");return u(),d("div",null,[m,n("p",null,[s("任何 "),v,s(" 属性、"),h,s(" 属性或 "),g,s(" 的值都可以是表达式（"),n("a",b,[s("expressions"),a(t)]),s("）。示例如下：")]),_,n("h2",y,[x,s(),n("a",f,[s("Types"),a(t)])]),q,n("h2",j,[w,s(),n("a",E,[s("Feature data"),a(t)])]),n("h3",B,[F,s(),n("a",z,[s("accumulated"),a(t)])]),n("p",null,[s("返回累积的聚合属性的值，只能用于开启聚合的 "),C,s(" 源的 "),n("a",O,[s("clusterProperties"),a(t)]),s(" 选项，如：")]),A,n("h3",T,[L,s(),n("a",S,[s("feature-state"),a(t)])]),P,n("blockquote",null,[n("p",null,[s("示例："),n("a",N,[s("Create a hover effect"),a(t)])])]),n("h2",V,[H,s(),n("a",I,[s("Lookup"),a(t)])]),n("h3",M,[R,s(),n("a",G,[s("at"),a(t)])]),J,n("h3",D,[Z,s(),n("a",K,[s("get"),a(t)])]),Q,n("h2",U,[W,s(),n("a",X,[s("Decision"),a(t)])]),Y,n("h3",$,[nn,s(),n("a",sn,[s("case"),a(t)])]),an,n("h3",tn,[en,s(),n("a",pn,[s("coalesce"),a(t)])]),on,n("h3",cn,[ln,s(),n("a",rn,[s("match"),a(t)])]),un,n("h3",dn,[kn,s(),n("a",mn,[s("within"),a(t)])]),vn,a(l,null,{default:o(()=>[a(i,{name:"expression-within"})]),_:1}),n("h2",hn,[gn,s(),n("a",bn,[s("Ramps, scales, curves"),a(t)])]),n("h3",_n,[yn,s(),n("a",xn,[s("interpolate"),a(t)])]),fn,n("blockquote",null,[n("p",null,[s("参考："),a(c,{to:"/data/thematic.html#%E6%AF%94%E4%BE%8B%E7%AC%A6%E5%8F%B7%E5%9B%BE"},{default:o(()=>[s("比例符号图")]),_:1}),s("、"),a(c,{to:"/advance/track.html#%E5%8F%B0%E9%A3%8E%E8%B7%AF%E5%BE%84"},{default:o(()=>[s("台风路径")]),_:1})])]),n("h3",qn,[jn,s(),n("a",wn,[s("step"),a(t)])]),En,n("blockquote",null,[n("p",null,[s("参考："),a(c,{to:"/data/thematic.html#%E7%82%B9%E5%AF%86%E5%BA%A6%E5%9B%BE"},{default:o(()=>[s("点密度图")]),_:1})])]),Bn,n("p",null,[s("支持基本的数学运算，详见："),n("a",Fn,[s("Math"),a(t)])]),zn])}const Ln=r(k,[["render",Cn],["__file","expression.html.vue"]]);export{Ln as default};
