var F0=Object.defineProperty;var q0=(t,e,r)=>e in t?F0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var U=(t,e,r)=>(q0(t,typeof e!="symbol"?e+"":e,r),r);import{g as D0,a as G0,b as B0}from"./base-map-XmSAiI59.js";import{e as z0}from"./earcut-C4sJTbQb.js";import{g as $0,o as V0,h as J0,w as Y0,a as le,k as X0,_ as U0}from"./app-WXFCxs9o.js";var gt={},Ne="1.13.6",dr=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Ht=Array.prototype,Re=Object.prototype,mr=typeof Symbol<"u"?Symbol.prototype:null,Q0=Ht.push,Rt=Ht.slice,_t=Re.toString,W0=Re.hasOwnProperty,Qr=typeof ArrayBuffer<"u",Z0=typeof DataView<"u",H0=Array.isArray,xr=Object.keys,wr=Object.create,Er=Qr&&ArrayBuffer.isView,K0=isNaN,j0=isFinite,Wr=!{toString:null}.propertyIsEnumerable("toString"),Sr=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ti=Math.pow(2,53)-1;function C(t,e){return e=e==null?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var a=Array(e+1);for(i=0;i<e;i++)a[i]=arguments[i];return a[e]=n,t.apply(this,a)}}function tt(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function Zr(t){return t===null}function Ce(t){return t===void 0}function Te(t){return t===!0||t===!1||_t.call(t)==="[object Boolean]"}function Hr(t){return!!(t&&t.nodeType===1)}function R(t){var e="[object "+t+"]";return function(r){return _t.call(r)===e}}const Kt=R("String"),Fe=R("Number"),Kr=R("Date"),jr=R("RegExp"),tn=R("Error"),qe=R("Symbol"),De=R("ArrayBuffer");var en=R("Function"),ei=dr.document&&dr.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof ei!="function"&&(en=function(t){return typeof t=="function"||!1});const N=en,rn=R("Object");var nn=Z0&&rn(new DataView(new ArrayBuffer(8))),Ge=typeof Map<"u"&&rn(new Map),ri=R("DataView");function ni(t){return t!=null&&N(t.getInt8)&&De(t.buffer)}const Mt=nn?ni:ri,et=H0||R("Array");function rt(t,e){return t!=null&&W0.call(t,e)}var ye=R("Arguments");(function(){ye(arguments)||(ye=function(t){return rt(t,"callee")})})();const jt=ye;function an(t){return!qe(t)&&j0(t)&&!isNaN(parseFloat(t))}function Be(t){return Fe(t)&&K0(t)}function ze(t){return function(){return t}}function on(t){return function(e){var r=t(e);return typeof r=="number"&&r>=0&&r<=ti}}function un(t){return function(e){return e==null?void 0:e[t]}}const $t=un("byteLength"),ii=on($t);var ai=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function oi(t){return Er?Er(t)&&!Mt(t):ii(t)&&ai.test(_t.call(t))}const $e=Qr?oi:ze(!1),F=un("length");function ui(t){for(var e={},r=t.length,n=0;n<r;++n)e[t[n]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function sn(t,e){e=ui(e);var r=Sr.length,n=t.constructor,i=N(n)&&n.prototype||Re,a="constructor";for(rt(t,a)&&!e.contains(a)&&e.push(a);r--;)a=Sr[r],a in t&&t[a]!==i[a]&&!e.contains(a)&&e.push(a)}function I(t){if(!tt(t))return[];if(xr)return xr(t);var e=[];for(var r in t)rt(t,r)&&e.push(r);return Wr&&sn(t,e),e}function ln(t){if(t==null)return!0;var e=F(t);return typeof e=="number"&&(et(t)||Kt(t)||jt(t))?e===0:F(I(t))===0}function Ve(t,e){var r=I(e),n=r.length;if(t==null)return!n;for(var i=Object(t),a=0;a<n;a++){var o=r[a];if(e[o]!==i[o]||!(o in i))return!1}return!0}function S(t){if(t instanceof S)return t;if(!(this instanceof S))return new S(t);this._wrapped=t}S.VERSION=Ne;S.prototype.value=function(){return this._wrapped};S.prototype.valueOf=S.prototype.toJSON=S.prototype.value;S.prototype.toString=function(){return String(this._wrapped)};function Pr(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,$t(t))}var _r="[object DataView]";function de(t,e,r,n){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:fn(t,e,r,n)}function fn(t,e,r,n){t instanceof S&&(t=t._wrapped),e instanceof S&&(e=e._wrapped);var i=_t.call(t);if(i!==_t.call(e))return!1;if(nn&&i=="[object Object]"&&Mt(t)){if(!Mt(e))return!1;i=_r}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return mr.valueOf.call(t)===mr.valueOf.call(e);case"[object ArrayBuffer]":case _r:return fn(Pr(t),Pr(e),r,n)}var a=i==="[object Array]";if(!a&&$e(t)){var o=$t(t);if(o!==$t(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;a=!0}if(!a){if(typeof t!="object"||typeof e!="object")return!1;var u=t.constructor,s=e.constructor;if(u!==s&&!(N(u)&&u instanceof u&&N(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var l=r.length;l--;)if(r[l]===t)return n[l]===e;if(r.push(t),n.push(e),a){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!de(t[l],e[l],r,n))return!1}else{var h=I(t),c;if(l=h.length,I(e).length!==l)return!1;for(;l--;)if(c=h[l],!(rt(e,c)&&de(t[c],e[c],r,n)))return!1}return r.pop(),n.pop(),!0}function hn(t,e){return de(t,e)}function yt(t){if(!tt(t))return[];var e=[];for(var r in t)e.push(r);return Wr&&sn(t,e),e}function Je(t){var e=F(t);return function(r){if(r==null)return!1;var n=yt(r);if(F(n))return!1;for(var i=0;i<e;i++)if(!N(r[t[i]]))return!1;return t!==pn||!N(r[Ye])}}var Ye="forEach",cn="has",Xe=["clear","delete"],vn=["get",cn,"set"],si=Xe.concat(Ye,vn),pn=Xe.concat(vn),li=["add"].concat(Xe,Ye,cn);const gn=Ge?Je(si):R("Map"),yn=Ge?Je(pn):R("WeakMap"),dn=Ge?Je(li):R("Set"),mn=R("WeakSet");function ut(t){for(var e=I(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n}function xn(t){for(var e=I(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n}function Ue(t){for(var e={},r=I(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e}function At(t){var e=[];for(var r in t)N(t[r])&&e.push(r);return e.sort()}function Qe(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var a=arguments[i],o=t(a),u=o.length,s=0;s<u;s++){var l=o[s];(!e||r[l]===void 0)&&(r[l]=a[l])}return r}}const We=Qe(yt),vt=Qe(I),Ze=Qe(yt,!0);function fi(){return function(){}}function wn(t){if(!tt(t))return{};if(wr)return wr(t);var e=fi();e.prototype=t;var r=new e;return e.prototype=null,r}function En(t,e){var r=wn(t);return e&&vt(r,e),r}function Sn(t){return tt(t)?et(t)?t.slice():We({},t):t}function Pn(t,e){return e(t),t}function He(t){return et(t)?t:[t]}S.toPath=He;function Ct(t){return S.toPath(t)}function Ke(t,e){for(var r=e.length,n=0;n<r;n++){if(t==null)return;t=t[e[n]]}return r?t:void 0}function je(t,e,r){var n=Ke(t,Ct(e));return Ce(n)?r:n}function _n(t,e){e=Ct(e);for(var r=e.length,n=0;n<r;n++){var i=e[n];if(!rt(t,i))return!1;t=t[i]}return!!r}function te(t){return t}function ot(t){return t=vt({},t),function(e){return Ve(e,t)}}function ee(t){return t=Ct(t),function(e){return Ke(e,t)}}function Tt(t,e,r){if(e===void 0)return t;switch(r??3){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,a){return t.call(e,n,i,a)};case 4:return function(n,i,a,o){return t.call(e,n,i,a,o)}}return function(){return t.apply(e,arguments)}}function Mn(t,e,r){return t==null?te:N(t)?Tt(t,e,r):tt(t)&&!et(t)?ot(t):ee(t)}function re(t,e){return Mn(t,e,1/0)}S.iteratee=re;function q(t,e,r){return S.iteratee!==re?S.iteratee(t,e):Mn(t,e,r)}function An(t,e,r){e=q(e,r);for(var n=I(t),i=n.length,a={},o=0;o<i;o++){var u=n[o];a[u]=e(t[u],u,t)}return a}function tr(){}function bn(t){return t==null?tr:function(e){return je(t,e)}}function Ln(t,e,r){var n=Array(Math.max(0,t));e=Tt(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n}function Vt(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}const pt=Date.now||function(){return new Date().getTime()};function On(t){var e=function(a){return t[a]},r="(?:"+I(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(a){return a=a==null?"":""+a,n.test(a)?a.replace(i,e):a}}const In={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},kn=On(In),hi=Ue(In),Nn=On(hi),Rn=S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var fe=/(.)^/,ci={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},vi=/\\|'|\r|\n|\u2028|\u2029/g;function pi(t){return"\\"+ci[t]}var gi=/^\s*(\w|\$)+\s*$/;function Cn(t,e,r){!e&&r&&(e=r),e=Ze({},e,S.templateSettings);var n=RegExp([(e.escape||fe).source,(e.interpolate||fe).source,(e.evaluate||fe).source].join("|")+"|$","g"),i=0,a="__p+='";t.replace(n,function(l,h,c,f,v){return a+=t.slice(i,v).replace(vi,pi),i=v+l.length,h?a+=`'+
((__t=(`+h+`))==null?'':_.escape(__t))+
'`:c?a+=`'+
((__t=(`+c+`))==null?'':__t)+
'`:f&&(a+=`';
`+f+`
__p+='`),l}),a+=`';
`;var o=e.variable;if(o){if(!gi.test(o))throw new Error("variable is not a bare identifier: "+o)}else a=`with(obj||{}){
`+a+`}
`,o="obj";a=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+a+`return __p;
`;var u;try{u=new Function(o,"_",a)}catch(l){throw l.source=a,l}var s=function(l){return u.call(this,l,S)};return s.source="function("+o+`){
`+a+"}",s}function Tn(t,e,r){e=Ct(e);var n=e.length;if(!n)return N(r)?r.call(t):r;for(var i=0;i<n;i++){var a=t==null?void 0:t[e[i]];a===void 0&&(a=r,i=n),t=N(a)?a.call(t):a}return t}var yi=0;function Fn(t){var e=++yi+"";return t?t+e:e}function qn(t){var e=S(t);return e._chain=!0,e}function Dn(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var a=wn(t.prototype),o=t.apply(a,i);return tt(o)?o:a}var st=C(function(t,e){var r=st.placeholder,n=function(){for(var i=0,a=e.length,o=Array(a),u=0;u<a;u++)o[u]=e[u]===r?arguments[i++]:e[u];for(;i<arguments.length;)o.push(arguments[i++]);return Dn(t,n,this,this,o)};return n});st.placeholder=S;const er=C(function(t,e,r){if(!N(t))throw new TypeError("Bind must be called on a function");var n=C(function(i){return Dn(t,n,e,this,r.concat(i))});return n}),D=on(F);function lt(t,e,r,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(t);for(var i=n.length,a=0,o=F(t);a<o;a++){var u=t[a];if(D(u)&&(et(u)||jt(u)))if(e>1)lt(u,e-1,r,n),i=n.length;else for(var s=0,l=u.length;s<l;)n[i++]=u[s++];else r||(n[i++]=u)}return n}const Gn=C(function(t,e){e=lt(e,!1,!1);var r=e.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=er(t[n],t)}return t});function Bn(t,e){var r=function(n){var i=r.cache,a=""+(e?e.apply(this,arguments):n);return rt(i,a)||(i[a]=t.apply(this,arguments)),i[a]};return r.cache={},r}const rr=C(function(t,e,r){return setTimeout(function(){return t.apply(null,r)},e)}),zn=st(rr,S,1);function $n(t,e,r){var n,i,a,o,u=0;r||(r={});var s=function(){u=r.leading===!1?0:pt(),n=null,o=t.apply(i,a),n||(i=a=null)},l=function(){var h=pt();!u&&r.leading===!1&&(u=h);var c=e-(h-u);return i=this,a=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),u=h,o=t.apply(i,a),n||(i=a=null)):!n&&r.trailing!==!1&&(n=setTimeout(s,c)),o};return l.cancel=function(){clearTimeout(n),u=0,n=i=a=null},l}function Vn(t,e,r){var n,i,a,o,u,s=function(){var h=pt()-i;e>h?n=setTimeout(s,e-h):(n=null,r||(o=t.apply(u,a)),n||(a=u=null))},l=C(function(h){return u=this,a=h,i=pt(),n||(n=setTimeout(s,e),r&&(o=t.apply(u,a))),o});return l.cancel=function(){clearTimeout(n),n=a=u=null},l}function Jn(t,e){return st(e,t)}function ne(t){return function(){return!t.apply(this,arguments)}}function Yn(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}function Xn(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function nr(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}}const Un=st(nr,2);function ir(t,e,r){e=q(e,r);for(var n=I(t),i,a=0,o=n.length;a<o;a++)if(i=n[a],e(t[i],i,t))return i}function Qn(t){return function(e,r,n){r=q(r,n);for(var i=F(e),a=t>0?0:i-1;a>=0&&a<i;a+=t)if(r(e[a],a,e))return a;return-1}}const ie=Qn(1),ar=Qn(-1);function or(t,e,r,n){r=q(r,n,1);for(var i=r(e),a=0,o=F(t);a<o;){var u=Math.floor((a+o)/2);r(t[u])<i?a=u+1:o=u}return a}function Wn(t,e,r){return function(n,i,a){var o=0,u=F(n);if(typeof a=="number")t>0?o=a>=0?a:Math.max(a+u,o):u=a>=0?Math.min(a+1,u):a+u+1;else if(r&&a&&u)return a=r(n,i),n[a]===i?a:-1;if(i!==i)return a=e(Rt.call(n,o,u),Be),a>=0?a+o:-1;for(a=t>0?o:u-1;a>=0&&a<u;a+=t)if(n[a]===i)return a;return-1}}const ur=Wn(1,ie,or),Zn=Wn(-1,ar);function bt(t,e,r){var n=D(t)?ie:ir,i=n(t,e,r);if(i!==void 0&&i!==-1)return t[i]}function Hn(t,e){return bt(t,ot(e))}function Y(t,e,r){e=Tt(e,r);var n,i;if(D(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var a=I(t);for(n=0,i=a.length;n<i;n++)e(t[a[n]],a[n],t)}return t}function W(t,e,r){e=q(e,r);for(var n=!D(t)&&I(t),i=(n||t).length,a=Array(i),o=0;o<i;o++){var u=n?n[o]:o;a[o]=e(t[u],u,t)}return a}function Kn(t){var e=function(r,n,i,a){var o=!D(r)&&I(r),u=(o||r).length,s=t>0?0:u-1;for(a||(i=r[o?o[s]:s],s+=t);s>=0&&s<u;s+=t){var l=o?o[s]:s;i=n(i,r[l],l,r)}return i};return function(r,n,i,a){var o=arguments.length>=3;return e(r,Tt(n,a,4),i,o)}}const ht=Kn(1),Jt=Kn(-1);function K(t,e,r){var n=[];return e=q(e,r),Y(t,function(i,a,o){e(i,a,o)&&n.push(i)}),n}function jn(t,e,r){return K(t,ne(q(e)),r)}function Yt(t,e,r){e=q(e,r);for(var n=!D(t)&&I(t),i=(n||t).length,a=0;a<i;a++){var o=n?n[a]:a;if(!e(t[o],o,t))return!1}return!0}function Xt(t,e,r){e=q(e,r);for(var n=!D(t)&&I(t),i=(n||t).length,a=0;a<i;a++){var o=n?n[a]:a;if(e(t[o],o,t))return!0}return!1}function G(t,e,r,n){return D(t)||(t=ut(t)),(typeof r!="number"||n)&&(r=0),ur(t,e,r)>=0}const t0=C(function(t,e,r){var n,i;return N(e)?i=e:(e=Ct(e),n=e.slice(0,-1),e=e[e.length-1]),W(t,function(a){var o=i;if(!o){if(n&&n.length&&(a=Ke(a,n)),a==null)return;o=a[e]}return o==null?o:o.apply(a,r)})});function ae(t,e){return W(t,ee(e))}function e0(t,e){return K(t,ot(e))}function sr(t,e,r){var n=-1/0,i=-1/0,a,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=D(t)?t:ut(t);for(var u=0,s=t.length;u<s;u++)a=t[u],a!=null&&a>n&&(n=a)}else e=q(e,r),Y(t,function(l,h,c){o=e(l,h,c),(o>i||o===-1/0&&n===-1/0)&&(n=l,i=o)});return n}function r0(t,e,r){var n=1/0,i=1/0,a,o;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=D(t)?t:ut(t);for(var u=0,s=t.length;u<s;u++)a=t[u],a!=null&&a<n&&(n=a)}else e=q(e,r),Y(t,function(l,h,c){o=e(l,h,c),(o<i||o===1/0&&n===1/0)&&(n=l,i=o)});return n}var di=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function lr(t){return t?et(t)?Rt.call(t):Kt(t)?t.match(di):D(t)?W(t,te):ut(t):[]}function fr(t,e,r){if(e==null||r)return D(t)||(t=ut(t)),t[Vt(t.length-1)];var n=lr(t),i=F(n);e=Math.max(Math.min(e,i),0);for(var a=i-1,o=0;o<e;o++){var u=Vt(o,a),s=n[o];n[o]=n[u],n[u]=s}return n.slice(0,e)}function n0(t){return fr(t,1/0)}function i0(t,e,r){var n=0;return e=q(e,r),ae(W(t,function(i,a,o){return{value:i,index:n++,criteria:e(i,a,o)}}).sort(function(i,a){var o=i.criteria,u=a.criteria;if(o!==u){if(o>u||o===void 0)return 1;if(o<u||u===void 0)return-1}return i.index-a.index}),"value")}function oe(t,e){return function(r,n,i){var a=e?[[],[]]:{};return n=q(n,i),Y(r,function(o,u){var s=n(o,u,r);t(a,o,s)}),a}}const a0=oe(function(t,e,r){rt(t,r)?t[r].push(e):t[r]=[e]}),o0=oe(function(t,e,r){t[r]=e}),u0=oe(function(t,e,r){rt(t,r)?t[r]++:t[r]=1}),s0=oe(function(t,e,r){t[r?0:1].push(e)},!0);function l0(t){return t==null?0:D(t)?t.length:I(t).length}function mi(t,e,r){return e in r}const hr=C(function(t,e){var r={},n=e[0];if(t==null)return r;N(n)?(e.length>1&&(n=Tt(n,e[1])),e=yt(t)):(n=mi,e=lt(e,!1,!1),t=Object(t));for(var i=0,a=e.length;i<a;i++){var o=e[i],u=t[o];n(u,o,t)&&(r[o]=u)}return r}),f0=C(function(t,e){var r=e[0],n;return N(r)?(r=ne(r),e.length>1&&(n=e[1])):(e=W(lt(e,!1,!1),String),r=function(i,a){return!G(e,a)}),hr(t,r,n)});function cr(t,e,r){return Rt.call(t,0,Math.max(0,t.length-(e==null||r?1:e)))}function ct(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[0]:cr(t,t.length-e)}function at(t,e,r){return Rt.call(t,e==null||r?1:e)}function h0(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[t.length-1]:at(t,Math.max(0,t.length-e))}function c0(t){return K(t,Boolean)}function v0(t,e){return lt(t,e,!1)}const vr=C(function(t,e){return e=lt(e,!0,!0),K(t,function(r){return!G(e,r)})}),p0=C(function(t,e){return vr(t,e)});function Lt(t,e,r,n){Te(e)||(n=r,r=e,e=!1),r!=null&&(r=q(r,n));for(var i=[],a=[],o=0,u=F(t);o<u;o++){var s=t[o],l=r?r(s,o,t):s;e&&!r?((!o||a!==l)&&i.push(s),a=l):r?G(a,l)||(a.push(l),i.push(s)):G(i,s)||i.push(s)}return i}const g0=C(function(t){return Lt(lt(t,!0,!0))});function y0(t){for(var e=[],r=arguments.length,n=0,i=F(t);n<i;n++){var a=t[n];if(!G(e,a)){var o;for(o=1;o<r&&G(arguments[o],a);o++);o===r&&e.push(a)}}return e}function Ot(t){for(var e=t&&sr(t,F).length||0,r=Array(e),n=0;n<e;n++)r[n]=ae(t,n);return r}const d0=C(Ot);function m0(t,e){for(var r={},n=0,i=F(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r}function x0(t,e,r){e==null&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),a=0;a<n;a++,t+=r)i[a]=t;return i}function w0(t,e){if(e==null||e<1)return[];for(var r=[],n=0,i=t.length;n<i;)r.push(Rt.call(t,n,n+=e));return r}function pr(t,e){return t._chain?S(e).chain():e}function gr(t){return Y(At(t),function(e){var r=S[e]=t[e];S.prototype[e]=function(){var n=[this._wrapped];return Q0.apply(n,arguments),pr(this,r.apply(S,n))}}),S}Y(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Ht[t];S.prototype[t]=function(){var r=this._wrapped;return r!=null&&(e.apply(r,arguments),(t==="shift"||t==="splice")&&r.length===0&&delete r[0]),pr(this,r)}});Y(["concat","join","slice"],function(t){var e=Ht[t];S.prototype[t]=function(){var r=this._wrapped;return r!=null&&(r=e.apply(r,arguments)),pr(this,r)}});const xi=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Ne,after:Xn,all:Yt,allKeys:yt,any:Xt,assign:vt,before:nr,bind:er,bindAll:Gn,chain:qn,chunk:w0,clone:Sn,collect:W,compact:c0,compose:Yn,constant:ze,contains:G,countBy:u0,create:En,debounce:Vn,default:S,defaults:Ze,defer:zn,delay:rr,detect:bt,difference:vr,drop:at,each:Y,escape:kn,every:Yt,extend:We,extendOwn:vt,filter:K,find:bt,findIndex:ie,findKey:ir,findLastIndex:ar,findWhere:Hn,first:ct,flatten:v0,foldl:ht,foldr:Jt,forEach:Y,functions:At,get:je,groupBy:a0,has:_n,head:ct,identity:te,include:G,includes:G,indexBy:o0,indexOf:ur,initial:cr,inject:ht,intersection:y0,invert:Ue,invoke:t0,isArguments:jt,isArray:et,isArrayBuffer:De,isBoolean:Te,isDataView:Mt,isDate:Kr,isElement:Hr,isEmpty:ln,isEqual:hn,isError:tn,isFinite:an,isFunction:N,isMap:gn,isMatch:Ve,isNaN:Be,isNull:Zr,isNumber:Fe,isObject:tt,isRegExp:jr,isSet:dn,isString:Kt,isSymbol:qe,isTypedArray:$e,isUndefined:Ce,isWeakMap:yn,isWeakSet:mn,iteratee:re,keys:I,last:h0,lastIndexOf:Zn,map:W,mapObject:An,matcher:ot,matches:ot,max:sr,memoize:Bn,methods:At,min:r0,mixin:gr,negate:ne,noop:tr,now:pt,object:m0,omit:f0,once:Un,pairs:xn,partial:st,partition:s0,pick:hr,pluck:ae,property:ee,propertyOf:bn,random:Vt,range:x0,reduce:ht,reduceRight:Jt,reject:jn,rest:at,restArguments:C,result:Tn,sample:fr,select:K,shuffle:n0,size:l0,some:Xt,sortBy:i0,sortedIndex:or,tail:at,take:ct,tap:Pn,template:Cn,templateSettings:Rn,throttle:$n,times:Ln,toArray:lr,toPath:He,transpose:Ot,unescape:Nn,union:g0,uniq:Lt,unique:Lt,uniqueId:Fn,unzip:Ot,values:ut,where:e0,without:p0,wrap:Jn,zip:d0},Symbol.toStringTag,{value:"Module"}));var me=gr(xi);me._=me;const wi=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Ne,after:Xn,all:Yt,allKeys:yt,any:Xt,assign:vt,before:nr,bind:er,bindAll:Gn,chain:qn,chunk:w0,clone:Sn,collect:W,compact:c0,compose:Yn,constant:ze,contains:G,countBy:u0,create:En,debounce:Vn,default:me,defaults:Ze,defer:zn,delay:rr,detect:bt,difference:vr,drop:at,each:Y,escape:kn,every:Yt,extend:We,extendOwn:vt,filter:K,find:bt,findIndex:ie,findKey:ir,findLastIndex:ar,findWhere:Hn,first:ct,flatten:v0,foldl:ht,foldr:Jt,forEach:Y,functions:At,get:je,groupBy:a0,has:_n,head:ct,identity:te,include:G,includes:G,indexBy:o0,indexOf:ur,initial:cr,inject:ht,intersection:y0,invert:Ue,invoke:t0,isArguments:jt,isArray:et,isArrayBuffer:De,isBoolean:Te,isDataView:Mt,isDate:Kr,isElement:Hr,isEmpty:ln,isEqual:hn,isError:tn,isFinite:an,isFunction:N,isMap:gn,isMatch:Ve,isNaN:Be,isNull:Zr,isNumber:Fe,isObject:tt,isRegExp:jr,isSet:dn,isString:Kt,isSymbol:qe,isTypedArray:$e,isUndefined:Ce,isWeakMap:yn,isWeakSet:mn,iteratee:re,keys:I,last:h0,lastIndexOf:Zn,map:W,mapObject:An,matcher:ot,matches:ot,max:sr,memoize:Bn,methods:At,min:r0,mixin:gr,negate:ne,noop:tr,now:pt,object:m0,omit:f0,once:Un,pairs:xn,partial:st,partition:s0,pick:hr,pluck:ae,property:ee,propertyOf:bn,random:Vt,range:x0,reduce:ht,reduceRight:Jt,reject:jn,rest:at,restArguments:C,result:Tn,sample:fr,select:K,shuffle:n0,size:l0,some:Xt,sortBy:i0,sortedIndex:or,tail:at,take:ct,tap:Pn,template:Cn,templateSettings:Rn,throttle:$n,times:Ln,toArray:lr,toPath:He,transpose:Ot,unescape:Nn,union:g0,uniq:Lt,unique:Lt,uniqueId:Fn,unzip:Ot,values:ut,where:e0,without:p0,wrap:Jn,zip:d0},Symbol.toStringTag,{value:"Module"})),Ei=D0(wi);var m=Ei,A=function(t,e,r){return e?(r||(r={}),r.message?{result:t,message:r.message}:{result:t}):t},Ut=function(t,e){return t.length<2||!m.isNumber(t[0])||!m.isNumber(t[1])?A(!1,e,{message:"invalid coordinates for GeoJSON Point"}):!0},Mr=function(t,e){var r=m.find(t,function(n){return n.length<4?A(!1,e,{message:"expecting coordinates of GeoJSON object to have at least 4 positions"}):m.isEqual(m.last(n),n[0])?Ut(n):A(!1,e,{message:"the first and last positions of GeoJSON LinearRing are not the same"})});return r?A(!1,e,{message:""}):!0},Ar=function(t,e){var r=m.find(t,function(n){return!Ut(n)});return r?A(!1,e,{message:"one of the coordinates of the LineString are invalid"}):!0},Dt=function(t){return t*Math.PI/180},E0=function(t,e){var r={},n,i,a;switch(e||(e="point"),e=e.toLowerCase(),e){case"point":var o=m.flatten(t),u=JSON.stringify(t)||{};o.length!==2?i=new Error(`expected a single set of coordinates in [lat, lng] format. 
Received `+u):(n=[parseFloat(o[1]),parseFloat(o[0])],r={type:"Point",coordinates:n});break;case"linestring":case"multipoint":n=[],m.each(t,function(h){n.push([parseFloat(h[1]),parseFloat(h[0])])}),e==="linestring"?e="LineString":e==="multipoint"&&(e="MultiPoint"),r={type:e,coordinates:n};break;case"polygon":m.isArray(t)&&m.isArray(t[0])&&!m.isArray(t[0][0])&&(t=[t]),n=[],m.find(t,function(h){return h.length<3?(i=new Error("Expecting 'array' to have at length of at least 3 sets of coordinates."),!0):(h.toString()!==m.last(h).toString()&&h.push(h[0]),a=[],m.each(h,function(c){a.push([parseFloat(c[1]),parseFloat(c[0])])}),n.push(a),!1)}),i||(r={type:"Polygon",coordinates:n});break;case"multilinestring":n=[],m.find(t,function(h){return h.length<2&&!i?(i=new Error("Expecting each LineString in MultiLineString to have at least 2 points."),!0):(a=[],m.each(h,function(c){a.push([parseFloat(c[1]),parseFloat(c[0])])}),n.push(a),!1)}),i||(r={type:"MultiLineString",coordinates:n});break;case"multipolygon":n=[];var s,l;m.find(t,function(h){return s=[],m.find(h,function(c){return l=[],c.length<3?(i=new Error("Expecting each array in MultiPolygon to have at least 3 points."),!0):(m.find(c,function(f){return l.push([parseFloat(f[1]),parseFloat(f[0])]),!1}),s.push(l),!1)}),n.push(s),!1}),i||(r={type:"MultiPolygon",coordinates:n});break;default:i=new Error("type not recognised or supported")}return i||r},S0=function(t){var e,r,n,i,a;if(!t.type||!t.coordinates)return new Error("The object specified is not a a valid GeoJSON object");switch(t.type.toLowerCase()){case"point":e=[parseFloat(t.coordinates[1]),parseFloat(t.coordinates[0])];break;case"linestring":e=t.coordinates,a=[],m.find(e,function(o){return typeof o=="object"?(a.push([parseFloat(o[1]),parseFloat(o[0])]),!1):(r=new Error("the object specified is not a valid GeoJSON LineString"),!0)}),r||(e=a);break;case"polygon":e=[],m.find(t.coordinates,function(o){return o.length?(n=[],o[0].toString()!==m.last(o).toString()?(r=new Error("The first and last coordinates of the Polygon are not the same"),!0):o.length<4?(r=new Error("A valid Polygon should have a minimum set of 4 points"),!0):(m.each(m.initial(o),function(u){n.push([parseFloat(u[1]),parseFloat(u[0])])}),e.push(n),r||(e=n),!1)):(r=new Error("the object specified is not a valid GeoJSON Polygon"),!0)});break;case"multipoint":e=[],m.each(t.coordinates,function(o){e.push([parseFloat(o[1]),parseFloat(o[0])])});break;case"multilinestring":e=[],m.find(t.coordinates,function(o){return o.length?(i=[],m.each(o,function(u){i.push([parseFloat(u[1]),parseFloat(u[0])])}),e.push(i),!1):(r=new Error("the object specified is not a valid GeoJSON MultiLineString"),!0)});break;case"multipolygon":e=[],m.each(t.coordinates,function(o){m.find(o,function(u){return u.length?(n=[],u[0].toString()!==m.last(u).toString()?(r=new Error("The first and last coordinates of the Polygon are not the same"),!0):u.length<4?(r=new Error("A valid Polygon should have a minimum set of 4 points"),!0):(m.each(m.initial(u),function(s){n.push([parseFloat(s[1]),parseFloat(s[0])])}),e.push(n),!1)):(r=new Error("the object specified is not a valid GeoJSON Polygon"),!0)})});break;default:r=new Error("unknown GeoJSON type specified")}return r||e},xe=function(t,e){e=e||3;var r=6378.137,n=0,i=t.length,a,o,u,s,l,h,c,f,v,p,g,y;for(a=0;a+1<i;a++)o=t[a],u=t[a+1],s=parseFloat(o[0]),l=parseFloat(u[0]),h=parseFloat(o[1]),c=parseFloat(u[1]),f=Dt(l-s),v=Dt(c-h),s=Dt(s),l=Dt(l),p=Math.sin(f/2)*Math.sin(f/2)+Math.sin(v/2)*Math.sin(v/2)*Math.cos(s)*Math.cos(l),g=2*Math.atan2(Math.sqrt(p),Math.sqrt(1-p)),y=r*g,n+=y;return n=Math.round(n*Math.pow(10,e))/Math.pow(10,e),n},Si=function(t,e){if(!m.isNumber(e)||e<.01)return console.error(new Error("distance should be a number greater than 10 meters")),null;var r;if(!m.isArray(t))if(t.coordinates&&m.isArray(t.coordinates)&&t.type.toLowerCase()==="linestring")r=!0,t=S0(t);else return console.error(new Error("distance should be a number greater than 10 meters")),null;var n,i,a,o=[],u;i=t[0],o.push(i);var s,l,h,c,f,v,p,g;return m.each(t,function(y){if(a=i,i=y,u=xe([i,a]),u>e){for(n=0,s=!1,l=e/u,h=e,c=0;!s||c+e<u;)f=m.last(o),v=i,p=[],f[0]>v[0]?p.push(-1):p.push(1),f[1]>v[1]?p.push(-1):p.push(1),g=[(v[0]-f[0])*l*p[0],(v[1]-f[1])*l*p[1]],p[0]>0?g[0]=g[0]+f[0]:g[0]=f[0]-g[0],p[1]>0?g[1]=g[1]+f[1]:g[1]=f[1]-g[1],p=[],h=xe([f,g]),h!==e?(n=h/e,l=l+l*(1-n)):(c+=e,s=!0,o.push(g));c=0,s=!1,o.push(i)}else o.push(i)}),r?E0(o,"linestring"):o},Gt=function(t,e){var r=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Feature","FeatureCollection","GeometryCollection"],n,i=m.indexOf(r,t.type);if(!t.type||i<0)return A(!1,e,{message:"invalid GeoJSON type supplied"});if(i<6){if(!t.coordinates||!m.isArray(t.coordinates))return A(!1,e,{message:"invalid GeoJSON type supplied"});if(t.type==="Point")return Ut(t.coordinates,e);if(t.type==="MultiPoint")return t.coordinates.length<2?A(!1,e,{message:"expecting array with at least 2 elements for GeoJSON MultiPoint"}):(n=m.find(t.coordinates,function(a){return!Ut(a)}),n?A(!1,e,{message:"one of the coordinates of the GeoJSON MultiPoint are invalid"}):!0);if(t.type==="LineString")return t.coordinates.length<2?A(!1,e,{message:"expecting array with at least 2 elements for GeoJSON LineString"}):Ar(t.coordinates,e);if(t.type==="MultiLineString")return t.coordinates.length<2?A(!1,e,{message:"expecting array of multiple set of coordinates for GeoJSON MultiLineString"}):(n=m.find(t.coordinates,function(a){return!Ar(a,e)}),n?A(!1,e,{message:"one of the coordinates of the GeoJSON MultiLineString are invalid"}):!0);if(t.type==="Polygon")return Mr(t.coordinates,e);if(t.type==="MultiPolygon")return n=m.find(t.coordinates,function(a){return!Mr(a,e)}),n?A(!1,e,{message:"one of the coordinateof the GeoJSON MultiPolygon are invalid"}):!0}if(i===6)return t.geometry?t.properties?Gt(t.geometry,e):A(!1,e,{message:"expected GeoJSON Feature to have properties"}):A(!1,e,{message:"expected GeoJSON Feature to have a geometry"});if(i===7)return t.features?m.isArray(t.features)?(n=m.find(t.features,function(a){return!Gt(a)}),n?A(!1,e,{message:"one of the GeoJSON FeatureCollection's features is invalid"}):!0):A(!1,e,{message:"expected GeoJSON FeatureCollection's features to be an array"}):A(!1,e,{message:"expected GeoJSON FeatureCollection to have features"});if(i===8)return t.geometries?m.isArray(t.geometries)?(n=m.find(t.geometries,function(a){return!Gt(a)}),n?A(!1,e,{message:"one of the GeoJSON GeometryCollection's geometries is invalid"}):!0):A(!1,e,{message:"expected GeoJSON GeometryCollection's geometries to be an array"}):A(!1,e,{message:"expected GeoJSON GeometryCollection to have geometries"})};gt.toGeoJSON=E0;gt.toArray=S0;gt.getDistance=xe;gt.complexify=Si;gt.isGeoJSON=Gt;var we=gt;function P0(t,e,r){r===void 0&&(r={});var n={type:"Feature"};return(r.id===0||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=e||{},n.geometry=t,n}function Pi(t,e,r){r===void 0&&(r={});for(var n=0,i=t;n<i.length;n++){var a=i[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<a[a.length-1].length;o++)if(a[a.length-1][o]!==a[0][o])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:t};return P0(u,e,r)}function _i(t,e,r){r===void 0&&(r={});var n={type:"MultiPolygon",coordinates:t};return P0(n,e,r)}function br(t){return t.type==="Feature"?t.geometry:t}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Mi(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(l){return function(h){return s([l,h])}}function s(l){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=l[0]&2?i.return:l[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,l[1])).done)return a;switch(i=0,a&&(l=[l[0]&2,a.value]),l[0]){case 0:case 1:a=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!a||l[1]>a[0]&&l[1]<a[3])){r.label=l[1];break}if(l[0]===6&&r.label<a[1]){r.label=a[1],a=l;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(l);break}a[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(h){l=[6,h],i=0}finally{n=a=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var j=function(){function t(e,r){this.next=null,this.key=e,this.data=r,this.left=null,this.right=null}return t}();function Ai(t,e){return t>e?1:t<e?-1:0}function Z(t,e,r){for(var n=new j(null,null),i=n,a=n;;){var o=r(t,e.key);if(o<0){if(e.left===null)break;if(r(t,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,e.left===null)break}a.left=e,a=e,e=e.left}else if(o>0){if(e.right===null)break;if(r(t,e.right.key)>0){var u=e.right;if(e.right=u.left,u.left=e,e=u,e.right===null)break}i.right=e,i=e,e=e.right}else break}return i.right=e.left,a.left=e.right,e.left=n.right,e.right=n.left,e}function he(t,e,r,n){var i=new j(t,e);if(r===null)return i.left=i.right=null,i;r=Z(t,r,n);var a=n(t,r.key);return a<0?(i.left=r.left,i.right=r,r.left=null):a>=0&&(i.right=r.right,i.left=r,r.right=null),i}function Lr(t,e,r){var n=null,i=null;if(e){e=Z(t,e,r);var a=r(e.key,t);a===0?(n=e.left,i=e.right):a<0?(i=e.right,e.right=null,n=e):(n=e.left,e.left=null,i=e)}return{left:n,right:i}}function bi(t,e,r){return e===null?t:(t===null||(e=Z(t.key,e,r),e.left=t),e)}function Ee(t,e,r,n,i){if(t){n(""+e+(r?"└── ":"├── ")+i(t)+`
`);var a=e+(r?"    ":"│   ");t.left&&Ee(t.left,a,!1,n,i),t.right&&Ee(t.right,a,!0,n,i)}}var yr=function(){function t(e){e===void 0&&(e=Ai),this._root=null,this._size=0,this._comparator=e}return t.prototype.insert=function(e,r){return this._size++,this._root=he(e,r,this._root,this._comparator)},t.prototype.add=function(e,r){var n=new j(e,r);this._root===null&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,a=Z(e,this._root,i),o=i(e,a.key);return o===0?this._root=a:(o<0?(n.left=a.left,n.right=a,a.left=null):o>0&&(n.right=a.right,n.left=a,a.right=null),this._size++,this._root=n),this._root},t.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},t.prototype._remove=function(e,r,n){var i;if(r===null)return null;r=Z(e,r,n);var a=n(e,r.key);return a===0?(r.left===null?i=r.right:(i=Z(e,r.left,n),i.right=r.right),this._size--,i):r},t.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Z(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},t.prototype.findStatic=function(e){for(var r=this._root,n=this._comparator;r;){var i=n(e,r.key);if(i===0)return r;i<0?r=r.left:r=r.right}return null},t.prototype.find=function(e){return this._root&&(this._root=Z(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},t.prototype.contains=function(e){for(var r=this._root,n=this._comparator;r;){var i=n(e,r.key);if(i===0)return!0;i<0?r=r.left:r=r.right}return!1},t.prototype.forEach=function(e,r){for(var n=this._root,i=[],a=!1;!a;)n!==null?(i.push(n),n=n.left):i.length!==0?(n=i.pop(),e.call(r,n),n=n.right):a=!0;return this},t.prototype.range=function(e,r,n,i){for(var a=[],o=this._comparator,u=this._root,s;a.length!==0||u;)if(u)a.push(u),u=u.left;else{if(u=a.pop(),s=o(u.key,r),s>0)break;if(o(u.key,e)>=0&&n.call(i,u))return this;u=u.right}return this},t.prototype.keys=function(){var e=[];return this.forEach(function(r){var n=r.key;return e.push(n)}),e},t.prototype.values=function(){var e=[];return this.forEach(function(r){var n=r.data;return e.push(n)}),e},t.prototype.min=function(){return this._root?this.minNode(this._root).key:null},t.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},t.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},t.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},t.prototype.at=function(e){for(var r=this._root,n=!1,i=0,a=[];!n;)if(r)a.push(r),r=r.left;else if(a.length>0){if(r=a.pop(),i===e)return r;i++,r=r.right}else n=!0;return null},t.prototype.next=function(e){var r=this._root,n=null;if(e.right){for(n=e.right;n.left;)n=n.left;return n}for(var i=this._comparator;r;){var a=i(e.key,r.key);if(a===0)break;a<0?(n=r,r=r.left):r=r.right}return n},t.prototype.prev=function(e){var r=this._root,n=null;if(e.left!==null){for(n=e.left;n.right;)n=n.right;return n}for(var i=this._comparator;r;){var a=i(e.key,r.key);if(a===0)break;a<0?r=r.left:(n=r,r=r.right)}return n},t.prototype.clear=function(){return this._root=null,this._size=0,this},t.prototype.toList=function(){return Oi(this._root)},t.prototype.load=function(e,r,n){r===void 0&&(r=[]),n===void 0&&(n=!1);var i=e.length,a=this._comparator;if(n&&_e(e,r,0,i-1,a),this._root===null)this._root=Se(e,r,0,i),this._size=i;else{var o=Ii(this.toList(),Li(e,r),a);i=this._size+i,this._root=Pe({head:o},0,i)}return this},t.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(t.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),t.prototype.toString=function(e){e===void 0&&(e=function(n){return String(n.key)});var r=[];return Ee(this._root,"",!0,function(n){return r.push(n)},e),r.join("")},t.prototype.update=function(e,r,n){var i=this._comparator,a=Lr(e,this._root,i),o=a.left,u=a.right;i(e,r)<0?u=he(r,n,u,i):o=he(r,n,o,i),this._root=bi(o,u,i)},t.prototype.split=function(e){return Lr(e,this._root,this._comparator)},t.prototype[Symbol.iterator]=function(){var e;return Mi(this,function(r){switch(r.label){case 0:e=this.minNode(),r.label=1;case 1:return e?[4,e]:[3,3];case 2:return r.sent(),e=this.next(e),[3,1];case 3:return[2]}})},t}();function Se(t,e,r,n){var i=n-r;if(i>0){var a=r+Math.floor(i/2),o=t[a],u=e[a],s=new j(o,u);return s.left=Se(t,e,r,a),s.right=Se(t,e,a+1,n),s}return null}function Li(t,e){for(var r=new j(null,null),n=r,i=0;i<t.length;i++)n=n.next=new j(t[i],e[i]);return n.next=null,r.next}function Oi(t){for(var e=t,r=[],n=!1,i=new j(null,null),a=i;!n;)e?(r.push(e),e=e.left):r.length>0?(e=a=a.next=r.pop(),e=e.right):n=!0;return a.next=null,i.next}function Pe(t,e,r){var n=r-e;if(n>0){var i=e+Math.floor(n/2),a=Pe(t,e,i),o=t.head;return o.left=a,t.head=t.head.next,o.right=Pe(t,i+1,r),o}return null}function Ii(t,e,r){for(var n=new j(null,null),i=n,a=t,o=e;a!==null&&o!==null;)r(a.key,o.key)<0?(i.next=a,a=a.next):(i.next=o,o=o.next),i=i.next;return a!==null?i.next=a:o!==null&&(i.next=o),n.next}function _e(t,e,r,n,i){if(!(r>=n)){for(var a=t[r+n>>1],o=r-1,u=n+1;;){do o++;while(i(t[o],a)<0);do u--;while(i(t[u],a)>0);if(o>=u)break;var s=t[o];t[o]=t[u],t[u]=s,s=e[o],e[o]=e[u],e[u]=s}_e(t,e,r,u,i),_e(t,e,u+1,n,i)}}var _0={};function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function T(t,e,r){return e&&Or(t.prototype,e),r&&Or(t,r),t}var xt=function(e,r){return e.ll.x<=r.x&&r.x<=e.ur.x&&e.ll.y<=r.y&&r.y<=e.ur.y},Me=function(e,r){if(r.ur.x<e.ll.x||e.ur.x<r.ll.x||r.ur.y<e.ll.y||e.ur.y<r.ll.y)return null;var n=e.ll.x<r.ll.x?r.ll.x:e.ll.x,i=e.ur.x<r.ur.x?e.ur.x:r.ur.x,a=e.ll.y<r.ll.y?r.ll.y:e.ll.y,o=e.ur.y<r.ur.y?e.ur.y:r.ur.y;return{ll:{x:n,y:a},ur:{x:i,y:o}}},H=Number.EPSILON;H===void 0&&(H=Math.pow(2,-52));var ki=H*H,Ae=function(e,r){if(-H<e&&e<H&&-H<r&&r<H)return 0;var n=e-r;return n*n<ki*e*r?0:e<r?-1:1},Ni=function(){function t(){B(this,t),this.reset()}return T(t,[{key:"reset",value:function(){this.xRounder=new Ir,this.yRounder=new Ir}},{key:"round",value:function(r,n){return{x:this.xRounder.round(r),y:this.yRounder.round(n)}}}]),t}(),Ir=function(){function t(){B(this,t),this.tree=new yr,this.round(0)}return T(t,[{key:"round",value:function(r){var n=this.tree.add(r),i=this.tree.prev(n);if(i!==null&&Ae(n.key,i.key)===0)return this.tree.remove(r),i.key;var a=this.tree.next(n);return a!==null&&Ae(n.key,a.key)===0?(this.tree.remove(r),a.key):r}}]),t}(),It=new Ni,wt=function(e,r){return e.x*r.y-e.y*r.x},M0=function(e,r){return e.x*r.x+e.y*r.y},kr=function(e,r,n){var i={x:r.x-e.x,y:r.y-e.y},a={x:n.x-e.x,y:n.y-e.y},o=wt(i,a);return Ae(o,0)},Qt=function(e){return Math.sqrt(M0(e,e))},Ri=function(e,r,n){var i={x:r.x-e.x,y:r.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return wt(a,i)/Qt(a)/Qt(i)},Ci=function(e,r,n){var i={x:r.x-e.x,y:r.y-e.y},a={x:n.x-e.x,y:n.y-e.y};return M0(a,i)/Qt(a)/Qt(i)},Nr=function(e,r,n){return r.y===0?null:{x:e.x+r.x/r.y*(n-e.y),y:n}},Rr=function(e,r,n){return r.x===0?null:{x:n,y:e.y+r.y/r.x*(n-e.x)}},Ti=function(e,r,n,i){if(r.x===0)return Rr(n,i,e.x);if(i.x===0)return Rr(e,r,n.x);if(r.y===0)return Nr(n,i,e.y);if(i.y===0)return Nr(e,r,n.y);var a=wt(r,i);if(a==0)return null;var o={x:n.x-e.x,y:n.y-e.y},u=wt(o,r)/a,s=wt(o,i)/a,l=e.x+s*r.x,h=n.x+u*i.x,c=e.y+s*r.y,f=n.y+u*i.y,v=(l+h)/2,p=(c+f)/2;return{x:v,y:p}},Q=function(){T(t,null,[{key:"compare",value:function(r,n){var i=t.comparePoints(r.point,n.point);return i!==0?i:(r.point!==n.point&&r.link(n),r.isLeft!==n.isLeft?r.isLeft?1:-1:Wt.compare(r.segment,n.segment))}},{key:"comparePoints",value:function(r,n){return r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0}}]);function t(e,r){B(this,t),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=r}return T(t,[{key:"link",value:function(r){if(r.point===this.point)throw new Error("Tried to link already linked events");for(var n=r.point.events,i=0,a=n.length;i<a;i++){var o=n[i];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var r=this.point.events.length,n=0;n<r;n++){var i=this.point.events[n];if(i.segment.consumedBy===void 0)for(var a=n+1;a<r;a++){var o=this.point.events[a];o.consumedBy===void 0&&i.otherSE.point.events===o.otherSE.point.events&&i.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var r=[],n=0,i=this.point.events.length;n<i;n++){var a=this.point.events[n];a!==this&&!a.segment.ringOut&&a.segment.isInResult()&&r.push(a)}return r}},{key:"getLeftmostComparator",value:function(r){var n=this,i=new Map,a=function(u){var s=u.otherSE;i.set(u,{sine:Ri(n.point,r.point,s.point),cosine:Ci(n.point,r.point,s.point)})};return function(o,u){i.has(o)||a(o),i.has(u)||a(u);var s=i.get(o),l=s.sine,h=s.cosine,c=i.get(u),f=c.sine,v=c.cosine;return l>=0&&f>=0?h<v?1:h>v?-1:0:l<0&&f<0?h<v?-1:h>v?1:0:f<l?-1:f>l?1:0}}}]),t}(),Fi=0,Wt=function(){T(t,null,[{key:"compare",value:function(r,n){var i=r.leftSE.point.x,a=n.leftSE.point.x,o=r.rightSE.point.x,u=n.rightSE.point.x;if(u<i)return 1;if(o<a)return-1;var s=r.leftSE.point.y,l=n.leftSE.point.y,h=r.rightSE.point.y,c=n.rightSE.point.y;if(i<a){if(l<s&&l<h)return 1;if(l>s&&l>h)return-1;var f=r.comparePoint(n.leftSE.point);if(f<0)return 1;if(f>0)return-1;var v=n.comparePoint(r.rightSE.point);return v!==0?v:-1}if(i>a){if(s<l&&s<c)return-1;if(s>l&&s>c)return 1;var p=n.comparePoint(r.leftSE.point);if(p!==0)return p;var g=r.comparePoint(n.rightSE.point);return g<0?1:g>0?-1:1}if(s<l)return-1;if(s>l)return 1;if(o<u){var y=n.comparePoint(r.rightSE.point);if(y!==0)return y}if(o>u){var d=r.comparePoint(n.rightSE.point);if(d<0)return 1;if(d>0)return-1}if(o!==u){var x=h-s,_=o-i,w=c-l,E=u-a;if(x>_&&w<E)return 1;if(x<_&&w>E)return-1}return o>u?1:o<u||h<c?-1:h>c?1:r.id<n.id?-1:r.id>n.id?1:0}}]);function t(e,r,n,i){B(this,t),this.id=++Fi,this.leftSE=e,e.segment=this,e.otherSE=r,this.rightSE=r,r.segment=this,r.otherSE=e,this.rings=n,this.windings=i}return T(t,[{key:"replaceRightSE",value:function(r){this.rightSE=r,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var r=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:r<n?r:n},ur:{x:this.rightSE.point.x,y:r>n?r:n}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(r){return r.x===this.leftSE.point.x&&r.y===this.leftSE.point.y||r.x===this.rightSE.point.x&&r.y===this.rightSE.point.y}},{key:"comparePoint",value:function(r){if(this.isAnEndpoint(r))return 0;var n=this.leftSE.point,i=this.rightSE.point,a=this.vector();if(n.x===i.x)return r.x===n.x?0:r.x<n.x?1:-1;var o=(r.y-n.y)/a.y,u=n.x+o*a.x;if(r.x===u)return 0;var s=(r.x-n.x)/a.x,l=n.y+s*a.y;return r.y===l?0:r.y<l?-1:1}},{key:"getIntersection",value:function(r){var n=this.bbox(),i=r.bbox(),a=Me(n,i);if(a===null)return null;var o=this.leftSE.point,u=this.rightSE.point,s=r.leftSE.point,l=r.rightSE.point,h=xt(n,s)&&this.comparePoint(s)===0,c=xt(i,o)&&r.comparePoint(o)===0,f=xt(n,l)&&this.comparePoint(l)===0,v=xt(i,u)&&r.comparePoint(u)===0;if(c&&h)return v&&!f?u:!v&&f?l:null;if(c)return f&&o.x===l.x&&o.y===l.y?null:o;if(h)return v&&u.x===s.x&&u.y===s.y?null:s;if(v&&f)return null;if(v)return u;if(f)return l;var p=Ti(o,this.vector(),s,r.vector());return p===null||!xt(a,p)?null:It.round(p.x,p.y)}},{key:"split",value:function(r){var n=[],i=r.events!==void 0,a=new Q(r,!0),o=new Q(r,!1),u=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(a);var s=new t(a,u,this.rings.slice(),this.windings.slice());return Q.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),Q.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),i&&(a.checkForConsuming(),o.checkForConsuming()),n}},{key:"swapEvents",value:function(){var r=this.rightSE;this.rightSE=this.leftSE,this.leftSE=r,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var n=0,i=this.windings.length;n<i;n++)this.windings[n]*=-1}},{key:"consume",value:function(r){for(var n=this,i=r;n.consumedBy;)n=n.consumedBy;for(;i.consumedBy;)i=i.consumedBy;var a=t.compare(n,i);if(a!==0){if(a>0){var o=n;n=i,i=o}if(n.prev===i){var u=n;n=i,i=u}for(var s=0,l=i.rings.length;s<l;s++){var h=i.rings[s],c=i.windings[s],f=n.rings.indexOf(h);f===-1?(n.rings.push(h),n.windings.push(c)):n.windings[f]+=c}i.rings=null,i.windings=null,i.consumedBy=n,i.leftSE.consumedBy=n.leftSE,i.rightSE.consumedBy=n.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var r=this.prev.consumedBy||this.prev;this._beforeState=r.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var r=this.beforeState();this._afterState={rings:r.rings.slice(0),windings:r.windings.slice(0),multiPolys:[]};for(var n=this._afterState.rings,i=this._afterState.windings,a=this._afterState.multiPolys,o=0,u=this.rings.length;o<u;o++){var s=this.rings[o],l=this.windings[o],h=n.indexOf(s);h===-1?(n.push(s),i.push(l)):i[h]+=l}for(var c=[],f=[],v=0,p=n.length;v<p;v++)if(i[v]!==0){var g=n[v],y=g.poly;if(f.indexOf(y)===-1)if(g.isExterior)c.push(y);else{f.indexOf(y)===-1&&f.push(y);var d=c.indexOf(g.poly);d!==-1&&c.splice(d,1)}}for(var x=0,_=c.length;x<_;x++){var w=c[x].multiPoly;a.indexOf(w)===-1&&a.push(w)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var r=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(J.type){case"union":{var i=r.length===0,a=n.length===0;this._isInResult=i!==a;break}case"intersection":{var o,u;r.length<n.length?(o=r.length,u=n.length):(o=n.length,u=r.length),this._isInResult=u===J.numMultiPolys&&o<u;break}case"xor":{var s=Math.abs(r.length-n.length);this._isInResult=s%2===1;break}case"difference":{var l=function(c){return c.length===1&&c[0].isSubject};this._isInResult=l(r)!==l(n);break}default:throw new Error("Unrecognized operation type found ".concat(J.type))}return this._isInResult}}],[{key:"fromRing",value:function(r,n,i){var a,o,u,s=Q.comparePoints(r,n);if(s<0)a=r,o=n,u=1;else if(s>0)a=n,o=r,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(r.x,", ").concat(r.y,"]"));var l=new Q(a,!0),h=new Q(o,!1);return new t(l,h,[i],[u])}}]),t}(),Cr=function(){function t(e,r,n){if(B(this,t),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=r,this.isExterior=n,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var i=It.round(e[0][0],e[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};for(var a=i,o=1,u=e.length;o<u;o++){if(typeof e[o][0]!="number"||typeof e[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var s=It.round(e[o][0],e[o][1]);s.x===a.x&&s.y===a.y||(this.segments.push(Wt.fromRing(a,s,this)),s.x<this.bbox.ll.x&&(this.bbox.ll.x=s.x),s.y<this.bbox.ll.y&&(this.bbox.ll.y=s.y),s.x>this.bbox.ur.x&&(this.bbox.ur.x=s.x),s.y>this.bbox.ur.y&&(this.bbox.ur.y=s.y),a=s)}(i.x!==a.x||i.y!==a.y)&&this.segments.push(Wt.fromRing(a,i,this))}return T(t,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,i=this.segments.length;n<i;n++){var a=this.segments[n];r.push(a.leftSE),r.push(a.rightSE)}return r}}]),t}(),qi=function(){function t(e,r){if(B(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Cr(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var n=1,i=e.length;n<i;n++){var a=new Cr(e[n],this,!1);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.interiorRings.push(a)}this.multiPoly=r}return T(t,[{key:"getSweepEvents",value:function(){for(var r=this.exteriorRing.getSweepEvents(),n=0,i=this.interiorRings.length;n<i;n++)for(var a=this.interiorRings[n].getSweepEvents(),o=0,u=a.length;o<u;o++)r.push(a[o]);return r}}]),t}(),Tr=function(){function t(e,r){if(B(this,t),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var n=0,i=e.length;n<i;n++){var a=new qi(e[n],this);a.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=a.bbox.ll.x),a.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=a.bbox.ll.y),a.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=a.bbox.ur.x),a.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=a.bbox.ur.y),this.polys.push(a)}this.isSubject=r}return T(t,[{key:"getSweepEvents",value:function(){for(var r=[],n=0,i=this.polys.length;n<i;n++)for(var a=this.polys[n].getSweepEvents(),o=0,u=a.length;o<u;o++)r.push(a[o]);return r}}]),t}(),Di=function(){T(t,null,[{key:"factory",value:function(r){for(var n=[],i=0,a=r.length;i<a;i++){var o=r[i];if(!(!o.isInResult()||o.ringOut)){for(var u=null,s=o.leftSE,l=o.rightSE,h=[s],c=s.point,f=[];u=s,s=l,h.push(s),s.point!==c;)for(;;){var v=s.getAvailableLinkedEvents();if(v.length===0){var p=h[0].point,g=h[h.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(v.length===1){l=v[0].otherSE;break}for(var y=null,d=0,x=f.length;d<x;d++)if(f[d].point===s.point){y=d;break}if(y!==null){var _=f.splice(y)[0],w=h.splice(_.index);w.unshift(w[0].otherSE),n.push(new t(w.reverse()));continue}f.push({index:h.length,point:s.point});var E=s.getLeftmostComparator(u);l=v.sort(E)[0].otherSE;break}n.push(new t(h))}}return n}}]);function t(e){B(this,t),this.events=e;for(var r=0,n=e.length;r<n;r++)e[r].segment.ringOut=this;this.poly=null}return T(t,[{key:"getGeom",value:function(){for(var r=this.events[0].point,n=[r],i=1,a=this.events.length-1;i<a;i++){var o=this.events[i].point,u=this.events[i+1].point;kr(o,r,u)!==0&&(n.push(o),r=o)}if(n.length===1)return null;var s=n[0],l=n[1];kr(s,r,l)===0&&n.shift(),n.push(n[0]);for(var h=this.isExteriorRing()?1:-1,c=this.isExteriorRing()?0:n.length-1,f=this.isExteriorRing()?n.length:-1,v=[],p=c;p!=f;p+=h)v.push([n[p].x,n[p].y]);return v}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var r=this.enclosingRing();this._isExteriorRing=r?!r.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var r=this.events[0],n=1,i=this.events.length;n<i;n++){var a=this.events[n];Q.compare(r,a)>0&&(r=a)}for(var o=r.segment.prevInResult(),u=o?o.prevInResult():null;;){if(!o)return null;if(!u)return o.ringOut;if(u.ringOut!==o.ringOut)return u.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=u.prevInResult(),u=o?o.prevInResult():null}}}]),t}(),Fr=function(){function t(e){B(this,t),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return T(t,[{key:"addInterior",value:function(r){this.interiorRings.push(r),r.poly=this}},{key:"getGeom",value:function(){var r=[this.exteriorRing.getGeom()];if(r[0]===null)return null;for(var n=0,i=this.interiorRings.length;n<i;n++){var a=this.interiorRings[n].getGeom();a!==null&&r.push(a)}return r}}]),t}(),Gi=function(){function t(e){B(this,t),this.rings=e,this.polys=this._composePolys(e)}return T(t,[{key:"getGeom",value:function(){for(var r=[],n=0,i=this.polys.length;n<i;n++){var a=this.polys[n].getGeom();a!==null&&r.push(a)}return r}},{key:"_composePolys",value:function(r){for(var n=[],i=0,a=r.length;i<a;i++){var o=r[i];if(!o.poly)if(o.isExteriorRing())n.push(new Fr(o));else{var u=o.enclosingRing();u.poly||n.push(new Fr(u)),u.poly.addInterior(o)}}return n}}]),t}(),Bi=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wt.compare;B(this,t),this.queue=e,this.tree=new yr(r),this.segments=[]}return T(t,[{key:"process",value:function(r){var n=r.segment,i=[];if(r.consumedBy)return r.isLeft?this.queue.remove(r.otherSE):this.tree.remove(n),i;var a=r.isLeft?this.tree.insert(n):this.tree.find(n);if(!a)throw new Error("Unable to find segment #".concat(n.id," ")+"[".concat(n.leftSE.point.x,", ").concat(n.leftSE.point.y,"] -> ")+"[".concat(n.rightSE.point.x,", ").concat(n.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=a,u=a,s=void 0,l=void 0;s===void 0;)o=this.tree.prev(o),o===null?s=null:o.key.consumedBy===void 0&&(s=o.key);for(;l===void 0;)u=this.tree.next(u),u===null?l=null:u.key.consumedBy===void 0&&(l=u.key);if(r.isLeft){var h=null;if(s){var c=s.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(h=c),!s.isAnEndpoint(c)))for(var f=this._splitSafely(s,c),v=0,p=f.length;v<p;v++)i.push(f[v])}var g=null;if(l){var y=l.getIntersection(n);if(y!==null&&(n.isAnEndpoint(y)||(g=y),!l.isAnEndpoint(y)))for(var d=this._splitSafely(l,y),x=0,_=d.length;x<_;x++)i.push(d[x])}if(h!==null||g!==null){var w=null;if(h===null)w=g;else if(g===null)w=h;else{var E=Q.comparePoints(h,g);w=E<=0?h:g}this.queue.remove(n.rightSE),i.push(n.rightSE);for(var M=n.split(w),b=0,k=M.length;b<k;b++)i.push(M[b])}i.length>0?(this.tree.remove(n),i.push(r)):(this.segments.push(n),n.prev=s)}else{if(s&&l){var L=s.getIntersection(l);if(L!==null){if(!s.isAnEndpoint(L))for(var O=this._splitSafely(s,L),it=0,ue=O.length;it<ue;it++)i.push(O[it]);if(!l.isAnEndpoint(L))for(var dt=this._splitSafely(l,L),mt=0,se=dt.length;mt<se;mt++)i.push(dt[mt])}}this.tree.remove(n)}return i}},{key:"_splitSafely",value:function(r,n){this.tree.remove(r);var i=r.rightSE;this.queue.remove(i);var a=r.split(n);return a.push(i),r.consumedBy===void 0&&this.tree.insert(r),a}}]),t}(),qr=typeof process<"u"&&_0.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,zi=typeof process<"u"&&_0.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,$i=function(){function t(){B(this,t)}return T(t,[{key:"run",value:function(r,n,i){J.type=r,It.reset();for(var a=[new Tr(n,!0)],o=0,u=i.length;o<u;o++)a.push(new Tr(i[o],!1));if(J.numMultiPolys=a.length,J.type==="difference")for(var s=a[0],l=1;l<a.length;)Me(a[l].bbox,s.bbox)!==null?l++:a.splice(l,1);if(J.type==="intersection"){for(var h=0,c=a.length;h<c;h++)for(var f=a[h],v=h+1,p=a.length;v<p;v++)if(Me(f.bbox,a[v].bbox)===null)return[]}for(var g=new yr(Q.compare),y=0,d=a.length;y<d;y++)for(var x=a[y].getSweepEvents(),_=0,w=x.length;_<w;_++)if(g.insert(x[_]),g.size>qr)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var E=new Bi(g),M=g.size,b=g.pop();b;){var k=b.key;if(g.size===M){var L=k.segment;throw new Error("Unable to pop() ".concat(k.isLeft?"left":"right"," SweepEvent ")+"[".concat(k.point.x,", ").concat(k.point.y,"] from segment #").concat(L.id," ")+"[".concat(L.leftSE.point.x,", ").concat(L.leftSE.point.y,"] -> ")+"[".concat(L.rightSE.point.x,", ").concat(L.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>qr)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(E.segments.length>zi)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var O=E.process(k),it=0,ue=O.length;it<ue;it++){var dt=O[it];dt.consumedBy===void 0&&g.insert(dt)}M=g.size,b=g.pop()}It.reset();var mt=Di.factory(E.segments),se=new Gi(mt);return se.getGeom()}}]),t}(),J=new $i,Vi=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return J.run("union",e,n)},Ji=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return J.run("intersection",e,n)},Yi=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return J.run("xor",e,n)},Xi=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return J.run("difference",e,n)},Ui={union:Vi,intersection:Ji,xor:Yi,difference:Xi};const Qi=Ui;function Wi(t,e,r){r===void 0&&(r={});var n=br(t),i=br(e),a=Qi.intersection(n.coordinates,i.coordinates);return a.length===0?null:a.length===1?Pi(a[0],r.properties):_i(a,r.properties)}function Zi(t,e){var r,n,i,a,o,u,s,l,h,c,f=0,v=t.type==="FeatureCollection",p=t.type==="Feature",g=v?t.features.length:1;for(r=0;r<g;r++){for(u=v?t.features[r].geometry:p?t.geometry:t,l=v?t.features[r].properties:p?t.properties:{},h=v?t.features[r].bbox:p?t.bbox:void 0,c=v?t.features[r].id:p?t.id:void 0,s=u?u.type==="GeometryCollection":!1,o=s?u.geometries.length:1,i=0;i<o;i++){if(a=s?u.geometries[i]:u,a===null){if(e(null,f,l,h,c)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,f,l,h,c)===!1)return!1;break}case"GeometryCollection":{for(n=0;n<a.geometries.length;n++)if(e(a.geometries[n],f,l,h,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}f++}}function Hi(t,e,r){var n=r;return Zi(t,function(i,a,o,u,s){a===0&&r===void 0?n=i:n=e(n,i,a,o,u,s)}),n}var Dr=6378137;function z(t){return Hi(t,function(e,r){return e+Ki(r)},0)}function Ki(t){var e=0,r;switch(t.type){case"Polygon":return Gr(t.coordinates);case"MultiPolygon":for(r=0;r<t.coordinates.length;r++)e+=Gr(t.coordinates[r]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Gr(t){var e=0;if(t&&t.length>0){e+=Math.abs(Br(t[0]));for(var r=1;r<t.length;r++)e-=Math.abs(Br(t[r]))}return e}function Br(t){var e,r,n,i,a,o,u,s=0,l=t.length;if(l>2){for(u=0;u<l;u++)u===l-2?(i=l-2,a=l-1,o=0):u===l-1?(i=l-1,a=0,o=1):(i=u,a=u+1,o=u+2),e=t[i],r=t[a],n=t[o],s+=(ce(n[0])-ce(e[0]))*Math.sin(ce(r[1]));s=s*Dr*Dr/2}return s}function ce(t){return t*Math.PI/180}function A0(t){for(var e=-1,r=t.length,n,i=t[r-1],a=0;++e<r;)n=i,i=t[e],a+=n[1]*i[0]-n[0]*i[1];return a/2}function ji(t){for(var e=-1,r=t.length,n=0,i=0,a,o=t[r-1],u,s=0;++e<r;)a=o,o=t[e],s+=u=a[0]*o[1]-o[0]*a[1],n+=(a[0]+o[0])*u,i+=(a[1]+o[1])*u;return s*=3,[n/s,i/s]}function t1(t){for(var e=-1,r=t.length,n=t[r-1],i,a,o=n[0],u=n[1],s=0;++e<r;)i=o,a=u,n=t[e],o=n[0],u=n[1],i-=o,a-=u,s+=Math.sqrt(i*i+a*a);return s}var Bt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},e1=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function r1(t){return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&e1.indexOf(t)>=0}function n1(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function i1(t){return(t|32)===97}function ft(t){return t>=48&&t<=57}function a1(t){return t>=48&&t<=57||t===43||t===45||t===46}function o1(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function zt(t){for(;t.index<t.max&&r1(t.path.charCodeAt(t.index));)t.index++}function u1(t){var e=t.path.charCodeAt(t.index);if(e===48){t.param=0,t.index++;return}if(e===49){t.param=1,t.index++;return}t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")"}function s1(t){var e=t.index,r=e,n=t.max,i=!1,a=!1,o=!1,u=!1,s;if(r>=n){t.err="SvgPath: missed param (at pos "+r+")";return}if(s=t.path.charCodeAt(r),(s===43||s===45)&&(r++,s=r<n?t.path.charCodeAt(r):0),!ft(s)&&s!==46){t.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")";return}if(s!==46){if(i=s===48,r++,s=r<n?t.path.charCodeAt(r):0,i&&r<n&&s&&ft(s)){t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")";return}for(;r<n&&ft(t.path.charCodeAt(r));)r++,a=!0;s=r<n?t.path.charCodeAt(r):0}if(s===46){for(u=!0,r++;ft(t.path.charCodeAt(r));)r++,o=!0;s=r<n?t.path.charCodeAt(r):0}if(s===101||s===69){if(u&&!a&&!o){t.err="SvgPath: invalid float exponent (at pos "+r+")";return}if(r++,s=r<n?t.path.charCodeAt(r):0,(s===43||s===45)&&r++,r<n&&ft(t.path.charCodeAt(r)))for(;r<n&&ft(t.path.charCodeAt(r));)r++;else{t.err="SvgPath: invalid float exponent (at pos "+r+")";return}}t.index=r,t.param=parseFloat(t.path.slice(e,r))+0}function ve(t){var e,r;e=t.path[t.segmentStart],r=e.toLowerCase();var n=t.data;if(r==="m"&&n.length>2&&(t.result.push([e,n[0],n[1]]),n=n.slice(2),r="l",e=e==="m"?"l":"L"),r==="r")t.result.push([e].concat(n));else for(;n.length>=Bt[r]&&(t.result.push([e].concat(n.splice(0,Bt[r]))),!!Bt[r]););}function l1(t){var e=t.max,r,n,i,a,o;if(t.segmentStart=t.index,r=t.path.charCodeAt(t.index),n=i1(r),!n1(r)){t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")";return}if(a=Bt[t.path[t.index].toLowerCase()],t.index++,zt(t),t.data=[],!a){ve(t);return}for(i=!1;;){for(o=a;o>0;o--){if(n&&(o===3||o===4)?u1(t):s1(t),t.err.length){ve(t);return}t.data.push(t.param),zt(t),i=!1,t.index<e&&t.path.charCodeAt(t.index)===44&&(t.index++,zt(t),i=!0)}if(!i&&(t.index>=t.max||!a1(t.path.charCodeAt(t.index))))break}ve(t)}var f1=function(e){var r=new o1(e),n=r.max;for(zt(r);r.index<n&&!r.err.length;)l1(r);return r.result.length&&("mM".indexOf(r.result[0][0])<0?(r.err="SvgPath: string should start with `M` or `m`",r.result=[]):r.result[0][0]="M"),{err:r.err,segments:r.result}};function h1(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}function X(){if(!(this instanceof X))return new X;this.queue=[],this.cache=null}X.prototype.matrix=function(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0?this:(this.cache=null,this.queue.push(t),this)};X.prototype.translate=function(t,e){return(t!==0||e!==0)&&(this.cache=null,this.queue.push([1,0,0,1,t,e])),this};X.prototype.scale=function(t,e){return(t!==1||e!==1)&&(this.cache=null,this.queue.push([t,0,0,e,0,0])),this};X.prototype.rotate=function(t,e,r){var n,i,a;return t!==0&&(this.translate(e,r),n=t*Math.PI/180,i=Math.cos(n),a=Math.sin(n),this.queue.push([i,a,-a,i,0,0]),this.cache=null,this.translate(-e,-r)),this};X.prototype.skewX=function(t){return t!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this};X.prototype.skewY=function(t){return t!==0&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this};X.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=h1(this.cache,this.queue[t]);return this.cache};X.prototype.calc=function(t,e,r){var n;return this.queue.length?(this.cache||(this.cache=this.toArray()),n=this.cache,[t*n[0]+e*n[2]+(r?0:n[4]),t*n[1]+e*n[3]+(r?0:n[5])]):[t,e]};var b0=X,c1=b0,v1={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},p1=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,g1=/[\s,]+/,y1=function(e){var r=new c1,n,i;return e.split(p1).forEach(function(a){if(a.length){if(typeof v1[a]<"u"){n=a;return}switch(i=a.split(g1).map(function(o){return+o||0}),n){case"matrix":i.length===6&&r.matrix(i);return;case"scale":i.length===1?r.scale(i[0],i[0]):i.length===2&&r.scale(i[0],i[1]);return;case"rotate":i.length===1?r.rotate(i[0],0,0):i.length===3&&r.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?r.translate(i[0],0):i.length===2&&r.translate(i[0],i[1]);return;case"skewX":i.length===1&&r.skewX(i[0]);return;case"skewY":i.length===1&&r.skewY(i[0]);return}}}),r},Et=Math.PI*2;function zr(t,e,r,n){var i=t*n-e*r<0?-1:1,a=t*r+e*n;return a>1&&(a=1),a<-1&&(a=-1),i*Math.acos(a)}function d1(t,e,r,n,i,a,o,u,s,l){var h=l*(t-r)/2+s*(e-n)/2,c=-s*(t-r)/2+l*(e-n)/2,f=o*o,v=u*u,p=h*h,g=c*c,y=f*v-f*g-v*p;y<0&&(y=0),y/=f*g+v*p,y=Math.sqrt(y)*(i===a?-1:1);var d=y*o/u*c,x=y*-u/o*h,_=l*d-s*x+(t+r)/2,w=s*d+l*x+(e+n)/2,E=(h-d)/o,M=(c-x)/u,b=(-h-d)/o,k=(-c-x)/u,L=zr(1,0,E,M),O=zr(E,M,b,k);return a===0&&O>0&&(O-=Et),a===1&&O<0&&(O+=Et),[_,w,L,O]}function m1(t,e){var r=1.3333333333333333*Math.tan(e/4),n=Math.cos(t),i=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[n,i,n-i*r,i+n*r,a+o*r,o-a*r,a,o]}var x1=function(e,r,n,i,a,o,u,s,l){var h=Math.sin(l*Et/360),c=Math.cos(l*Et/360),f=c*(e-n)/2+h*(r-i)/2,v=-h*(e-n)/2+c*(r-i)/2;if(f===0&&v===0)return[];if(u===0||s===0)return[];u=Math.abs(u),s=Math.abs(s);var p=f*f/(u*u)+v*v/(s*s);p>1&&(u*=Math.sqrt(p),s*=Math.sqrt(p));var g=d1(e,r,n,i,a,o,u,s,h,c),y=[],d=g[2],x=g[3],_=Math.max(Math.ceil(Math.abs(x)/(Et/4)),1);x/=_;for(var w=0;w<_;w++)y.push(m1(d,x)),d+=x;return y.map(function(E){for(var M=0;M<E.length;M+=2){var b=E[M+0],k=E[M+1];b*=u,k*=s;var L=c*b-h*k,O=h*b+c*k;E[M+0]=L+g[0],E[M+1]=O+g[1]}return E})},St=1e-10,$r=Math.PI/180;function kt(t,e,r){if(!(this instanceof kt))return new kt(t,e,r);this.rx=t,this.ry=e,this.ax=r}kt.prototype.transform=function(t){var e=Math.cos(this.ax*$r),r=Math.sin(this.ax*$r),n=[this.rx*(t[0]*e+t[2]*r),this.rx*(t[1]*e+t[3]*r),this.ry*(-t[0]*r+t[2]*e),this.ry*(-t[1]*r+t[3]*e)],i=n[0]*n[0]+n[2]*n[2],a=n[1]*n[1]+n[3]*n[3],o=((n[0]-n[3])*(n[0]-n[3])+(n[2]+n[1])*(n[2]+n[1]))*((n[0]+n[3])*(n[0]+n[3])+(n[2]-n[1])*(n[2]-n[1])),u=(i+a)/2;if(o<St*u)return this.rx=this.ry=Math.sqrt(u),this.ax=0,this;var s=n[0]*n[1]+n[2]*n[3];o=Math.sqrt(o);var l=u+o/2,h=u-o/2;return this.ax=Math.abs(s)<St&&Math.abs(l-a)<St?90:Math.atan(Math.abs(s)>Math.abs(l-a)?(l-i)/s:s/(l-a))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(l),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(l)),this};kt.prototype.isDegenerate=function(){return this.rx<St*this.ry||this.ry<St*this.rx};var w1=kt,E1=f1,S1=y1,nt=b0,P1=x1,_1=w1;function P(t){if(!(this instanceof P))return new P(t);var e=E1(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}P.from=function(t){if(typeof t=="string")return new P(t);if(t instanceof P){var e=new P("");return e.err=t.err,e.segments=t.segments.map(function(r){return r.slice()}),e.__stack=t.__stack.map(function(r){return nt().matrix(r.toArray())}),e}throw new Error("SvgPath.from: invalid param type "+t)};P.prototype.__matrix=function(t){var e=this,r;t.queue.length&&this.iterate(function(n,i,a,o){var u,s,l,h;switch(n[0]){case"v":u=t.calc(0,n[1],!0),s=u[0]===0?["v",u[1]]:["l",u[0],u[1]];break;case"V":u=t.calc(a,n[1],!1),s=u[0]===t.calc(a,o,!1)[0]?["V",u[1]]:["L",u[0],u[1]];break;case"h":u=t.calc(n[1],0,!0),s=u[1]===0?["h",u[0]]:["l",u[0],u[1]];break;case"H":u=t.calc(n[1],o,!1),s=u[1]===t.calc(a,o,!1)[1]?["H",u[0]]:["L",u[0],u[1]];break;case"a":case"A":var c=t.toArray(),f=_1(n[1],n[2],n[3]).transform(c);if(c[0]*c[3]-c[1]*c[2]<0&&(n[5]=n[5]?"0":"1"),u=t.calc(n[6],n[7],n[0]==="a"),n[0]==="A"&&n[6]===a&&n[7]===o||n[0]==="a"&&n[6]===0&&n[7]===0){s=[n[0]==="a"?"l":"L",u[0],u[1]];break}f.isDegenerate()?s=[n[0]==="a"?"l":"L",u[0],u[1]]:s=[n[0],f.rx,f.ry,f.ax,n[4],n[5],u[0],u[1]];break;case"m":h=i>0,u=t.calc(n[1],n[2],h),s=["m",u[0],u[1]];break;default:for(l=n[0],s=[l],h=l.toLowerCase()===l,r=1;r<n.length;r+=2)u=t.calc(n[r],n[r+1],h),s.push(u[0],u[1])}e.segments[i]=s},!0)};P.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(t=nt(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}};P.prototype.toString=function(){var t="",e="",r=!1;this.__evaluateStack();for(var n=0,i=this.segments.length;n<i;n++){var a=this.segments[n],o=a[0];o!==e||o==="m"||o==="M"?(o==="m"&&e==="z"&&(t+=" "),t+=o,r=!1):r=!0;for(var u=1;u<a.length;u++){var s=a[u];u===1?r&&s>=0&&(t+=" "):s>=0&&(t+=" "),t+=s}e=o}return t};P.prototype.translate=function(t,e){return this.__stack.push(nt().translate(t,e||0)),this};P.prototype.scale=function(t,e){return this.__stack.push(nt().scale(t,!e&&e!==0?t:e)),this};P.prototype.rotate=function(t,e,r){return this.__stack.push(nt().rotate(t,e||0,r||0)),this};P.prototype.skewX=function(t){return this.__stack.push(nt().skewX(t)),this};P.prototype.skewY=function(t){return this.__stack.push(nt().skewY(t)),this};P.prototype.matrix=function(t){return this.__stack.push(nt().matrix(t)),this};P.prototype.transform=function(t){return t.trim()?(this.__stack.push(S1(t)),this):this};P.prototype.round=function(t){var e=0,r=0,n=0,i=0,a;return t=t||0,this.__evaluateStack(),this.segments.forEach(function(o){var u=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":u&&(o[1]+=n),n=o[1]-o[1].toFixed(t),o[1]=+o[1].toFixed(t);return;case"V":case"v":u&&(o[1]+=i),i=o[1]-o[1].toFixed(t),o[1]=+o[1].toFixed(t);return;case"Z":case"z":n=e,i=r;return;case"M":case"m":u&&(o[1]+=n,o[2]+=i),n=o[1]-o[1].toFixed(t),i=o[2]-o[2].toFixed(t),e=n,r=i,o[1]=+o[1].toFixed(t),o[2]=+o[2].toFixed(t);return;case"A":case"a":u&&(o[6]+=n,o[7]+=i),n=o[6]-o[6].toFixed(t),i=o[7]-o[7].toFixed(t),o[1]=+o[1].toFixed(t),o[2]=+o[2].toFixed(t),o[3]=+o[3].toFixed(t+2),o[6]=+o[6].toFixed(t),o[7]=+o[7].toFixed(t);return;default:a=o.length,u&&(o[a-2]+=n,o[a-1]+=i),n=o[a-2]-o[a-2].toFixed(t),i=o[a-1]-o[a-1].toFixed(t),o.forEach(function(s,l){l&&(o[l]=+o[l].toFixed(t))});return}}),this};P.prototype.iterate=function(t,e){var r=this.segments,n={},i=!1,a=0,o=0,u=0,s=0,l,h,c;if(e||this.__evaluateStack(),r.forEach(function(f,v){var p=t(f,v,a,o);Array.isArray(p)&&(n[v]=p,i=!0);var g=f[0]===f[0].toLowerCase();switch(f[0]){case"m":case"M":a=f[1]+(g?a:0),o=f[2]+(g?o:0),u=a,s=o;return;case"h":case"H":a=f[1]+(g?a:0);return;case"v":case"V":o=f[1]+(g?o:0);return;case"z":case"Z":a=u,o=s;return;default:a=f[f.length-2]+(g?a:0),o=f[f.length-1]+(g?o:0)}}),!i)return this;for(c=[],l=0;l<r.length;l++)if(typeof n[l]<"u")for(h=0;h<n[l].length;h++)c.push(n[l][h]);else c.push(r[l]);return this.segments=c,this};P.prototype.abs=function(){return this.iterate(function(t,e,r,n){var i=t[0],a=i.toUpperCase(),o;if(i!==a)switch(t[0]=a,i){case"v":t[1]+=n;return;case"a":t[6]+=r,t[7]+=n;return;default:for(o=1;o<t.length;o++)t[o]+=o%2?r:n}},!0),this};P.prototype.rel=function(){return this.iterate(function(t,e,r,n){var i=t[0],a=i.toLowerCase(),o;if(i!==a&&!(e===0&&i==="M"))switch(t[0]=a,i){case"V":t[1]-=n;return;case"A":t[6]-=r,t[7]-=n;return;default:for(o=1;o<t.length;o++)t[o]-=o%2?r:n}},!0),this};P.prototype.unarc=function(){return this.iterate(function(t,e,r,n){var i,a,o,u=[],s=t[0];return s!=="A"&&s!=="a"?null:(s==="a"?(a=r+t[6],o=n+t[7]):(a=t[6],o=t[7]),i=P1(r,n,a,o,t[4],t[5],t[1],t[2],t[3]),i.length===0?[[t[0]==="a"?"l":"L",t[6],t[7]]]:(i.forEach(function(l){u.push(["C",l[2],l[3],l[4],l[5],l[6],l[7]])}),u))}),this};P.prototype.unshort=function(){var t=this.segments,e,r,n,i,a;return this.iterate(function(o,u,s,l){var h=o[0],c=h.toUpperCase(),f;u&&(c==="T"?(f=h==="t",n=t[u-1],n[0]==="Q"?(e=n[1]-s,r=n[2]-l):n[0]==="q"?(e=n[1]-n[3],r=n[2]-n[4]):(e=0,r=0),i=-e,a=-r,f||(i+=s,a+=l),t[u]=[f?"q":"Q",i,a,o[1],o[2]]):c==="S"&&(f=h==="s",n=t[u-1],n[0]==="C"?(e=n[3]-s,r=n[4]-l):n[0]==="c"?(e=n[3]-n[5],r=n[4]-n[6]):(e=0,r=0),i=-e,a=-r,f||(i+=s,a+=l),t[u]=[f?"c":"C",i,a,o[1],o[2],o[3],o[4]]))}),this};var M1=P,A1=M1;const b1=G0(A1);var pe={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},L1=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function O1(t){var e=[];return t.replace(L1,function(r,n,i){var a=n.toLowerCase();for(i=k1(i),a==="m"&&i.length>2&&(e.push([n].concat(i.splice(0,2))),a="l",n=n==="m"?"l":"L");i.length>=0;){if(i.length===pe[a])return i.unshift(n),e.push(i);if(i.length<pe[a])throw new Error("malformed path data");e.push([n].concat(i.splice(0,pe[a])))}}),e}var I1=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function k1(t){var e=t.match(I1);return e?e.map(Number):[]}function V(t,e,r,n,i,a,o,u){return new be(t,e,r,n,i,a,o,u)}function be(t,e,r,n,i,a,o,u){this.a={x:t,y:e},this.b={x:r,y:n},this.c={x:i,y:a},this.d={x:o,y:u},o!=null&&u!==null&&u!==void 0?(this.getArcLength=z1,this.getPoint=C1,this.getDerivative=R1):(this.getArcLength=T1,this.getPoint=L0,this.getDerivative=N1),this.init()}be.prototype={constructor:be,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=ge(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=ge(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),n=Math.sqrt(r.x*r.x+r.y*r.y),i;return n>0?i={x:r.x/n,y:r.y/n}:i={x:0,y:0},i},getPropertiesAtLength:function(t){var e=ge(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),r=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),n=Math.sqrt(r.x*r.x+r.y*r.y),i;n>0?i={x:r.x/n,y:r.y/n}:i={x:0,y:0};var a=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e);return{x:a.x,y:a.y,tangentX:i.x,tangentY:i.y}}};function N1(t,e,r){return{x:(1-r)*2*(t[1]-t[0])+r*2*(t[2]-t[1]),y:(1-r)*2*(e[1]-e[0])+r*2*(e[2]-e[1])}}function R1(t,e,r){var n=L0([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],r);return n}function ge(t,e,r,n,i){for(var a=1,o=t/e,u=(t-r(n,i,o))/e;a>.001;){var s=r(n,i,o+u),l=r(n,i,o-u),h=Math.abs(t-s)/e,c=Math.abs(t-l)/e;h<a?(a=h,o+=u):c<a?(a=c,o-=u):u/=2}return o}function L0(t,e,r){var n=(1-r)*(1-r)*t[0]+2*(1-r)*r*t[1]+r*r*t[2],i=(1-r)*(1-r)*e[0]+2*(1-r)*r*e[1]+r*r*e[2];return{x:n,y:i}}function C1(t,e,r){var n=(1-r)*(1-r)*(1-r)*t[0]+3*(1-r)*(1-r)*r*t[1]+3*(1-r)*r*r*t[2]+r*r*r*t[3],i=(1-r)*(1-r)*(1-r)*e[0]+3*(1-r)*(1-r)*r*e[1]+3*(1-r)*r*r*e[2]+r*r*r*e[3];return{x:n,y:i}}function T1(t,e,r){r===void 0&&(r=1);var n=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],a=2*t[1]-2*t[0],o=2*e[1]-2*e[0],u=4*(n*n+i*i),s=4*(n*a+i*o),l=a*a+o*o;if(u===0)return r*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var h=s/(2*u),c=l/u,f=r+h,v=c-h*h;return Math.sqrt(u)/2*(f*Math.sqrt(f*f+v)-h*Math.sqrt(h*h+v)+v*Math.log(Math.abs((f+Math.sqrt(f*f+v))/(h+Math.sqrt(h*h+v)))))}var F1=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],q1=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],D1=[[1],[1,1],[1,2,1],[1,3,3,1]];function G1(t,e){return D1[t][e]}function Le(t,e,r){var n=r.length-1,i,a,o;if(n===0)return 0;if(t===0){for(a=0,o=0;o<=n;o++)a+=G1(n,o)*Math.pow(1-e,n-o)*Math.pow(e,o)*r[o];return a}else{for(i=new Array(n),o=0;o<n;o++)i[o]=n*(r[o+1]-r[o]);return Le(t-1,e,i)}}function B1(t,e,r){var n=Le(1,r,t),i=Le(1,r,e),a=n*n+i*i;return Math.sqrt(a)}function z1(t,e,r){var n,i,a,o;r===void 0&&(r=1);var u=20;for(n=r/2,i=0,a=0;a<u;a++)o=n*F1[u][a]+n,i+=q1[u][a]*B1(t,e,o);return n*i}var Pt=Math.PI*2;function Vr(t,e,r,n){var i=t*n-e*r<0?-1:1,a=t*r+e*n;return a>1&&(a=1),a<-1&&(a=-1),i*Math.acos(a)}function $1(t,e,r,n,i,a,o,u,s,l){var h=l*(t-r)/2+s*(e-n)/2,c=-s*(t-r)/2+l*(e-n)/2,f=o*o,v=u*u,p=h*h,g=c*c,y=f*v-f*g-v*p;y<0&&(y=0),y/=f*g+v*p,y=Math.sqrt(y)*(i===a?-1:1);var d=y*o/u*c,x=y*-u/o*h,_=l*d-s*x+(t+r)/2,w=s*d+l*x+(e+n)/2,E=(h-d)/o,M=(c-x)/u,b=(-h-d)/o,k=(-c-x)/u,L=Vr(1,0,E,M),O=Vr(E,M,b,k);return a===0&&O>0&&(O-=Pt),a===1&&O<0&&(O+=Pt),[_,w,L,O]}function V1(t,e){var r=1.3333333333333333*Math.tan(e/4),n=Math.cos(t),i=Math.sin(t),a=Math.cos(t+e),o=Math.sin(t+e);return[n,i,n-i*r,i+n*r,a+o*r,o-a*r,a,o]}function J1(t,e,r,n,i,a,o,u,s){var l=Math.sin(i*Pt/360),h=Math.cos(i*Pt/360),c=h*(t-u)/2+l*(e-s)/2,f=-l*(t-u)/2+h*(e-s)/2;if(c===0&&f===0)return[];if(r===0||n===0)return[];r=Math.abs(r),n=Math.abs(n);var v=c*c/(r*r)+f*f/(n*n);v>1&&(r*=Math.sqrt(v),n*=Math.sqrt(v));var p=$1(t,e,u,s,a,o,r,n,l,h),g=[],y=p[2],d=p[3],x=Math.max(Math.ceil(Math.abs(d)/(Pt/4)),1);d/=x;for(var _=0;_<x;_++)g.push(V1(y,d)),y+=d;return g.map(function(w){for(var E=0;E<w.length;E+=2){var M=w[E+0],b=w[E+1];M*=r,b*=n;var k=h*M-l*b,L=l*M+h*b;w[E+0]=k+p[0],w[E+1]=L+p[1]}return w})}function Jr(t,e,r,n,i,a,o,u,s){return new Oe(t,e,r,n,i,a,o,u,s)}function Oe(t,e,r,n,i,a,o,u,s){var l=0,h=[],c=[],f=J1(t,e,r,n,i,a,o,u,s);f.forEach(function(v){var p=new V(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7]),g=p.getTotalLength();l+=g,h.push(g),c.push(p)}),this.length=l,this.partialLengths=h,this.curves=c}Oe.prototype={constructor:Oe,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,n=0;n<e;n++)r+=this.partialLengths[n];return this.curves[e].getPointAtLength(t-r)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var r=0,n=0;n<e;n++)r+=this.partialLengths[n];return this.curves[e].getTangentAtLength(t-r)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),r=this.getPointAtLength(t);return{x:r.x,y:r.y,tangentX:e.x,tangentY:e.y}}};function $(t,e,r,n){return new Ft(t,e,r,n)}function Ft(t,e,r,n){this.x0=t,this.x1=e,this.y0=r,this.y1=n}Ft.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))};Ft.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),r=(this.x1-this.x0)*e,n=(this.y1-this.y0)*e;return{x:this.x0+r,y:this.y0+n}};Ft.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}};Ft.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),r=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:r.x,tangentY:r.y}};function Y1(t){var e=0,r=[],n=[];function i(o){if(!o)return null;for(var u=O1(o),s=[0,0],l=[0,0],h,c,f=0;f<u.length;f++)u[f][0]==="M"?(s=[u[f][1],u[f][2]],c=[s[0],s[1]],n.push(null)):u[f][0]==="m"?(s=[u[f][1]+s[0],u[f][2]+s[1]],c=[s[0],s[1]],n.push(null)):u[f][0]==="L"?(e=e+Math.sqrt(Math.pow(s[0]-u[f][1],2)+Math.pow(s[1]-u[f][2],2)),n.push(new $(s[0],u[f][1],s[1],u[f][2])),s=[u[f][1],u[f][2]]):u[f][0]==="l"?(e=e+Math.sqrt(Math.pow(u[f][1],2)+Math.pow(u[f][2],2)),n.push(new $(s[0],u[f][1]+s[0],s[1],u[f][2]+s[1])),s=[u[f][1]+s[0],u[f][2]+s[1]]):u[f][0]==="H"?(e=e+Math.abs(s[0]-u[f][1]),n.push(new $(s[0],u[f][1],s[1],s[1])),s[0]=u[f][1]):u[f][0]==="h"?(e=e+Math.abs(u[f][1]),n.push(new $(s[0],s[0]+u[f][1],s[1],s[1])),s[0]=u[f][1]+s[0]):u[f][0]==="V"?(e=e+Math.abs(s[1]-u[f][1]),n.push(new $(s[0],s[0],s[1],u[f][1])),s[1]=u[f][1]):u[f][0]==="v"?(e=e+Math.abs(u[f][1]),n.push(new $(s[0],s[0],s[1],s[1]+u[f][1])),s[1]=u[f][1]+s[1]):u[f][0]==="z"||u[f][0]==="Z"?(e=e+Math.sqrt(Math.pow(c[0]-s[0],2)+Math.pow(c[1]-s[1],2)),n.push(new $(s[0],c[0],s[1],c[1])),s=[c[0],c[1]]):u[f][0]==="C"?(h=new V(s[0],s[1],u[f][1],u[f][2],u[f][3],u[f][4],u[f][5],u[f][6]),e=e+h.getTotalLength(),s=[u[f][5],u[f][6]],n.push(h)):u[f][0]==="c"?(h=new V(s[0],s[1],s[0]+u[f][1],s[1]+u[f][2],s[0]+u[f][3],s[1]+u[f][4],s[0]+u[f][5],s[1]+u[f][6]),e=e+h.getTotalLength(),s=[u[f][5]+s[0],u[f][6]+s[1]],n.push(h)):u[f][0]==="S"?(f>0&&["C","c","S","s"].indexOf(u[f-1][0])>-1?h=new V(s[0],s[1],2*s[0]-u[f-1][u[f-1].length-4],2*s[1]-u[f-1][u[f-1].length-3],u[f][1],u[f][2],u[f][3],u[f][4]):h=new V(s[0],s[1],s[0],s[1],u[f][1],u[f][2],u[f][3],u[f][4]),e=e+h.getTotalLength(),s=[u[f][3],u[f][4]],n.push(h)):u[f][0]==="s"?(f>0&&["C","c","S","s"].indexOf(u[f-1][0])>-1?h=new V(s[0],s[1],s[0]+h.d.x-h.c.x,s[1]+h.d.y-h.c.y,s[0]+u[f][1],s[1]+u[f][2],s[0]+u[f][3],s[1]+u[f][4]):h=new V(s[0],s[1],s[0],s[1],s[0]+u[f][1],s[1]+u[f][2],s[0]+u[f][3],s[1]+u[f][4]),e=e+h.getTotalLength(),s=[u[f][3]+s[0],u[f][4]+s[1]],n.push(h)):u[f][0]==="Q"?(s[0]!=u[f][1]&&s[1]!=u[f][2]?h=new V(s[0],s[1],u[f][1],u[f][2],u[f][3],u[f][4]):h=new $(u[f][1],u[f][3],u[f][2],u[f][4]),e=e+h.getTotalLength(),n.push(h),s=[u[f][3],u[f][4]],l=[u[f][1],u[f][2]]):u[f][0]==="q"?(u[f][1]==0&&u[f][2]==0?h=new $(s[0]+u[f][1],s[0]+u[f][3],s[1]+u[f][2],s[1]+u[f][4]):h=new V(s[0],s[1],s[0]+u[f][1],s[1]+u[f][2],s[0]+u[f][3],s[1]+u[f][4]),e=e+h.getTotalLength(),l=[s[0]+u[f][1],s[1]+u[f][2]],s=[u[f][3]+s[0],u[f][4]+s[1]],n.push(h)):u[f][0]==="T"?(f>0&&["Q","q","T","t"].indexOf(u[f-1][0])>-1?h=new V(s[0],s[1],2*s[0]-l[0],2*s[1]-l[1],u[f][1],u[f][2]):h=new $(s[0],u[f][1],s[1],u[f][2]),n.push(h),e=e+h.getTotalLength(),l=[2*s[0]-l[0],2*s[1]-l[1]],s=[u[f][1],u[f][2]]):u[f][0]==="t"?(f>0&&["Q","q","T","t"].indexOf(u[f-1][0])>-1?h=new V(s[0],s[1],2*s[0]-l[0],2*s[1]-l[1],s[0]+u[f][1],s[1]+u[f][2]):h=new $(s[0],s[0]+u[f][1],s[1],s[1]+u[f][2]),e=e+h.getTotalLength(),l=[2*s[0]-l[0],2*s[1]-l[1]],s=[u[f][1]+s[0],u[f][2]+s[0]],n.push(h)):u[f][0]==="A"?(h=new Jr(s[0],s[1],u[f][1],u[f][2],u[f][3],u[f][4],u[f][5],u[f][6],u[f][7]),e=e+h.getTotalLength(),s=[u[f][6],u[f][7]],n.push(h)):u[f][0]==="a"&&(h=new Jr(s[0],s[1],u[f][1],u[f][2],u[f][3],u[f][4],u[f][5],s[0]+u[f][6],s[1]+u[f][7]),e=e+h.getTotalLength(),s=[s[0]+u[f][6],s[1]+u[f][7]],n.push(h)),r.push(e);return i}i.getTotalLength=function(){return e},i.getPointAtLength=function(o){var u=a(o);return n[u.i].getPointAtLength(u.fraction)},i.getTangentAtLength=function(o){var u=a(o);return n[u.i].getTangentAtLength(u.fraction)},i.getPropertiesAtLength=function(o){var u=a(o);return n[u.i].getPropertiesAtLength(u.fraction)};var a=function(o){o<0?o=0:o>e&&(o=e);for(var u=r.length-1;r[u]>=o&&r[u]>0;)u--;return u++,{fraction:o-r[u-1],i:u}};return i(t)}function qt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function O0(t,e,r){return[t[0]+(e[0]-t[0])*r,t[1]+(e[1]-t[1])*r]}function X1(t,e){return qt(t,e)<1e-9}function U1(t,e,r){let n=t.map((i,a)=>Q1(i,e[a]));return function(i){let a=n.map(o=>o(i));return r?j1(a):a}}function Q1(t,e){return function(r){return t.map((n,i)=>n+r*(e[i]-n))}}function Zt(t){return typeof t=="number"&&isFinite(t)}function Yr(t){return W1(t)?ji(t):[(t[0][0]+t[t.length-1][0])/2,(t[0][1]+t[t.length-1][1])/2]}function W1(t){for(let e=0;e<t.length-2;e++){let r=t[e],n=t[e+1],i=t[e+2];if(r[0]*(n[1]-i[1])+n[0]*(i[1]-r[1])+i[0]*(r[1]-n[1]))return!0}return!1}const Ie=`All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).
Example valid ways of supplying a shape would be:
[[0, 0], [10, 0], [10, 10]]
"M0,0 L10,0 L10,10Z"
`,Z1="flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).";function H1(t){return new b1(t).abs()}function K1(t){return t.toString().split("M").map((e,r)=>(e=e.trim(),r&&e?"M"+e:e)).filter(e=>e)}function j1(t){return"M"+t.join("L")+"Z"}function ta(t,e){let r=H1(t);return ea(r)||ra(r,e)}function ea(t){let e=t.segments||[],r=[];if(!e.length||e[0][0]!=="M")return!1;for(let n=0;n<e.length;n++){let[i,a,o]=e[n];if(i==="M"&&n||i==="Z")break;if(i==="M"||i==="L")r.push([a,o]);else if(i==="H")r.push([a,r[r.length-1][1]]);else if(i==="V")r.push([r[r.length-1][0],a]);else return!1}return r.length?{ring:r}:!1}function ra(t,e){let r=K1(t)[0],n=[],i,a,o=3;if(!r)throw new TypeError(Ie);a=na(r),i=a.getTotalLength(),e&&Zt(e)&&e>0&&(o=Math.max(o,Math.ceil(i/e)));for(let u=0;u<o;u++){let s=a.getPointAtLength(i*u/o);n.push([s.x,s.y])}return{ring:n,skipBisect:!0}}function na(t){if(typeof window<"u"&&window&&window.document)try{let e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch{}return Y1(t)}function ke(t,e){const r=t.length+e,n=t1(t)/e;let i=0,a=0,o=n/2;for(;t.length<r;){let u=t[i],s=t[(i+1)%t.length],l=qt(u,s);if(o<=a+l){t.splice(i+1,0,l?O0(u,s,(o-a)/l):u.slice(0)),o+=n;continue}a+=l,i++}}function ia(t,e=1/0){for(let r=0;r<t.length;r++){let n=t[r],i=r===t.length-1?t[0]:t[r+1];for(;qt(n,i)>e;)i=O0(n,i,.5),t.splice(r+1,0,i)}}function Nt(t,e){let r,n,i;if(typeof t=="string"){let a=ta(t,e);t=a.ring,i=a.skipBisect}else if(!Array.isArray(t))throw new TypeError(Ie);if(r=t.slice(0),!aa(r))throw new TypeError(Ie);return r.length>1&&X1(r[0],r[r.length-1])&&r.pop(),n=A0(r),n>0&&r.reverse(),!i&&e&&Zt(e)&&e>0&&ia(r,e),r}function aa(t){return t.every(function(e){return Array.isArray(e)&&e.length>=2&&Zt(e[0])&&Zt(e[1])})}function oa(t,e){let r=t.length,n=1/0,i,a,o;for(let u=0;u<r;u++)a=0,e.forEach(function(s,l){let h=qt(t[(u+l)%r],s);a+=h*h}),a<n&&(n=a,i=u);i&&(o=t.splice(0,i),t.splice(t.length,0,...o))}function ua(t,e,{maxSegmentLength:r=10,string:n=!0}={}){let i=Nt(t,r),a=Nt(e,r),o=I0(i,a,n);return!n||typeof t!="string"&&typeof e!="string"?o:u=>u<1e-4&&typeof t=="string"?t:1-u<1e-4&&typeof e=="string"?e:o(u)}function I0(t,e,r){let n;return n=t.length-e.length,ke(t,n<0?n*-1:0),ke(e,n>0?n:0),oa(t,e),U1(t,e,r)}function sa(t){return t}function la(t){if(t==null)return sa;var e,r,n=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(u,s){s||(e=r=0);var l=2,h=u.length,c=new Array(h);for(c[0]=(e+=u[0])*n+a,c[1]=(r+=u[1])*i+o;l<h;)c[l]=u[l],++l;return c}}function fa(t,e){for(var r,n=t.length,i=n-e;i<--n;)r=t[i],t[i++]=t[n],t[n]=r}function ha(t,e){return typeof e=="string"&&(e=t.objects[e]),e.type==="GeometryCollection"?{type:"FeatureCollection",features:e.geometries.map(function(r){return Xr(t,r)})}:Xr(t,e)}function Xr(t,e){var r=e.id,n=e.bbox,i=e.properties==null?{}:e.properties,a=k0(t,e);return r==null&&n==null?{type:"Feature",properties:i,geometry:a}:n==null?{type:"Feature",id:r,properties:i,geometry:a}:{type:"Feature",id:r,bbox:n,properties:i,geometry:a}}function k0(t,e){var r=la(t.transform),n=t.arcs;function i(h,c){c.length&&c.pop();for(var f=n[h<0?~h:h],v=0,p=f.length;v<p;++v)c.push(r(f[v],v));h<0&&fa(c,p)}function a(h){return r(h)}function o(h){for(var c=[],f=0,v=h.length;f<v;++f)i(h[f],c);return c.length<2&&c.push(c[0]),c}function u(h){for(var c=o(h);c.length<4;)c.push(c[0]);return c}function s(h){return h.map(u)}function l(h){var c=h.type,f;switch(c){case"GeometryCollection":return{type:c,geometries:h.geometries.map(l)};case"Point":f=a(h.coordinates);break;case"MultiPoint":f=h.coordinates.map(a);break;case"LineString":f=o(h.arcs);break;case"MultiLineString":f=h.arcs.map(o);break;case"Polygon":f=s(h.arcs);break;case"MultiPolygon":f=h.arcs.map(s);break;default:return null}return{type:c,coordinates:f}}return l(e)}function ca(t,e){var r={},n={},i={},a=[],o=-1;e.forEach(function(l,h){var c=t.arcs[l<0?~l:l],f;c.length<3&&!c[1][0]&&!c[1][1]&&(f=e[++o],e[o]=l,e[h]=f)}),e.forEach(function(l){var h=u(l),c=h[0],f=h[1],v,p;if(v=i[c])if(delete i[v.end],v.push(l),v.end=f,p=n[f]){delete n[p.start];var g=p===v?v:v.concat(p);n[g.start=v.start]=i[g.end=p.end]=g}else n[v.start]=i[v.end]=v;else if(v=n[f])if(delete n[v.start],v.unshift(l),v.start=c,p=i[c]){delete i[p.end];var y=p===v?v:p.concat(v);n[y.start=p.start]=i[y.end=v.end]=y}else n[v.start]=i[v.end]=v;else v=[l],n[v.start=c]=i[v.end=f]=v});function u(l){var h=t.arcs[l<0?~l:l],c=h[0],f;return t.transform?(f=[0,0],h.forEach(function(v){f[0]+=v[0],f[1]+=v[1]})):f=h[h.length-1],l<0?[f,c]:[c,f]}function s(l,h){for(var c in l){var f=l[c];delete h[f.start],delete f.start,delete f.end,f.forEach(function(v){r[v<0?~v:v]=1}),a.push(f)}}return s(i,n),s(n,i),e.forEach(function(l){r[l<0?~l:l]||a.push([l])}),a}function va(t){for(var e=-1,r=t.length,n,i=t[r-1],a=0;++e<r;)n=i,i=t[e],a+=n[0]*i[1]-n[1]*i[0];return Math.abs(a)}function pa(t,e){var r={},n=[],i=[];e.forEach(a);function a(s){switch(s.type){case"GeometryCollection":s.geometries.forEach(a);break;case"Polygon":o(s.arcs);break;case"MultiPolygon":s.arcs.forEach(o);break}}function o(s){s.forEach(function(l){l.forEach(function(h){(r[h=h<0?~h:h]||(r[h]=[])).push(s)})}),n.push(s)}function u(s){return va(k0(t,{type:"Polygon",arcs:[s]}).coordinates[0])}return n.forEach(function(s){if(!s._){var l=[],h=[s];for(s._=1,i.push(l);s=h.pop();)l.push(s),s.forEach(function(c){c.forEach(function(f){r[f<0?~f:f].forEach(function(v){v._||(v._=1,h.push(v))})})})}}),n.forEach(function(s){delete s._}),{type:"MultiPolygon",arcs:i.map(function(s){var l=[],h;if(s.forEach(function(g){g.forEach(function(y){y.forEach(function(d){r[d<0?~d:d].length<2&&l.push(d)})})}),l=ca(t,l),(h=l.length)>1)for(var c=1,f=u(l[0]),v,p;c<h;++c)(v=u(l[c]))>f&&(p=l[0],l[0]=l[c],l[c]=p,f=v);return l}).filter(function(s){return s.length>0})}}function Ur(t,e){for(var r=0,n=t.length;r<n;){var i=r+n>>>1;t[i]<e?r=i+1:n=i}return r}function ga(t){var e={},r=t.map(function(){return[]});function n(g,y){g.forEach(function(d){d<0&&(d=~d);var x=e[d];x?x.push(y):e[d]=[y]})}function i(g,y){g.forEach(function(d){n(d,y)})}function a(g,y){g.type==="GeometryCollection"?g.geometries.forEach(function(d){a(d,y)}):g.type in o&&o[g.type](g.arcs,y)}var o={LineString:n,MultiLineString:i,Polygon:i,MultiPolygon:function(g,y){g.forEach(function(d){i(d,y)})}};t.forEach(a);for(var u in e)for(var s=e[u],l=s.length,h=0;h<l;++h)for(var c=h+1;c<l;++c){var f=s[h],v=s[c],p;(p=r[f])[u=Ur(p,v)]!==v&&p.splice(u,0,v),(p=r[v])[u=Ur(p,f)]!==f&&p.splice(u,0,f)}return r}function N0(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function R0(t){return t.length===1&&(t=ya(t)),{left:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var a=n+i>>>1;t(e[a],r)<0?n=a+1:i=a}return n},right:function(e,r,n,i){for(n==null&&(n=0),i==null&&(i=e.length);n<i;){var a=n+i>>>1;t(e[a],r)>0?i=a:n=a+1}return n}}}function ya(t){return function(e,r){return N0(t(e),r)}}R0(N0);function da(t,e){const r={},n={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return t.forEach(function(i){const a=[];i.forEach(function(o,u){const s=o[0]<o[1]?o.join(","):o[1]+","+o[0],l=o.map(function(h){return e[h]});s in r?a.push(~r[s]):(a.push(r[s]=n.arcs.length),n.arcs.push(l))}),n.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(A0(i.map(function(o){return e[o[0]]}))),arcs:[a]})}),n.objects.triangles.geometries.sort((i,a)=>i.area-a.area),n}function ma(t,e){const r=t.objects.triangles.geometries,n=R0(a=>a.area).left;for(;r.length>e;)i();if(e>r.length)throw new RangeError("Can't collapse topology into "+e+" pieces.");return ha(t,t.objects.triangles).features.map(a=>(a.geometry.coordinates[0].pop(),a.geometry.coordinates[0]));function i(){const a=r[0],o=ga(r)[0][0],u=r[o],s=pa(t,[a,u]);s.area=a.area+u.area,s.type="Polygon",s.arcs=s.arcs[0],r.splice(o,1),r.shift(),r.splice(n(r,s.area),0,s)}}function xa(t,e){return ma(da(wa(t),t),e)}function wa(t){let e=z0(t.reduce((n,i)=>[...n,i[0],i[1]],[])),r=[];for(let n=0,i=e.length;n<i;n+=3)r.push([[e[n],e[n+1]],[e[n+1],e[n+2]],[e[n+2],e[n]]]);return r}function Ea(t,e){if(t.length>8)return t.map((n,i)=>i);let r=t.map(n=>e.map(i=>Pa(n,i)));return Sa(t,e,r)}function Sa(t,e,r){let n=1/0,i=t.map((o,u)=>u);function a(o,u=[],s=0){for(let l=0;l<o.length;l++){let h=o.splice(l,1),c=r[h[0]][u.length];s+c<n&&(o.length?a(o.slice(),u.concat(h),s+c):(n=s+c,i=u.concat(h))),o.length&&o.splice(l,0,h[0])}}return a(i),i}function Pa(t,e){let r=qt(Yr(t),Yr(e));return r*r}function C0(t,e,{maxSegmentLength:r=10,string:n=!0,single:i=!1}={}){let a=Nt(t,r);a.length<e.length+2&&ke(a,e.length+2-a.length);let o=xa(a,e.length),u=e.map(h=>Nt(h,r)),s=typeof t=="string"&&t,l;return(!i||e.every(h=>typeof h=="string"))&&(l=e.slice(0)),T0(o,u,{match:!0,string:n,single:i,t0:s,t1:l})}function _a(t,e,{maxSegmentLength:r=10,string:n=!0,single:i=!1}={}){let a=C0(e,t,{maxSegmentLength:r,string:n,single:i});return i?o=>a(1-o):a.map(o=>u=>o(1-u))}function Ma(t,e,{maxSegmentLength:r=10,string:n=!0,single:i=!1}={}){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length||!t.length)throw new TypeError(Z1);let a=h=>Nt(h,r),o=t.map(a),u=e.map(a),s,l;return i?(t.every(h=>typeof h=="string")&&(s=t.slice(0)),e.every(h=>typeof h=="string")&&(l=e.slice(0))):(s=t.slice(0),l=e.slice(0)),T0(o,u,{string:n,single:i,t0:s,t1:l,match:!1})}function T0(t,e,{string:r,single:n,t0:i,t1:a,match:o}={}){let u=o?Ea(t,e):t.map((l,h)=>h),s=u.map((l,h)=>I0(t[l],e[h],r));if(o&&Array.isArray(i)&&(i=u.map(l=>i[l])),n&&r&&(Array.isArray(i)&&(i=i.join(" ")),Array.isArray(a)&&(a=a.join(" "))),n){let l=r?h=>s.map(c=>c(h)).join(" "):h=>s.map(c=>c(h));return r&&(i||a)?h=>h<1e-4&&i||1-h<1e-4&&a||l(h):l}else if(r)return i=Array.isArray(i)?i.map(l=>typeof l=="string"&&l):[],a=Array.isArray(a)?a.map(l=>typeof l=="string"&&l):[],s.map((l,h)=>i[h]||a[h]?c=>c<1e-4&&i[h]||1-c<1e-4&&a[h]||l(c):l);return s}class Aa{constructor(e,r,n=350){U(this,"waitDuration",75);U(this,"morphDuration",0);U(this,"startTime");U(this,"interpolator");U(this,"canceled",!1);const i=Wi(e,r),a=i?z(i):0,o=z(r),u=z(e),s=.99;(a/o<s||a/u<s)&&(this.morphDuration=Math.min(Math.max(1-a/u,1-a/o)*25e3,n)),this.startTime=+new Date;const l=we.toArray(r.geometry),h=we.toArray(e.geometry);let c=null,f=null;r.geometry.type==="MultiPolygon"&&(c=l.sort((v,p)=>z({type:"Polygon",coordinates:[p]})-z({type:"Polygon",coordinates:[v]}))),e.geometry.type==="MultiPolygon"&&(f=h.sort((v,p)=>z({type:"Polygon",coordinates:[p]})-z({type:"Polygon",coordinates:[v]}))),c&&f&&c.length===f.length?this.interpolator=Ma(c,f,{string:!1,single:!0,match:!0}):r.geometry.type==="Polygon"&&e.geometry.type==="MultiPolygon"?this.interpolator=C0(l,f,{string:!1,single:!0}):r.geometry.type==="MultiPolygon"&&e.geometry.type==="Polygon"?this.interpolator=_a(c,h,{string:!1,single:!0}):this.interpolator=ua(r.geometry.type==="MultiPolygon"?r.geometry.coordinates.sort((v,p)=>z({type:"Polygon",coordinates:p})-z({type:"Polygon",coordinates:v}))[0][0]:r.geometry.coordinates[0],e.geometry.type==="MultiPolygon"?e.geometry.coordinates.sort((v,p)=>z({type:"Polygon",coordinates:p})-z({type:"Polygon",coordinates:v}))[0][0]:e.geometry.coordinates[0],{string:!1})}cancel(){this.canceled=!0}}class ba{constructor(e,r){U(this,"source");U(this,"sourceLoaded",!1);U(this,"morphOption");U(this,"feature");this.source=e,this.morphOption=Object.assign({maxDuration:350},r)}async morph(e){if(this.sourceLoaded||(this.feature=await this.initSource(this.source)),!this.feature){this.feature=e,this.source.setData(e);return}const r=this.feature,n=e;this.feature=e;const i=new Aa(n,r,this.morphOption.maxDuration),a=()=>{if(i.canceled)return;const o=+new Date-i.startTime;let u;if(o<=i.waitDuration)u=Math.min(o/i.waitDuration,1),window.requestAnimationFrame(a);else if(i.morphDuration>0&&o-i.waitDuration<=i.morphDuration){u=Math.min((o-i.waitDuration)/i.morphDuration,1);const s=i.interpolator(u);let l;s[0][0][0]?l={type:"Feature",properties:r.properties,geometry:we.toGeoJSON([s],"MultiPolygon")}:l={type:"Feature",properties:r.properties,geometry:{type:"Polygon",coordinates:[s]}},this.source.setData(l),window.requestAnimationFrame(a)}else this.source.setData(e)};a()}async initSource(e){const r=e._data;let n;typeof r=="string"?n=await(await fetch(r)).json():n=r;let i;if(n.type==="FeatureCollection")if(n.features.length===1)i=n.features[0];else{this.sourceLoaded=!0;return}else i=n;if(i.geometry.type==="Polygon"||i.geometry.type==="MultiPolygon")return this.sourceLoaded=!0,i;throw new Error("The type of feature must be 'Polygon' or 'MultiPolygon'.")}}const La={class:"control"},Oa=$0({__name:"polygon-morpher",setup(t){const e={center:[-73.950543,40.7611],zoom:11};let r,n,i=0;const a=u=>{i+=u,i<0&&(i=r.length+i),n&&r.length>0&&n.morph(r[i%r.length])},o=u=>{u.addSource("geojson-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),u.addLayer({id:"poly-layer",type:"fill",source:"geojson-source",paint:{"fill-color":"rgba(152, 224, 173, 0.5)"}},"aeroway-line"),u.addLayer({id:"line-layer",type:"line",source:"geojson-source",layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":3,"line-color":"rgba(255, 178, 125, 1)"}});const s=u.getSource("geojson-source");n=new ba(s),fetch(X0("/data/ny.geojson")).then(l=>l.json()).then(l=>{r=l.features,n.morph(r[i])})};return(u,s)=>(V0(),J0(B0,{"map-options":e,onLoad:o},{default:Y0(()=>[le("div",La,[le("span",{class:"control-item",onClick:s[0]||(s[0]=l=>a(-1))},"上一个"),le("span",{class:"control-item",onClick:s[1]||(s[1]=l=>a(1))},"下一个")])]),_:1}))}}),Ca=U0(Oa,[["__file","polygon-morpher.vue"]]);export{Ca as default};
