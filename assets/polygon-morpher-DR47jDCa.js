var Y0=Object.defineProperty;var X0=(e,t,n)=>t in e?Y0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Z=(e,t,n)=>X0(e,typeof t!="symbol"?t+"":t,n);import{c as U0,g as Q0,b as W0}from"./base-map-CxlE6ySX.js";import{e as Z0}from"./earcut-D1cPlY50.js";import{g as H0,l as K0,_ as j0,o as ti,h as ei,d as ni,e as he}from"./app-Oi8ZZMZx.js";var wt={},Te="1.13.7",En=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ne=Array.prototype,qe=Object.prototype,Mn=typeof Symbol<"u"?Symbol.prototype:null,ri=ne.push,qt=ne.slice,bt=qe.toString,ii=qe.hasOwnProperty,er=typeof ArrayBuffer<"u",oi=typeof DataView<"u",si=Array.isArray,_n=Object.keys,Sn=Object.create,Pn=er&&ArrayBuffer.isView,ai=isNaN,ui=isFinite,nr=!{toString:null}.propertyIsEnumerable("toString"),An=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],li=Math.pow(2,53)-1;function q(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var o=Array(t+1);for(i=0;i<t;i++)o[i]=arguments[i];return o[t]=r,e.apply(this,o)}}function ot(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function rr(e){return e===null}function ke(e){return e===void 0}function De(e){return e===!0||e===!1||bt.call(e)==="[object Boolean]"}function ir(e){return!!(e&&e.nodeType===1)}function F(e){var t="[object "+e+"]";return function(n){return bt.call(n)===t}}const re=F("String"),Be=F("Number"),or=F("Date"),sr=F("RegExp"),ar=F("Error"),$e=F("Symbol"),Ge=F("ArrayBuffer");var ur=F("Function"),fi=En.document&&En.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof fi!="function"&&(ur=function(e){return typeof e=="function"||!1});const R=ur,lr=F("Object");var fr=oi&&(!/\[native code\]/.test(String(DataView))||lr(new DataView(new ArrayBuffer(8)))),ze=typeof Map<"u"&&lr(new Map),ci=F("DataView");function hi(e){return e!=null&&R(e.getInt8)&&Ge(e.buffer)}const Lt=fr?hi:ci,st=si||F("Array");function at(e,t){return e!=null&&ii.call(e,t)}var we=F("Arguments");(function(){we(arguments)||(we=function(e){return at(e,"callee")})})();const ie=we;function cr(e){return!$e(e)&&ui(e)&&!isNaN(parseFloat(e))}function Ve(e){return Be(e)&&ai(e)}function Je(e){return function(){return e}}function hr(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=li}}function pr(e){return function(t){return t==null?void 0:t[e]}}const Ut=pr("byteLength"),pi=hr(Ut);var gi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function vi(e){return Pn?Pn(e)&&!Lt(e):pi(e)&&gi.test(bt.call(e))}const Ye=er?vi:Je(!1),k=pr("length");function yi(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(i){return t[i]===!0},push:function(i){return t[i]=!0,e.push(i)}}}function gr(e,t){t=yi(t);var n=An.length,r=e.constructor,i=R(r)&&r.prototype||qe,o="constructor";for(at(e,o)&&!t.contains(o)&&t.push(o);n--;)o=An[n],o in e&&e[o]!==i[o]&&!t.contains(o)&&t.push(o)}function C(e){if(!ot(e))return[];if(_n)return _n(e);var t=[];for(var n in e)at(e,n)&&t.push(n);return nr&&gr(e,t),t}function vr(e){if(e==null)return!0;var t=k(e);return typeof t=="number"&&(st(e)||re(e)||ie(e))?t===0:k(C(e))===0}function Xe(e,t){var n=C(t),r=n.length;if(e==null)return!r;for(var i=Object(e),o=0;o<r;o++){var a=n[o];if(t[a]!==i[a]||!(a in i))return!1}return!0}function _(e){if(e instanceof _)return e;if(!(this instanceof _))return new _(e);this._wrapped=e}_.VERSION=Te;_.prototype.value=function(){return this._wrapped};_.prototype.valueOf=_.prototype.toJSON=_.prototype.value;_.prototype.toString=function(){return String(this._wrapped)};function bn(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Ut(e))}var Ln="[object DataView]";function Ee(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var i=typeof e;return i!=="function"&&i!=="object"&&typeof t!="object"?!1:yr(e,t,n,r)}function yr(e,t,n,r){e instanceof _&&(e=e._wrapped),t instanceof _&&(t=t._wrapped);var i=bt.call(e);if(i!==bt.call(t))return!1;if(fr&&i=="[object Object]"&&Lt(e)){if(!Lt(t))return!1;i=Ln}switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Mn.valueOf.call(e)===Mn.valueOf.call(t);case"[object ArrayBuffer]":case Ln:return yr(bn(e),bn(t),n,r)}var o=i==="[object Array]";if(!o&&Ye(e)){var a=Ut(e);if(a!==Ut(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if(typeof e!="object"||typeof t!="object")return!1;var s=e.constructor,u=t.constructor;if(s!==u&&!(R(s)&&s instanceof s&&R(u)&&u instanceof u)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var f=n.length;f--;)if(n[f]===e)return r[f]===t;if(n.push(e),r.push(t),o){if(f=e.length,f!==t.length)return!1;for(;f--;)if(!Ee(e[f],t[f],n,r))return!1}else{var h=C(e),c;if(f=h.length,C(t).length!==f)return!1;for(;f--;)if(c=h[f],!(at(t,c)&&Ee(e[c],t[c],n,r)))return!1}return n.pop(),r.pop(),!0}function dr(e,t){return Ee(e,t)}function Et(e){if(!ot(e))return[];var t=[];for(var n in e)t.push(n);return nr&&gr(e,t),t}function Ue(e){var t=k(e);return function(n){if(n==null)return!1;var r=Et(n);if(k(r))return!1;for(var i=0;i<t;i++)if(!R(n[e[i]]))return!1;return e!==wr||!R(n[Qe])}}var Qe="forEach",mr="has",We=["clear","delete"],xr=["get",mr,"set"],di=We.concat(Qe,xr),wr=We.concat(xr),mi=["add"].concat(We,Qe,mr);const Er=ze?Ue(di):F("Map"),Mr=ze?Ue(wr):F("WeakMap"),_r=ze?Ue(mi):F("Set"),Sr=F("WeakSet");function ct(e){for(var t=C(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r}function Pr(e){for(var t=C(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r}function Ze(e){for(var t={},n=C(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t}function It(e){var t=[];for(var n in e)R(e[n])&&t.push(n);return t.sort()}function He(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||n==null)return n;for(var i=1;i<r;i++)for(var o=arguments[i],a=e(o),s=a.length,u=0;u<s;u++){var f=a[u];(!t||n[f]===void 0)&&(n[f]=o[f])}return n}}const Ke=He(Et),mt=He(C),je=He(Et,!0);function xi(){return function(){}}function Ar(e){if(!ot(e))return{};if(Sn)return Sn(e);var t=xi();t.prototype=e;var n=new t;return t.prototype=null,n}function br(e,t){var n=Ar(e);return t&&mt(n,t),n}function Lr(e){return ot(e)?st(e)?e.slice():Ke({},e):e}function Ir(e,t){return t(e),e}function tn(e){return st(e)?e:[e]}_.toPath=tn;function kt(e){return _.toPath(e)}function en(e,t){for(var n=t.length,r=0;r<n;r++){if(e==null)return;e=e[t[r]]}return n?e:void 0}function nn(e,t,n){var r=en(e,kt(t));return ke(r)?n:r}function Or(e,t){t=kt(t);for(var n=t.length,r=0;r<n;r++){var i=t[r];if(!at(e,i))return!1;e=e[i]}return!!n}function oe(e){return e}function ft(e){return e=mt({},e),function(t){return Xe(t,e)}}function se(e){return e=kt(e),function(t){return en(t,e)}}function Dt(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(r){return e.call(t,r)};case 3:return function(r,i,o){return e.call(t,r,i,o)};case 4:return function(r,i,o,a){return e.call(t,r,i,o,a)}}return function(){return e.apply(t,arguments)}}function Cr(e,t,n){return e==null?oe:R(e)?Dt(e,t,n):ot(e)&&!st(e)?ft(e):se(e)}function ae(e,t){return Cr(e,t,1/0)}_.iteratee=ae;function D(e,t,n){return _.iteratee!==ae?_.iteratee(e,t):Cr(e,t,n)}function Nr(e,t,n){t=D(t,n);for(var r=C(e),i=r.length,o={},a=0;a<i;a++){var s=r[a];o[s]=t(e[s],s,e)}return o}function rn(){}function Rr(e){return e==null?rn:function(t){return nn(e,t)}}function Fr(e,t,n){var r=Array(Math.max(0,e));t=Dt(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r}function Qt(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const xt=Date.now||function(){return new Date().getTime()};function Tr(e){var t=function(o){return e[o]},n="(?:"+C(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(o){return o=o==null?"":""+o,r.test(o)?o.replace(i,t):o}}const qr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},kr=Tr(qr),wi=Ze(qr),Dr=Tr(wi),Br=_.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var pe=/(.)^/,Ei={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Mi=/\\|'|\r|\n|\u2028|\u2029/g;function _i(e){return"\\"+Ei[e]}var Si=/^\s*(\w|\$)+\s*$/;function $r(e,t,n){!t&&n&&(t=n),t=je({},t,_.templateSettings);var r=RegExp([(t.escape||pe).source,(t.interpolate||pe).source,(t.evaluate||pe).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(f,h,c,l,p){return o+=e.slice(i,p).replace(Mi,_i),i=p+f.length,h?o+=`'+
((__t=(`+h+`))==null?'':_.escape(__t))+
'`:c?o+=`'+
((__t=(`+c+`))==null?'':__t)+
'`:l&&(o+=`';
`+l+`
__p+='`),f}),o+=`';
`;var a=t.variable;if(a){if(!Si.test(a))throw new Error("variable is not a bare identifier: "+a)}else o=`with(obj||{}){
`+o+`}
`,a="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var s;try{s=new Function(a,"_",o)}catch(f){throw f.source=o,f}var u=function(f){return s.call(this,f,_)};return u.source="function("+a+`){
`+o+"}",u}function Gr(e,t,n){t=kt(t);var r=t.length;if(!r)return R(n)?n.call(e):n;for(var i=0;i<r;i++){var o=e==null?void 0:e[t[i]];o===void 0&&(o=n,i=r),e=R(o)?o.call(e):o}return e}var Pi=0;function zr(e){var t=++Pi+"";return e?e+t:t}function Vr(e){var t=_(e);return t._chain=!0,t}function Jr(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=Ar(e.prototype),a=e.apply(o,i);return ot(a)?a:o}var ht=q(function(e,t){var n=ht.placeholder,r=function(){for(var i=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[i++]:t[s];for(;i<arguments.length;)a.push(arguments[i++]);return Jr(e,r,this,this,a)};return r});ht.placeholder=_;const on=q(function(e,t,n){if(!R(e))throw new TypeError("Bind must be called on a function");var r=q(function(i){return Jr(e,r,t,this,n.concat(i))});return r}),B=hr(k);function pt(e,t,n,r){if(r=r||[],!t&&t!==0)t=1/0;else if(t<=0)return r.concat(e);for(var i=r.length,o=0,a=k(e);o<a;o++){var s=e[o];if(B(s)&&(st(s)||ie(s)))if(t>1)pt(s,t-1,n,r),i=r.length;else for(var u=0,f=s.length;u<f;)r[i++]=s[u++];else n||(r[i++]=s)}return r}const Yr=q(function(e,t){t=pt(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=on(e[r],e)}return e});function Xr(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return at(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n}const sn=q(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),Ur=ht(sn,_,1);function Qr(e,t,n){var r,i,o,a,s=0;n||(n={});var u=function(){s=n.leading===!1?0:xt(),r=null,a=e.apply(i,o),r||(i=o=null)},f=function(){var h=xt();!s&&n.leading===!1&&(s=h);var c=t-(h-s);return i=this,o=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=h,a=e.apply(i,o),r||(i=o=null)):!r&&n.trailing!==!1&&(r=setTimeout(u,c)),a};return f.cancel=function(){clearTimeout(r),s=0,r=i=o=null},f}function Wr(e,t,n){var r,i,o,a,s,u=function(){var h=xt()-i;t>h?r=setTimeout(u,t-h):(r=null,n||(a=e.apply(s,o)),r||(o=s=null))},f=q(function(h){return s=this,o=h,i=xt(),r||(r=setTimeout(u,t),n&&(a=e.apply(s,o))),a});return f.cancel=function(){clearTimeout(r),r=o=s=null},f}function Zr(e,t){return ht(t,e)}function ue(e){return function(){return!e.apply(this,arguments)}}function Hr(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Kr(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function an(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const jr=ht(an,2);function un(e,t,n){t=D(t,n);for(var r=C(e),i,o=0,a=r.length;o<a;o++)if(i=r[o],t(e[i],i,e))return i}function t0(e){return function(t,n,r){n=D(n,r);for(var i=k(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}const le=t0(1),ln=t0(-1);function fn(e,t,n,r){n=D(n,r,1);for(var i=n(t),o=0,a=k(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<i?o=s+1:a=s}return o}function e0(e,t,n){return function(r,i,o){var a=0,s=k(r);if(typeof o=="number")e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(qt.call(r,a,s),Ve),o>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(r[o]===i)return o;return-1}}const cn=e0(1,le,fn),n0=e0(-1,ln);function Ot(e,t,n){var r=B(e)?le:un,i=r(e,t,n);if(i!==void 0&&i!==-1)return e[i]}function r0(e,t){return Ot(e,ft(t))}function Q(e,t,n){t=Dt(t,n);var r,i;if(B(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=C(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e}function j(e,t,n){t=D(t,n);for(var r=!B(e)&&C(e),i=(r||e).length,o=Array(i),a=0;a<i;a++){var s=r?r[a]:a;o[a]=t(e[s],s,e)}return o}function i0(e){var t=function(n,r,i,o){var a=!B(n)&&C(n),s=(a||n).length,u=e>0?0:s-1;for(o||(i=n[a?a[u]:u],u+=e);u>=0&&u<s;u+=e){var f=a?a[u]:u;i=r(i,n[f],f,n)}return i};return function(n,r,i,o){var a=arguments.length>=3;return t(n,Dt(r,o,4),i,a)}}const yt=i0(1),Wt=i0(-1);function rt(e,t,n){var r=[];return t=D(t,n),Q(e,function(i,o,a){t(i,o,a)&&r.push(i)}),r}function o0(e,t,n){return rt(e,ue(D(t)),n)}function Zt(e,t,n){t=D(t,n);for(var r=!B(e)&&C(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(!t(e[a],a,e))return!1}return!0}function Ht(e,t,n){t=D(t,n);for(var r=!B(e)&&C(e),i=(r||e).length,o=0;o<i;o++){var a=r?r[o]:o;if(t(e[a],a,e))return!0}return!1}function G(e,t,n,r){return B(e)||(e=ct(e)),(typeof n!="number"||r)&&(n=0),cn(e,t,n)>=0}const s0=q(function(e,t,n){var r,i;return R(t)?i=t:(t=kt(t),r=t.slice(0,-1),t=t[t.length-1]),j(e,function(o){var a=i;if(!a){if(r&&r.length&&(o=en(o,r)),o==null)return;a=o[t]}return a==null?a:a.apply(o,n)})});function fe(e,t){return j(e,se(t))}function a0(e,t){return rt(e,ft(t))}function hn(e,t,n){var r=-1/0,i=-1/0,o,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=B(e)?e:ct(e);for(var s=0,u=e.length;s<u;s++)o=e[s],o!=null&&o>r&&(r=o)}else t=D(t,n),Q(e,function(f,h,c){a=t(f,h,c),(a>i||a===-1/0&&r===-1/0)&&(r=f,i=a)});return r}function u0(e,t,n){var r=1/0,i=1/0,o,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=B(e)?e:ct(e);for(var s=0,u=e.length;s<u;s++)o=e[s],o!=null&&o<r&&(r=o)}else t=D(t,n),Q(e,function(f,h,c){a=t(f,h,c),(a<i||a===1/0&&r===1/0)&&(r=f,i=a)});return r}var Ai=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pn(e){return e?st(e)?qt.call(e):re(e)?e.match(Ai):B(e)?j(e,oe):ct(e):[]}function gn(e,t,n){if(t==null||n)return B(e)||(e=ct(e)),e[Qt(e.length-1)];var r=pn(e),i=k(r);t=Math.max(Math.min(t,i),0);for(var o=i-1,a=0;a<t;a++){var s=Qt(a,o),u=r[a];r[a]=r[s],r[s]=u}return r.slice(0,t)}function l0(e){return gn(e,1/0)}function f0(e,t,n){var r=0;return t=D(t,n),fe(j(e,function(i,o,a){return{value:i,index:r++,criteria:t(i,o,a)}}).sort(function(i,o){var a=i.criteria,s=o.criteria;if(a!==s){if(a>s||a===void 0)return 1;if(a<s||s===void 0)return-1}return i.index-o.index}),"value")}function ce(e,t){return function(n,r,i){var o=t?[[],[]]:{};return r=D(r,i),Q(n,function(a,s){var u=r(a,s,n);e(o,a,u)}),o}}const c0=ce(function(e,t,n){at(e,n)?e[n].push(t):e[n]=[t]}),h0=ce(function(e,t,n){e[n]=t}),p0=ce(function(e,t,n){at(e,n)?e[n]++:e[n]=1}),g0=ce(function(e,t,n){e[n?0:1].push(t)},!0);function v0(e){return e==null?0:B(e)?e.length:C(e).length}function bi(e,t,n){return t in n}const vn=q(function(e,t){var n={},r=t[0];if(e==null)return n;R(r)?(t.length>1&&(r=Dt(r,t[1])),t=Et(e)):(r=bi,t=pt(t,!1,!1),e=Object(e));for(var i=0,o=t.length;i<o;i++){var a=t[i],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),y0=q(function(e,t){var n=t[0],r;return R(n)?(n=ue(n),t.length>1&&(r=t[1])):(t=j(pt(t,!1,!1),String),n=function(i,o){return!G(t,o)}),vn(e,n,r)});function yn(e,t,n){return qt.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function dt(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:yn(e,e.length-t)}function lt(e,t,n){return qt.call(e,t==null||n?1:t)}function d0(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:lt(e,Math.max(0,e.length-t))}function m0(e){return rt(e,Boolean)}function x0(e,t){return pt(e,t,!1)}const dn=q(function(e,t){return t=pt(t,!0,!0),rt(e,function(n){return!G(t,n)})}),w0=q(function(e,t){return dn(e,t)});function Ct(e,t,n,r){De(t)||(r=n,n=t,t=!1),n!=null&&(n=D(n,r));for(var i=[],o=[],a=0,s=k(e);a<s;a++){var u=e[a],f=n?n(u,a,e):u;t&&!n?((!a||o!==f)&&i.push(u),o=f):n?G(o,f)||(o.push(f),i.push(u)):G(i,u)||i.push(u)}return i}const E0=q(function(e){return Ct(pt(e,!0,!0))});function M0(e){for(var t=[],n=arguments.length,r=0,i=k(e);r<i;r++){var o=e[r];if(!G(t,o)){var a;for(a=1;a<n&&G(arguments[a],o);a++);a===n&&t.push(o)}}return t}function Nt(e){for(var t=e&&hn(e,k).length||0,n=Array(t),r=0;r<t;r++)n[r]=fe(e,r);return n}const _0=q(Nt);function S0(e,t){for(var n={},r=0,i=k(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function P0(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i}function A0(e,t){if(t==null||t<1)return[];for(var n=[],r=0,i=e.length;r<i;)n.push(qt.call(e,r,r+=t));return n}function mn(e,t){return e._chain?_(t).chain():t}function xn(e){return Q(It(e),function(t){var n=_[t]=e[t];_.prototype[t]=function(){var r=[this._wrapped];return ri.apply(r,arguments),mn(this,n.apply(_,r))}}),_}Q(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=ne[e];_.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),mn(this,n)}});Q(["concat","join","slice"],function(e){var t=ne[e];_.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),mn(this,n)}});const Li=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Te,after:Kr,all:Zt,allKeys:Et,any:Ht,assign:mt,before:an,bind:on,bindAll:Yr,chain:Vr,chunk:A0,clone:Lr,collect:j,compact:m0,compose:Hr,constant:Je,contains:G,countBy:p0,create:br,debounce:Wr,default:_,defaults:je,defer:Ur,delay:sn,detect:Ot,difference:dn,drop:lt,each:Q,escape:kr,every:Zt,extend:Ke,extendOwn:mt,filter:rt,find:Ot,findIndex:le,findKey:un,findLastIndex:ln,findWhere:r0,first:dt,flatten:x0,foldl:yt,foldr:Wt,forEach:Q,functions:It,get:nn,groupBy:c0,has:Or,head:dt,identity:oe,include:G,includes:G,indexBy:h0,indexOf:cn,initial:yn,inject:yt,intersection:M0,invert:Ze,invoke:s0,isArguments:ie,isArray:st,isArrayBuffer:Ge,isBoolean:De,isDataView:Lt,isDate:or,isElement:ir,isEmpty:vr,isEqual:dr,isError:ar,isFinite:cr,isFunction:R,isMap:Er,isMatch:Xe,isNaN:Ve,isNull:rr,isNumber:Be,isObject:ot,isRegExp:sr,isSet:_r,isString:re,isSymbol:$e,isTypedArray:Ye,isUndefined:ke,isWeakMap:Mr,isWeakSet:Sr,iteratee:ae,keys:C,last:d0,lastIndexOf:n0,map:j,mapObject:Nr,matcher:ft,matches:ft,max:hn,memoize:Xr,methods:It,min:u0,mixin:xn,negate:ue,noop:rn,now:xt,object:S0,omit:y0,once:jr,pairs:Pr,partial:ht,partition:g0,pick:vn,pluck:fe,property:se,propertyOf:Rr,random:Qt,range:P0,reduce:yt,reduceRight:Wt,reject:o0,rest:lt,restArguments:q,result:Gr,sample:gn,select:rt,shuffle:l0,size:v0,some:Ht,sortBy:f0,sortedIndex:fn,tail:lt,take:dt,tap:Ir,template:$r,templateSettings:Br,throttle:Qr,times:Fr,toArray:pn,toPath:tn,transpose:Nt,unescape:Dr,union:E0,uniq:Ct,unique:Ct,uniqueId:zr,unzip:Nt,values:ct,where:a0,without:w0,wrap:Zr,zip:_0},Symbol.toStringTag,{value:"Module"}));var Me=xn(Li);Me._=Me;const Ii=Object.freeze(Object.defineProperty({__proto__:null,VERSION:Te,after:Kr,all:Zt,allKeys:Et,any:Ht,assign:mt,before:an,bind:on,bindAll:Yr,chain:Vr,chunk:A0,clone:Lr,collect:j,compact:m0,compose:Hr,constant:Je,contains:G,countBy:p0,create:br,debounce:Wr,default:Me,defaults:je,defer:Ur,delay:sn,detect:Ot,difference:dn,drop:lt,each:Q,escape:kr,every:Zt,extend:Ke,extendOwn:mt,filter:rt,find:Ot,findIndex:le,findKey:un,findLastIndex:ln,findWhere:r0,first:dt,flatten:x0,foldl:yt,foldr:Wt,forEach:Q,functions:It,get:nn,groupBy:c0,has:Or,head:dt,identity:oe,include:G,includes:G,indexBy:h0,indexOf:cn,initial:yn,inject:yt,intersection:M0,invert:Ze,invoke:s0,isArguments:ie,isArray:st,isArrayBuffer:Ge,isBoolean:De,isDataView:Lt,isDate:or,isElement:ir,isEmpty:vr,isEqual:dr,isError:ar,isFinite:cr,isFunction:R,isMap:Er,isMatch:Xe,isNaN:Ve,isNull:rr,isNumber:Be,isObject:ot,isRegExp:sr,isSet:_r,isString:re,isSymbol:$e,isTypedArray:Ye,isUndefined:ke,isWeakMap:Mr,isWeakSet:Sr,iteratee:ae,keys:C,last:d0,lastIndexOf:n0,map:j,mapObject:Nr,matcher:ft,matches:ft,max:hn,memoize:Xr,methods:It,min:u0,mixin:xn,negate:ue,noop:rn,now:xt,object:S0,omit:y0,once:jr,pairs:Pr,partial:ht,partition:g0,pick:vn,pluck:fe,property:se,propertyOf:Rr,random:Qt,range:P0,reduce:yt,reduceRight:Wt,reject:o0,rest:lt,restArguments:q,result:Gr,sample:gn,select:rt,shuffle:l0,size:v0,some:Ht,sortBy:f0,sortedIndex:fn,tail:lt,take:dt,tap:Ir,template:$r,templateSettings:Br,throttle:Qr,times:Fr,toArray:pn,toPath:tn,transpose:Nt,unescape:Dr,union:E0,uniq:Ct,unique:Ct,uniqueId:zr,unzip:Nt,values:ct,where:a0,without:w0,wrap:Zr,zip:_0},Symbol.toStringTag,{value:"Module"})),Oi=U0(Ii);var m=Oi,I=function(e,t,n){return t?(n||(n={}),n.message?{result:e,message:n.message}:{result:e}):e},Kt=function(e,t){return e.length<2||!m.isNumber(e[0])||!m.isNumber(e[1])?I(!1,t,{message:"invalid coordinates for GeoJSON Point"}):!0},In=function(e,t){var n=m.find(e,function(r){return r.length<4?I(!1,t,{message:"expecting coordinates of GeoJSON object to have at least 4 positions"}):m.isEqual(m.last(r),r[0])?Kt(r):I(!1,t,{message:"the first and last positions of GeoJSON LinearRing are not the same"})});return n?I(!1,t,{message:""}):!0},On=function(e,t){var n=m.find(e,function(r){return!Kt(r)});return n?I(!1,t,{message:"one of the coordinates of the LineString are invalid"}):!0},zt=function(e){return e*Math.PI/180},b0=function(e,t){var n={},r,i,o;switch(t||(t="point"),t=t.toLowerCase(),t){case"point":var a=m.flatten(e),s=JSON.stringify(e)||{};a.length!==2?i=new Error(`expected a single set of coordinates in [lat, lng] format. 
Received `+s):(r=[parseFloat(a[1]),parseFloat(a[0])],n={type:"Point",coordinates:r});break;case"linestring":case"multipoint":r=[],m.each(e,function(h){r.push([parseFloat(h[1]),parseFloat(h[0])])}),t==="linestring"?t="LineString":t==="multipoint"&&(t="MultiPoint"),n={type:t,coordinates:r};break;case"polygon":m.isArray(e)&&m.isArray(e[0])&&!m.isArray(e[0][0])&&(e=[e]),r=[],m.find(e,function(h){return h.length<3?(i=new Error("Expecting 'array' to have at length of at least 3 sets of coordinates."),!0):(h.toString()!==m.last(h).toString()&&h.push(h[0]),o=[],m.each(h,function(c){o.push([parseFloat(c[1]),parseFloat(c[0])])}),r.push(o),!1)}),i||(n={type:"Polygon",coordinates:r});break;case"multilinestring":r=[],m.find(e,function(h){return h.length<2&&!i?(i=new Error("Expecting each LineString in MultiLineString to have at least 2 points."),!0):(o=[],m.each(h,function(c){o.push([parseFloat(c[1]),parseFloat(c[0])])}),r.push(o),!1)}),i||(n={type:"MultiLineString",coordinates:r});break;case"multipolygon":r=[];var u,f;m.find(e,function(h){return u=[],m.find(h,function(c){return f=[],c.length<3?(i=new Error("Expecting each array in MultiPolygon to have at least 3 points."),!0):(m.find(c,function(l){return f.push([parseFloat(l[1]),parseFloat(l[0])]),!1}),u.push(f),!1)}),r.push(u),!1}),i||(n={type:"MultiPolygon",coordinates:r});break;default:i=new Error("type not recognised or supported")}return i||n},L0=function(e){var t,n,r,i,o;if(!e.type||!e.coordinates)return new Error("The object specified is not a a valid GeoJSON object");switch(e.type.toLowerCase()){case"point":t=[parseFloat(e.coordinates[1]),parseFloat(e.coordinates[0])];break;case"linestring":t=e.coordinates,o=[],m.find(t,function(a){return typeof a=="object"?(o.push([parseFloat(a[1]),parseFloat(a[0])]),!1):(n=new Error("the object specified is not a valid GeoJSON LineString"),!0)}),n||(t=o);break;case"polygon":t=[],m.find(e.coordinates,function(a){return a.length?(r=[],a[0].toString()!==m.last(a).toString()?(n=new Error("The first and last coordinates of the Polygon are not the same"),!0):a.length<4?(n=new Error("A valid Polygon should have a minimum set of 4 points"),!0):(m.each(m.initial(a),function(s){r.push([parseFloat(s[1]),parseFloat(s[0])])}),t.push(r),n||(t=r),!1)):(n=new Error("the object specified is not a valid GeoJSON Polygon"),!0)});break;case"multipoint":t=[],m.each(e.coordinates,function(a){t.push([parseFloat(a[1]),parseFloat(a[0])])});break;case"multilinestring":t=[],m.find(e.coordinates,function(a){return a.length?(i=[],m.each(a,function(s){i.push([parseFloat(s[1]),parseFloat(s[0])])}),t.push(i),!1):(n=new Error("the object specified is not a valid GeoJSON MultiLineString"),!0)});break;case"multipolygon":t=[],m.each(e.coordinates,function(a){m.find(a,function(s){return s.length?(r=[],s[0].toString()!==m.last(s).toString()?(n=new Error("The first and last coordinates of the Polygon are not the same"),!0):s.length<4?(n=new Error("A valid Polygon should have a minimum set of 4 points"),!0):(m.each(m.initial(s),function(u){r.push([parseFloat(u[1]),parseFloat(u[0])])}),t.push(r),!1)):(n=new Error("the object specified is not a valid GeoJSON Polygon"),!0)})});break;default:n=new Error("unknown GeoJSON type specified")}return n||t},_e=function(e,t){t=t||3;var n=6378.137,r=0,i=e.length,o,a,s,u,f,h,c,l,p,g,v,y;for(o=0;o+1<i;o++)a=e[o],s=e[o+1],u=parseFloat(a[0]),f=parseFloat(s[0]),h=parseFloat(a[1]),c=parseFloat(s[1]),l=zt(f-u),p=zt(c-h),u=zt(u),f=zt(f),g=Math.sin(l/2)*Math.sin(l/2)+Math.sin(p/2)*Math.sin(p/2)*Math.cos(u)*Math.cos(f),v=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),y=n*v,r+=y;return r=Math.round(r*Math.pow(10,t))/Math.pow(10,t),r},Ci=function(e,t){if(!m.isNumber(t)||t<.01)return console.error(new Error("distance should be a number greater than 10 meters")),null;var n;if(!m.isArray(e))if(e.coordinates&&m.isArray(e.coordinates)&&e.type.toLowerCase()==="linestring")n=!0,e=L0(e);else return console.error(new Error("distance should be a number greater than 10 meters")),null;var r,i,o,a=[],s;i=e[0],a.push(i);var u,f,h,c,l,p,g,v;return m.each(e,function(y){if(o=i,i=y,s=_e([i,o]),s>t){for(r=0,u=!1,f=t/s,h=t,c=0;!u||c+t<s;)l=m.last(a),p=i,g=[],l[0]>p[0]?g.push(-1):g.push(1),l[1]>p[1]?g.push(-1):g.push(1),v=[(p[0]-l[0])*f*g[0],(p[1]-l[1])*f*g[1]],g[0]>0?v[0]=v[0]+l[0]:v[0]=l[0]-v[0],g[1]>0?v[1]=v[1]+l[1]:v[1]=l[1]-v[1],g=[],h=_e([l,v]),h!==t?(r=h/t,f=f+f*(1-r)):(c+=t,u=!0,a.push(v));c=0,u=!1,a.push(i)}else a.push(i)}),n?b0(a,"linestring"):a},Vt=function(e,t){var n=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Feature","FeatureCollection","GeometryCollection"],r,i=m.indexOf(n,e.type);if(!e.type||i<0)return I(!1,t,{message:"invalid GeoJSON type supplied"});if(i<6){if(!e.coordinates||!m.isArray(e.coordinates))return I(!1,t,{message:"invalid GeoJSON type supplied"});if(e.type==="Point")return Kt(e.coordinates,t);if(e.type==="MultiPoint")return e.coordinates.length<2?I(!1,t,{message:"expecting array with at least 2 elements for GeoJSON MultiPoint"}):(r=m.find(e.coordinates,function(o){return!Kt(o)}),r?I(!1,t,{message:"one of the coordinates of the GeoJSON MultiPoint are invalid"}):!0);if(e.type==="LineString")return e.coordinates.length<2?I(!1,t,{message:"expecting array with at least 2 elements for GeoJSON LineString"}):On(e.coordinates,t);if(e.type==="MultiLineString")return e.coordinates.length<2?I(!1,t,{message:"expecting array of multiple set of coordinates for GeoJSON MultiLineString"}):(r=m.find(e.coordinates,function(o){return!On(o,t)}),r?I(!1,t,{message:"one of the coordinates of the GeoJSON MultiLineString are invalid"}):!0);if(e.type==="Polygon")return In(e.coordinates,t);if(e.type==="MultiPolygon")return r=m.find(e.coordinates,function(o){return!In(o,t)}),r?I(!1,t,{message:"one of the coordinateof the GeoJSON MultiPolygon are invalid"}):!0}if(i===6)return e.geometry?e.properties?Vt(e.geometry,t):I(!1,t,{message:"expected GeoJSON Feature to have properties"}):I(!1,t,{message:"expected GeoJSON Feature to have a geometry"});if(i===7)return e.features?m.isArray(e.features)?(r=m.find(e.features,function(o){return!Vt(o)}),r?I(!1,t,{message:"one of the GeoJSON FeatureCollection's features is invalid"}):!0):I(!1,t,{message:"expected GeoJSON FeatureCollection's features to be an array"}):I(!1,t,{message:"expected GeoJSON FeatureCollection to have features"});if(i===8)return e.geometries?m.isArray(e.geometries)?(r=m.find(e.geometries,function(o){return!Vt(o)}),r?I(!1,t,{message:"one of the GeoJSON GeometryCollection's geometries is invalid"}):!0):I(!1,t,{message:"expected GeoJSON GeometryCollection's geometries to be an array"}):I(!1,t,{message:"expected GeoJSON GeometryCollection to have geometries"})};wt.toGeoJSON=b0;wt.toArray=L0;wt.getDistance=_e;wt.complexify=Ci;wt.isGeoJSON=Vt;var Se=wt;function I0(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function Ni(e,t,n){n===void 0&&(n={});for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return I0(s,t,n)}function Ri(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return I0(r,t,n)}function Cn(e){return e.type==="Feature"?e.geometry:e}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Fi(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(f){return function(h){return u([f,h])}}function u(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=f[0]&2?i.return:f[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,f[1])).done)return o;switch(i=0,o&&(f=[f[0]&2,o.value]),f[0]){case 0:case 1:o=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,i=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!o||f[1]>o[0]&&f[1]<o[3])){n.label=f[1];break}if(f[0]===6&&n.label<o[1]){n.label=o[1],o=f;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(f);break}o[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(h){f=[6,h],i=0}finally{r=o=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var it=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function Ti(e,t){return e>t?1:e<t?-1:0}function tt(e,t,n){for(var r=new it(null,null),i=r,o=r;;){var a=n(e,t.key);if(a<0){if(t.left===null)break;if(n(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,t=s,t.left===null)break}o.left=t,o=t,t=t.left}else if(a>0){if(t.right===null)break;if(n(e,t.right.key)>0){var s=t.right;if(t.right=s.left,s.left=t,t=s,t.right===null)break}i.right=t,i=t,t=t.right}else break}return i.right=t.left,o.left=t.right,t.left=r.right,t.right=r.left,t}function ge(e,t,n,r){var i=new it(e,t);if(n===null)return i.left=i.right=null,i;n=tt(e,n,r);var o=r(e,n.key);return o<0?(i.left=n.left,i.right=n,n.left=null):o>=0&&(i.right=n.right,i.left=n,n.right=null),i}function Nn(e,t,n){var r=null,i=null;if(t){t=tt(e,t,n);var o=n(t.key,e);o===0?(r=t.left,i=t.right):o<0?(i=t.right,t.right=null,r=t):(r=t.left,t.left=null,i=t)}return{left:r,right:i}}function qi(e,t,n){return t===null?e:(e===null||(t=tt(e.key,t,n),t.left=e),t)}function Pe(e,t,n,r,i){if(e){r(""+t+(n?"└── ":"├── ")+i(e)+`
`);var o=t+(n?"    ":"│   ");e.left&&Pe(e.left,o,!1,r,i),e.right&&Pe(e.right,o,!0,r,i)}}var wn=function(){function e(t){t===void 0&&(t=Ti),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=ge(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new it(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var i=this._comparator,o=tt(t,this._root,i),a=i(t,o.key);return a===0?this._root=o:(a<0?(r.left=o.left,r.right=o,o.left=null):a>0&&(r.right=o.right,r.left=o,o.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var i;if(n===null)return null;n=tt(t,n,r);var o=r(t,n.key);return o===0?(n.left===null?i=n.right:(i=tt(t,n.left,r),i.right=n.right),this._size--,i):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=tt(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return n;i<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=tt(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var i=r(t,n.key);if(i===0)return!0;i<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,i=[],o=!1;!o;)r!==null?(i.push(r),r=r.left):i.length!==0?(r=i.pop(),t.call(n,r),r=r.right):o=!0;return this},e.prototype.range=function(t,n,r,i){for(var o=[],a=this._comparator,s=this._root,u;o.length!==0||s;)if(s)o.push(s),s=s.left;else{if(s=o.pop(),u=a(s.key,n),u>0)break;if(a(s.key,t)>=0&&r.call(i,s))return this;s=s.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,i=0,o=[];!r;)if(n)o.push(n),n=n.left;else if(o.length>0){if(n=o.pop(),i===t)return n;i++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var i=this._comparator;n;){var o=i(t.key,n.key);if(o===0)break;o<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return Di(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var i=t.length,o=this._comparator;if(r&&Le(t,n,0,i-1,o),this._root===null)this._root=Ae(t,n,0,i),this._size=i;else{var a=Bi(this.toList(),ki(t,n),o);i=this._size+i,this._root=be({head:a},0,i)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return Pe(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var i=this._comparator,o=Nn(t,this._root,i),a=o.left,s=o.right;i(t,n)<0?s=ge(n,r,s,i):a=ge(n,r,a,i),this._root=qi(a,s,i)},e.prototype.split=function(t){return Nn(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return Fi(this,function(i){switch(i.label){case 0:t=this._root,n=[],r=!1,i.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return i.sent(),t=t.right,[3,5];case 4:r=!0,i.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function Ae(e,t,n,r){var i=r-n;if(i>0){var o=n+Math.floor(i/2),a=e[o],s=t[o],u=new it(a,s);return u.left=Ae(e,t,n,o),u.right=Ae(e,t,o+1,r),u}return null}function ki(e,t){for(var n=new it(null,null),r=n,i=0;i<e.length;i++)r=r.next=new it(e[i],t[i]);return r.next=null,n.next}function Di(e){for(var t=e,n=[],r=!1,i=new it(null,null),o=i;!r;)t?(n.push(t),t=t.left):n.length>0?(t=o=o.next=n.pop(),t=t.right):r=!0;return o.next=null,i.next}function be(e,t,n){var r=n-t;if(r>0){var i=t+Math.floor(r/2),o=be(e,t,i),a=e.head;return a.left=o,e.head=e.head.next,a.right=be(e,i+1,n),a}return null}function Bi(e,t,n){for(var r=new it(null,null),i=r,o=e,a=t;o!==null&&a!==null;)n(o.key,a.key)<0?(i.next=o,o=o.next):(i.next=a,a=a.next),i=i.next;return o!==null?i.next=o:a!==null&&(i.next=a),r.next}function Le(e,t,n,r,i){if(!(n>=r)){for(var o=e[n+r>>1],a=n-1,s=r+1;;){do a++;while(i(e[a],o)<0);do s--;while(i(e[s],o)>0);if(a>=s)break;var u=e[a];e[a]=e[s],e[s]=u,u=t[a],t[a]=t[s],t[s]=u}Le(e,t,n,s,i),Le(e,t,s+1,r,i)}}const K=11102230246251565e-32,N=134217729,$i=(3+8*K)*K;function ve(e,t,n,r,i){let o,a,s,u,f=t[0],h=r[0],c=0,l=0;h>f==h>-f?(o=f,f=t[++c]):(o=h,h=r[++l]);let p=0;if(c<e&&l<n)for(h>f==h>-f?(a=f+o,s=o-(a-f),f=t[++c]):(a=h+o,s=o-(a-h),h=r[++l]),o=a,s!==0&&(i[p++]=s);c<e&&l<n;)h>f==h>-f?(a=o+f,u=a-o,s=o-(a-u)+(f-u),f=t[++c]):(a=o+h,u=a-o,s=o-(a-u)+(h-u),h=r[++l]),o=a,s!==0&&(i[p++]=s);for(;c<e;)a=o+f,u=a-o,s=o-(a-u)+(f-u),f=t[++c],o=a,s!==0&&(i[p++]=s);for(;l<n;)a=o+h,u=a-o,s=o-(a-u)+(h-u),h=r[++l],o=a,s!==0&&(i[p++]=s);return(o!==0||p===0)&&(i[p++]=o),p}function Gi(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Bt(e){return new Float64Array(e)}const zi=(3+16*K)*K,Vi=(2+12*K)*K,Ji=(9+64*K)*K*K,gt=Bt(4),Rn=Bt(8),Fn=Bt(12),Tn=Bt(16),T=Bt(4);function Yi(e,t,n,r,i,o,a){let s,u,f,h,c,l,p,g,v,y,d,x,S,E,w,M,b,P;const O=e-i,A=n-i,z=t-o,V=r-o;E=O*V,l=N*O,p=l-(l-O),g=O-p,l=N*V,v=l-(l-V),y=V-v,w=g*y-(E-p*v-g*v-p*y),M=z*A,l=N*z,p=l-(l-z),g=z-p,l=N*A,v=l-(l-A),y=A-v,b=g*y-(M-p*v-g*v-p*y),d=w-b,c=w-d,gt[0]=w-(d+c)+(c-b),x=E+d,c=x-E,S=E-(x-c)+(d-c),d=S-M,c=S-d,gt[1]=S-(d+c)+(c-M),P=x+d,c=P-x,gt[2]=x-(P-c)+(d-c),gt[3]=P;let H=Gi(4,gt),Mt=Vi*a;if(H>=Mt||-H>=Mt||(c=e-O,s=e-(O+c)+(c-i),c=n-A,f=n-(A+c)+(c-i),c=t-z,u=t-(z+c)+(c-o),c=r-V,h=r-(V+c)+(c-o),s===0&&u===0&&f===0&&h===0)||(Mt=Ji*a+$i*Math.abs(H),H+=O*h+V*s-(z*f+A*u),H>=Mt||-H>=Mt))return H;E=s*V,l=N*s,p=l-(l-s),g=s-p,l=N*V,v=l-(l-V),y=V-v,w=g*y-(E-p*v-g*v-p*y),M=u*A,l=N*u,p=l-(l-u),g=u-p,l=N*A,v=l-(l-A),y=A-v,b=g*y-(M-p*v-g*v-p*y),d=w-b,c=w-d,T[0]=w-(d+c)+(c-b),x=E+d,c=x-E,S=E-(x-c)+(d-c),d=S-M,c=S-d,T[1]=S-(d+c)+(c-M),P=x+d,c=P-x,T[2]=x-(P-c)+(d-c),T[3]=P;const z0=ve(4,gt,4,T,Rn);E=O*h,l=N*O,p=l-(l-O),g=O-p,l=N*h,v=l-(l-h),y=h-v,w=g*y-(E-p*v-g*v-p*y),M=z*f,l=N*z,p=l-(l-z),g=z-p,l=N*f,v=l-(l-f),y=f-v,b=g*y-(M-p*v-g*v-p*y),d=w-b,c=w-d,T[0]=w-(d+c)+(c-b),x=E+d,c=x-E,S=E-(x-c)+(d-c),d=S-M,c=S-d,T[1]=S-(d+c)+(c-M),P=x+d,c=P-x,T[2]=x-(P-c)+(d-c),T[3]=P;const V0=ve(z0,Rn,4,T,Fn);E=s*h,l=N*s,p=l-(l-s),g=s-p,l=N*h,v=l-(l-h),y=h-v,w=g*y-(E-p*v-g*v-p*y),M=u*f,l=N*u,p=l-(l-u),g=u-p,l=N*f,v=l-(l-f),y=f-v,b=g*y-(M-p*v-g*v-p*y),d=w-b,c=w-d,T[0]=w-(d+c)+(c-b),x=E+d,c=x-E,S=E-(x-c)+(d-c),d=S-M,c=S-d,T[1]=S-(d+c)+(c-M),P=x+d,c=P-x,T[2]=x-(P-c)+(d-c),T[3]=P;const J0=ve(V0,Fn,4,T,Tn);return Tn[J0-1]}function Xi(e,t,n,r,i,o){const a=(t-o)*(n-i),s=(e-i)*(r-o),u=a-s,f=Math.abs(a+s);return Math.abs(u)>=zi*f?u:-Yi(e,t,n,r,i,o,f)}var O0={};const _t=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,Ie=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,i=e.ll.y<t.ll.y?t.ll.y:e.ll.y,o=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:o}}};let et=Number.EPSILON;et===void 0&&(et=Math.pow(2,-52));const Ui=et*et,qn=(e,t)=>{if(-et<e&&e<et&&-et<t&&t<et)return 0;const n=e-t;return n*n<Ui*e*t?0:e<t?-1:1};class Qi{constructor(){this.reset()}reset(){this.xRounder=new kn,this.yRounder=new kn}round(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}class kn{constructor(){this.tree=new wn,this.round(0)}round(t){const n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&qn(n.key,r.key)===0)return this.tree.remove(t),r.key;const i=this.tree.next(n);return i!==null&&qn(n.key,i.key)===0?(this.tree.remove(t),i.key):t}}const Rt=new Qi,Jt=(e,t)=>e.x*t.y-e.y*t.x,C0=(e,t)=>e.x*t.x+e.y*t.y,Dn=(e,t,n)=>{const r=Xi(e.x,e.y,t.x,t.y,n.x,n.y);return r>0?-1:r<0?1:0},jt=e=>Math.sqrt(C0(e,e)),Wi=(e,t,n)=>{const r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return Jt(i,r)/jt(i)/jt(r)},Zi=(e,t,n)=>{const r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y};return C0(i,r)/jt(i)/jt(r)},Bn=(e,t,n)=>t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n},$n=(e,t,n)=>t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)},Hi=(e,t,n,r)=>{if(t.x===0)return $n(n,r,e.x);if(r.x===0)return $n(e,t,n.x);if(t.y===0)return Bn(n,r,e.y);if(r.y===0)return Bn(e,t,n.y);const i=Jt(t,r);if(i==0)return null;const o={x:n.x-e.x,y:n.y-e.y},a=Jt(o,t)/i,s=Jt(o,r)/i,u=e.x+s*t.x,f=n.x+a*r.x,h=e.y+s*t.y,c=n.y+a*r.y,l=(u+f)/2,p=(h+c)/2;return{x:l,y:p}};class ${static compare(t,n){const r=$.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:nt.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let r=0,i=n.length;r<i;r++){const o=n[r];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let i=n+1;i<t;i++){const o=this.point.events[i];o.consumedBy===void 0&&r.otherSE.point.events===o.otherSE.point.events&&r.segment.consume(o.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,r=this.point.events.length;n<r;n++){const i=this.point.events[n];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&t.push(i)}return t}getLeftmostComparator(t){const n=new Map,r=i=>{const o=i.otherSE;n.set(i,{sine:Wi(this.point,t.point,o.point),cosine:Zi(this.point,t.point,o.point)})};return(i,o)=>{n.has(i)||r(i),n.has(o)||r(o);const{sine:a,cosine:s}=n.get(i),{sine:u,cosine:f}=n.get(o);return a>=0&&u>=0?s<f?1:s>f?-1:0:a<0&&u<0?s<f?-1:s>f?1:0:u<a?-1:u>a?1:0}}}let Ki=0;class nt{static compare(t,n){const r=t.leftSE.point.x,i=n.leftSE.point.x,o=t.rightSE.point.x,a=n.rightSE.point.x;if(a<r)return 1;if(o<i)return-1;const s=t.leftSE.point.y,u=n.leftSE.point.y,f=t.rightSE.point.y,h=n.rightSE.point.y;if(r<i){if(u<s&&u<f)return 1;if(u>s&&u>f)return-1;const c=t.comparePoint(n.leftSE.point);if(c<0)return 1;if(c>0)return-1;const l=n.comparePoint(t.rightSE.point);return l!==0?l:-1}if(r>i){if(s<u&&s<h)return-1;if(s>u&&s>h)return 1;const c=n.comparePoint(t.leftSE.point);if(c!==0)return c;const l=t.comparePoint(n.rightSE.point);return l<0?1:l>0?-1:1}if(s<u)return-1;if(s>u)return 1;if(o<a){const c=n.comparePoint(t.rightSE.point);if(c!==0)return c}if(o>a){const c=t.comparePoint(n.rightSE.point);if(c<0)return 1;if(c>0)return-1}if(o!==a){const c=f-s,l=o-r,p=h-u,g=a-i;if(c>l&&p<g)return 1;if(c<l&&p>g)return-1}return o>a?1:o<a||f<h?-1:f>h?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,r,i){this.id=++Ki,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=i}static fromRing(t,n,r){let i,o,a;const s=$.comparePoints(t,n);if(s<0)i=t,o=n,a=1;else if(s>0)i=n,o=t,a=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const u=new $(i,!0),f=new $(o,!1);return new nt(u,f,[r],[a])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const n=this.leftSE.point,r=this.rightSE.point,i=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;const o=(t.y-n.y)/i.y,a=n.x+o*i.x;if(t.x===a)return 0;const s=(t.x-n.x)/i.x,u=n.y+s*i.y;return t.y===u?0:t.y<u?-1:1}getIntersection(t){const n=this.bbox(),r=t.bbox(),i=Ie(n,r);if(i===null)return null;const o=this.leftSE.point,a=this.rightSE.point,s=t.leftSE.point,u=t.rightSE.point,f=_t(n,s)&&this.comparePoint(s)===0,h=_t(r,o)&&t.comparePoint(o)===0,c=_t(n,u)&&this.comparePoint(u)===0,l=_t(r,a)&&t.comparePoint(a)===0;if(h&&f)return l&&!c?a:!l&&c?u:null;if(h)return c&&o.x===u.x&&o.y===u.y?null:o;if(f)return l&&a.x===s.x&&a.y===s.y?null:s;if(l&&c)return null;if(l)return a;if(c)return u;const p=Hi(o,this.vector(),s,t.vector());return p===null||!_t(i,p)?null:Rt.round(p.x,p.y)}split(t){const n=[],r=t.events!==void 0,i=new $(t,!0),o=new $(t,!1),a=this.rightSE;this.replaceRightSE(o),n.push(o),n.push(i);const s=new nt(i,a,this.rings.slice(),this.windings.slice());return $.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),$.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),o.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(t){let n=this,r=t;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const i=nt.compare(n,r);if(i!==0){if(i>0){const o=n;n=r,r=o}if(n.prev===r){const o=n;n=r,r=o}for(let o=0,a=r.rings.length;o<a;o++){const s=r.rings[o],u=r.windings[o],f=n.rings.indexOf(s);f===-1?(n.rings.push(s),n.windings.push(u)):n.windings[f]+=u}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,i=this._afterState.multiPolys;for(let s=0,u=this.rings.length;s<u;s++){const f=this.rings[s],h=this.windings[s],c=n.indexOf(f);c===-1?(n.push(f),r.push(h)):r[c]+=h}const o=[],a=[];for(let s=0,u=n.length;s<u;s++){if(r[s]===0)continue;const f=n[s],h=f.poly;if(a.indexOf(h)===-1)if(f.isExterior)o.push(h);else{a.indexOf(h)===-1&&a.push(h);const c=o.indexOf(f.poly);c!==-1&&o.splice(c,1)}}for(let s=0,u=o.length;s<u;s++){const f=o[s].multiPoly;i.indexOf(f)===-1&&i.push(f)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(U.type){case"union":{const r=t.length===0,i=n.length===0;this._isInResult=r!==i;break}case"intersection":{let r,i;t.length<n.length?(r=t.length,i=n.length):(r=n.length,i=t.length),this._isInResult=i===U.numMultiPolys&&r<i;break}case"xor":{const r=Math.abs(t.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=i=>i.length===1&&i[0].isSubject;this._isInResult=r(t)!==r(n);break}default:throw new Error(`Unrecognized operation type found ${U.type}`)}return this._isInResult}}class Gn{constructor(t,n,r){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const i=Rt.round(t[0][0],t[0][1]);this.bbox={ll:{x:i.x,y:i.y},ur:{x:i.x,y:i.y}};let o=i;for(let a=1,s=t.length;a<s;a++){if(typeof t[a][0]!="number"||typeof t[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let u=Rt.round(t[a][0],t[a][1]);u.x===o.x&&u.y===o.y||(this.segments.push(nt.fromRing(o,u,this)),u.x<this.bbox.ll.x&&(this.bbox.ll.x=u.x),u.y<this.bbox.ll.y&&(this.bbox.ll.y=u.y),u.x>this.bbox.ur.x&&(this.bbox.ur.x=u.x),u.y>this.bbox.ur.y&&(this.bbox.ur.y=u.y),o=u)}(i.x!==o.x||i.y!==o.y)&&this.segments.push(nt.fromRing(o,i,this))}getSweepEvents(){const t=[];for(let n=0,r=this.segments.length;n<r;n++){const i=this.segments[n];t.push(i.leftSE),t.push(i.rightSE)}return t}}class ji{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Gn(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let r=1,i=t.length;r<i;r++){const o=new Gn(t[r],this,!1);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.interiorRings.push(o)}this.multiPoly=n}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getSweepEvents();for(let o=0,a=i.length;o<a;o++)t.push(i[o])}return t}}class zn{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let r=0,i=t.length;r<i;r++){const o=new ji(t[r],this);o.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=o.bbox.ll.x),o.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=o.bbox.ll.y),o.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=o.bbox.ur.x),o.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=o.bbox.ur.y),this.polys.push(o)}this.isSubject=n}getSweepEvents(){const t=[];for(let n=0,r=this.polys.length;n<r;n++){const i=this.polys[n].getSweepEvents();for(let o=0,a=i.length;o<a;o++)t.push(i[o])}return t}}class te{static factory(t){const n=[];for(let r=0,i=t.length;r<i;r++){const o=t[r];if(!o.isInResult()||o.ringOut)continue;let a=null,s=o.leftSE,u=o.rightSE;const f=[s],h=s.point,c=[];for(;a=s,s=u,f.push(s),s.point!==h;)for(;;){const l=s.getAvailableLinkedEvents();if(l.length===0){const v=f[0].point,y=f[f.length-1].point;throw new Error(`Unable to complete output ring starting at [${v.x}, ${v.y}]. Last matching segment found ends at [${y.x}, ${y.y}].`)}if(l.length===1){u=l[0].otherSE;break}let p=null;for(let v=0,y=c.length;v<y;v++)if(c[v].point===s.point){p=v;break}if(p!==null){const v=c.splice(p)[0],y=f.splice(v.index);y.unshift(y[0].otherSE),n.push(new te(y.reverse()));continue}c.push({index:f.length,point:s.point});const g=s.getLeftmostComparator(a);u=l.sort(g)[0].otherSE;break}n.push(new te(f))}return n}constructor(t){this.events=t;for(let n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let f=1,h=this.events.length-1;f<h;f++){const c=this.events[f].point,l=this.events[f+1].point;Dn(c,t,l)!==0&&(n.push(c),t=c)}if(n.length===1)return null;const r=n[0],i=n[1];Dn(r,t,i)===0&&n.shift(),n.push(n[0]);const o=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:n.length-1,s=this.isExteriorRing()?n.length:-1,u=[];for(let f=a;f!=s;f+=o)u.push([n[f].x,n[f].y]);return u}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let i=1,o=this.events.length;i<o;i++){const a=this.events[i];$.compare(t,a)>0&&(t=a)}let n=t.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return r.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}}class Vn{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let n=0,r=this.interiorRings.length;n<r;n++){const i=this.interiorRings[n].getGeom();i!==null&&t.push(i)}return t}}class t1{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let n=0,r=this.polys.length;n<r;n++){const i=this.polys[n].getGeom();i!==null&&t.push(i)}return t}_composePolys(t){const n=[];for(let r=0,i=t.length;r<i;r++){const o=t[r];if(!o.poly)if(o.isExteriorRing())n.push(new Vn(o));else{const a=o.enclosingRing();a.poly||n.push(new Vn(a)),a.poly.addInterior(o)}}return n}}class e1{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:nt.compare;this.queue=t,this.tree=new wn(n),this.segments=[]}process(t){const n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;const i=t.isLeft?this.tree.add(n):this.tree.find(n);if(!i)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let o=i,a=i,s,u;for(;s===void 0;)o=this.tree.prev(o),o===null?s=null:o.key.consumedBy===void 0&&(s=o.key);for(;u===void 0;)a=this.tree.next(a),a===null?u=null:a.key.consumedBy===void 0&&(u=a.key);if(t.isLeft){let f=null;if(s){const c=s.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(f=c),!s.isAnEndpoint(c))){const l=this._splitSafely(s,c);for(let p=0,g=l.length;p<g;p++)r.push(l[p])}}let h=null;if(u){const c=u.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(h=c),!u.isAnEndpoint(c))){const l=this._splitSafely(u,c);for(let p=0,g=l.length;p<g;p++)r.push(l[p])}}if(f!==null||h!==null){let c=null;f===null?c=h:h===null?c=f:c=$.comparePoints(f,h)<=0?f:h,this.queue.remove(n.rightSE),r.push(n.rightSE);const l=n.split(c);for(let p=0,g=l.length;p<g;p++)r.push(l[p])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=s)}else{if(s&&u){const f=s.getIntersection(u);if(f!==null){if(!s.isAnEndpoint(f)){const h=this._splitSafely(s,f);for(let c=0,l=h.length;c<l;c++)r.push(h[c])}if(!u.isAnEndpoint(f)){const h=this._splitSafely(u,f);for(let c=0,l=h.length;c<l;c++)r.push(h[c])}}}this.tree.remove(n)}return r}_splitSafely(t,n){this.tree.remove(t);const r=t.rightSE;this.queue.remove(r);const i=t.split(n);return i.push(r),t.consumedBy===void 0&&this.tree.add(t),i}}const Jn=typeof process<"u"&&O0.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,n1=typeof process<"u"&&O0.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class r1{run(t,n,r){U.type=t,Rt.reset();const i=[new zn(n,!0)];for(let c=0,l=r.length;c<l;c++)i.push(new zn(r[c],!1));if(U.numMultiPolys=i.length,U.type==="difference"){const c=i[0];let l=1;for(;l<i.length;)Ie(i[l].bbox,c.bbox)!==null?l++:i.splice(l,1)}if(U.type==="intersection")for(let c=0,l=i.length;c<l;c++){const p=i[c];for(let g=c+1,v=i.length;g<v;g++)if(Ie(p.bbox,i[g].bbox)===null)return[]}const o=new wn($.compare);for(let c=0,l=i.length;c<l;c++){const p=i[c].getSweepEvents();for(let g=0,v=p.length;g<v;g++)if(o.insert(p[g]),o.size>Jn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const a=new e1(o);let s=o.size,u=o.pop();for(;u;){const c=u.key;if(o.size===s){const p=c.segment;throw new Error(`Unable to pop() ${c.isLeft?"left":"right"} SweepEvent [${c.point.x}, ${c.point.y}] from segment #${p.id} [${p.leftSE.point.x}, ${p.leftSE.point.y}] -> [${p.rightSE.point.x}, ${p.rightSE.point.y}] from queue.`)}if(o.size>Jn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(a.segments.length>n1)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const l=a.process(c);for(let p=0,g=l.length;p<g;p++){const v=l[p];v.consumedBy===void 0&&o.insert(v)}s=o.size,u=o.pop()}Rt.reset();const f=te.factory(a.segments);return new t1(f).getGeom()}}const U=new r1,i1=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U.run("union",e,n)},o1=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U.run("intersection",e,n)},s1=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U.run("xor",e,n)},a1=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return U.run("difference",e,n)};var u1={union:i1,intersection:o1,xor:s1,difference:a1};function l1(e,t,n){n===void 0&&(n={});var r=Cn(e),i=Cn(t),o=u1.intersection(r.coordinates,i.coordinates);return o.length===0?null:o.length===1?Ni(o[0],n.properties):Ri(o,n.properties)}function f1(e,t){var n,r,i,o,a,s,u,f,h,c,l=0,p=e.type==="FeatureCollection",g=e.type==="Feature",v=p?e.features.length:1;for(n=0;n<v;n++){for(s=p?e.features[n].geometry:g?e.geometry:e,f=p?e.features[n].properties:g?e.properties:{},h=p?e.features[n].bbox:g?e.bbox:void 0,c=p?e.features[n].id:g?e.id:void 0,u=s?s.type==="GeometryCollection":!1,a=u?s.geometries.length:1,i=0;i<a;i++){if(o=u?s.geometries[i]:s,o===null){if(t(null,l,f,h,c)===!1)return!1;continue}switch(o.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(o,l,f,h,c)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<o.geometries.length;r++)if(t(o.geometries[r],l,f,h,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}l++}}function c1(e,t,n){var r=n;return f1(e,function(i,o,a,s,u){o===0&&n===void 0?r=i:r=t(r,i,o,a,s,u)}),r}var Yn=6378137;function J(e){return c1(e,function(t,n){return t+h1(n)},0)}function h1(e){var t=0,n;switch(e.type){case"Polygon":return Xn(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=Xn(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Xn(e){var t=0;if(e&&e.length>0){t+=Math.abs(Un(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(Un(e[n]))}return t}function Un(e){var t,n,r,i,o,a,s,u=0,f=e.length;if(f>2){for(s=0;s<f;s++)s===f-2?(i=f-2,o=f-1,a=0):s===f-1?(i=f-1,o=0,a=1):(i=s,o=s+1,a=s+2),t=e[i],n=e[o],r=e[a],u+=(ye(r[0])-ye(t[0]))*Math.sin(ye(n[1]));u=u*Yn*Yn/2}return u}function ye(e){return e*Math.PI/180}function N0(e){for(var t=-1,n=e.length,r,i=e[n-1],o=0;++t<n;)r=i,i=e[t],o+=r[1]*i[0]-r[0]*i[1];return o/2}function p1(e){for(var t=-1,n=e.length,r=0,i=0,o,a=e[n-1],s,u=0;++t<n;)o=a,a=e[t],u+=s=o[0]*a[1]-a[0]*o[1],r+=(o[0]+a[0])*s,i+=(o[1]+a[1])*s;return u*=3,[r/u,i/u]}function g1(e){for(var t=-1,n=e.length,r=e[n-1],i,o,a=r[0],s=r[1],u=0;++t<n;)i=a,o=s,r=e[t],a=r[0],s=r[1],i-=a,o-=s,u+=Math.sqrt(i*i+o*o);return u}var Yt={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},v1=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function y1(e){return e===10||e===13||e===8232||e===8233||e===32||e===9||e===11||e===12||e===160||e>=5760&&v1.indexOf(e)>=0}function d1(e){switch(e|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function m1(e){return(e|32)===97}function vt(e){return e>=48&&e<=57}function x1(e){return e>=48&&e<=57||e===43||e===45||e===46}function w1(e){this.index=0,this.path=e,this.max=e.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function Xt(e){for(;e.index<e.max&&y1(e.path.charCodeAt(e.index));)e.index++}function E1(e){var t=e.path.charCodeAt(e.index);if(t===48){e.param=0,e.index++;return}if(t===49){e.param=1,e.index++;return}e.err="SvgPath: arc flag can be 0 or 1 only (at pos "+e.index+")"}function M1(e){var t=e.index,n=t,r=e.max,i=!1,o=!1,a=!1,s=!1,u;if(n>=r){e.err="SvgPath: missed param (at pos "+n+")";return}if(u=e.path.charCodeAt(n),(u===43||u===45)&&(n++,u=n<r?e.path.charCodeAt(n):0),!vt(u)&&u!==46){e.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")";return}if(u!==46){if(i=u===48,n++,u=n<r?e.path.charCodeAt(n):0,i&&n<r&&u&&vt(u)){e.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+t+")";return}for(;n<r&&vt(e.path.charCodeAt(n));)n++,o=!0;u=n<r?e.path.charCodeAt(n):0}if(u===46){for(s=!0,n++;vt(e.path.charCodeAt(n));)n++,a=!0;u=n<r?e.path.charCodeAt(n):0}if(u===101||u===69){if(s&&!o&&!a){e.err="SvgPath: invalid float exponent (at pos "+n+")";return}if(n++,u=n<r?e.path.charCodeAt(n):0,(u===43||u===45)&&n++,n<r&&vt(e.path.charCodeAt(n)))for(;n<r&&vt(e.path.charCodeAt(n));)n++;else{e.err="SvgPath: invalid float exponent (at pos "+n+")";return}}e.index=n,e.param=parseFloat(e.path.slice(t,n))+0}function de(e){var t,n;t=e.path[e.segmentStart],n=t.toLowerCase();var r=e.data;if(n==="m"&&r.length>2&&(e.result.push([t,r[0],r[1]]),r=r.slice(2),n="l",t=t==="m"?"l":"L"),n==="r")e.result.push([t].concat(r));else for(;r.length>=Yt[n]&&(e.result.push([t].concat(r.splice(0,Yt[n]))),!!Yt[n]););}function _1(e){var t=e.max,n,r,i,o,a;if(e.segmentStart=e.index,n=e.path.charCodeAt(e.index),r=m1(n),!d1(n)){e.err="SvgPath: bad command "+e.path[e.index]+" (at pos "+e.index+")";return}if(o=Yt[e.path[e.index].toLowerCase()],e.index++,Xt(e),e.data=[],!o){de(e);return}for(i=!1;;){for(a=o;a>0;a--){if(r&&(a===3||a===4)?E1(e):M1(e),e.err.length){de(e);return}e.data.push(e.param),Xt(e),i=!1,e.index<t&&e.path.charCodeAt(e.index)===44&&(e.index++,Xt(e),i=!0)}if(!i&&(e.index>=e.max||!x1(e.path.charCodeAt(e.index))))break}de(e)}var S1=function(t){var n=new w1(t),r=n.max;for(Xt(n);n.index<r&&!n.err.length;)_1(n);return n.result.length&&("mM".indexOf(n.result[0][0])<0?(n.err="SvgPath: string should start with `M` or `m`",n.result=[]):n.result[0][0]="M"),{err:n.err,segments:n.result}};function P1(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}function W(){if(!(this instanceof W))return new W;this.queue=[],this.cache=null}W.prototype.matrix=function(e){return e[0]===1&&e[1]===0&&e[2]===0&&e[3]===1&&e[4]===0&&e[5]===0?this:(this.cache=null,this.queue.push(e),this)};W.prototype.translate=function(e,t){return(e!==0||t!==0)&&(this.cache=null,this.queue.push([1,0,0,1,e,t])),this};W.prototype.scale=function(e,t){return(e!==1||t!==1)&&(this.cache=null,this.queue.push([e,0,0,t,0,0])),this};W.prototype.rotate=function(e,t,n){var r,i,o;return e!==0&&(this.translate(t,n),r=e*Math.PI/180,i=Math.cos(r),o=Math.sin(r),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-t,-n)),this};W.prototype.skewX=function(e){return e!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(e*Math.PI/180),1,0,0])),this};W.prototype.skewY=function(e){return e!==0&&(this.cache=null,this.queue.push([1,Math.tan(e*Math.PI/180),0,1,0,0])),this};W.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var e=1;e<this.queue.length;e++)this.cache=P1(this.cache,this.queue[e]);return this.cache};W.prototype.calc=function(e,t,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[e*r[0]+t*r[2]+(n?0:r[4]),e*r[1]+t*r[3]+(n?0:r[5])]):[e,t]};var R0=W,A1=R0,b1={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},L1=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,I1=/[\s,]+/,O1=function(t){var n=new A1,r,i;return t.split(L1).forEach(function(o){if(o.length){if(typeof b1[o]<"u"){r=o;return}switch(i=o.split(I1).map(function(a){return+a||0}),r){case"matrix":i.length===6&&n.matrix(i);return;case"scale":i.length===1?n.scale(i[0],i[0]):i.length===2&&n.scale(i[0],i[1]);return;case"rotate":i.length===1?n.rotate(i[0],0,0):i.length===3&&n.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?n.translate(i[0],0):i.length===2&&n.translate(i[0],i[1]);return;case"skewX":i.length===1&&n.skewX(i[0]);return;case"skewY":i.length===1&&n.skewY(i[0]);return}}}),n},St=Math.PI*2;function Qn(e,t,n,r){var i=e*r-t*n<0?-1:1,o=e*n+t*r;return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)}function C1(e,t,n,r,i,o,a,s,u,f){var h=f*(e-n)/2+u*(t-r)/2,c=-u*(e-n)/2+f*(t-r)/2,l=a*a,p=s*s,g=h*h,v=c*c,y=l*p-l*v-p*g;y<0&&(y=0),y/=l*v+p*g,y=Math.sqrt(y)*(i===o?-1:1);var d=y*a/s*c,x=y*-s/a*h,S=f*d-u*x+(e+n)/2,E=u*d+f*x+(t+r)/2,w=(h-d)/a,M=(c-x)/s,b=(-h-d)/a,P=(-c-x)/s,O=Qn(1,0,w,M),A=Qn(w,M,b,P);return o===0&&A>0&&(A-=St),o===1&&A<0&&(A+=St),[S,E,O,A]}function N1(e,t){var n=1.3333333333333333*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}var R1=function(t,n,r,i,o,a,s,u,f){var h=Math.sin(f*St/360),c=Math.cos(f*St/360),l=c*(t-r)/2+h*(n-i)/2,p=-h*(t-r)/2+c*(n-i)/2;if(l===0&&p===0)return[];if(s===0||u===0)return[];s=Math.abs(s),u=Math.abs(u);var g=l*l/(s*s)+p*p/(u*u);g>1&&(s*=Math.sqrt(g),u*=Math.sqrt(g));var v=C1(t,n,r,i,o,a,s,u,h,c),y=[],d=v[2],x=v[3],S=Math.max(Math.ceil(Math.abs(x)/(St/4)),1);x/=S;for(var E=0;E<S;E++)y.push(N1(d,x)),d+=x;return y.map(function(w){for(var M=0;M<w.length;M+=2){var b=w[M+0],P=w[M+1];b*=s,P*=u;var O=c*b-h*P,A=h*b+c*P;w[M+0]=O+v[0],w[M+1]=A+v[1]}return w})},Pt=1e-10,Wn=Math.PI/180;function Ft(e,t,n){if(!(this instanceof Ft))return new Ft(e,t,n);this.rx=e,this.ry=t,this.ax=n}Ft.prototype.transform=function(e){var t=Math.cos(this.ax*Wn),n=Math.sin(this.ax*Wn),r=[this.rx*(e[0]*t+e[2]*n),this.rx*(e[1]*t+e[3]*n),this.ry*(-e[0]*n+e[2]*t),this.ry*(-e[1]*n+e[3]*t)],i=r[0]*r[0]+r[2]*r[2],o=r[1]*r[1]+r[3]*r[3],a=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),s=(i+o)/2;if(a<Pt*s)return this.rx=this.ry=Math.sqrt(s),this.ax=0,this;var u=r[0]*r[1]+r[2]*r[3];a=Math.sqrt(a);var f=s+a/2,h=s-a/2;return this.ax=Math.abs(u)<Pt&&Math.abs(f-o)<Pt?90:Math.atan(Math.abs(u)>Math.abs(f-o)?(f-i)/u:u/(f-o))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(f),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(f)),this};Ft.prototype.isDegenerate=function(){return this.rx<Pt*this.ry||this.ry<Pt*this.rx};var F1=Ft,T1=S1,q1=O1,ut=R0,k1=R1,D1=F1;function L(e){if(!(this instanceof L))return new L(e);var t=T1(e);this.segments=t.segments,this.err=t.err,this.__stack=[]}L.from=function(e){if(typeof e=="string")return new L(e);if(e instanceof L){var t=new L("");return t.err=e.err,t.segments=e.segments.map(function(n){return n.slice()}),t.__stack=e.__stack.map(function(n){return ut().matrix(n.toArray())}),t}throw new Error("SvgPath.from: invalid param type "+e)};L.prototype.__matrix=function(e){var t=this,n;e.queue.length&&this.iterate(function(r,i,o,a){var s,u,f,h;switch(r[0]){case"v":s=e.calc(0,r[1],!0),u=s[0]===0?["v",s[1]]:["l",s[0],s[1]];break;case"V":s=e.calc(o,r[1],!1),u=s[0]===e.calc(o,a,!1)[0]?["V",s[1]]:["L",s[0],s[1]];break;case"h":s=e.calc(r[1],0,!0),u=s[1]===0?["h",s[0]]:["l",s[0],s[1]];break;case"H":s=e.calc(r[1],a,!1),u=s[1]===e.calc(o,a,!1)[1]?["H",s[0]]:["L",s[0],s[1]];break;case"a":case"A":var c=e.toArray(),l=D1(r[1],r[2],r[3]).transform(c);if(c[0]*c[3]-c[1]*c[2]<0&&(r[5]=r[5]?"0":"1"),s=e.calc(r[6],r[7],r[0]==="a"),r[0]==="A"&&r[6]===o&&r[7]===a||r[0]==="a"&&r[6]===0&&r[7]===0){u=[r[0]==="a"?"l":"L",s[0],s[1]];break}l.isDegenerate()?u=[r[0]==="a"?"l":"L",s[0],s[1]]:u=[r[0],l.rx,l.ry,l.ax,r[4],r[5],s[0],s[1]];break;case"m":h=i>0,s=e.calc(r[1],r[2],h),u=["m",s[0],s[1]];break;default:for(f=r[0],u=[f],h=f.toLowerCase()===f,n=1;n<r.length;n+=2)s=e.calc(r[n],r[n+1],h),u.push(s[0],s[1])}t.segments[i]=u},!0)};L.prototype.__evaluateStack=function(){var e,t;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(e=ut(),t=this.__stack.length;--t>=0;)e.matrix(this.__stack[t].toArray());this.__matrix(e),this.__stack=[]}};L.prototype.toString=function(){var e="",t="",n=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var o=this.segments[r],a=o[0];a!==t||a==="m"||a==="M"?(a==="m"&&t==="z"&&(e+=" "),e+=a,n=!1):n=!0;for(var s=1;s<o.length;s++){var u=o[s];s===1?n&&u>=0&&(e+=" "):u>=0&&(e+=" "),e+=u}t=a}return e};L.prototype.translate=function(e,t){return this.__stack.push(ut().translate(e,t||0)),this};L.prototype.scale=function(e,t){return this.__stack.push(ut().scale(e,!t&&t!==0?e:t)),this};L.prototype.rotate=function(e,t,n){return this.__stack.push(ut().rotate(e,t||0,n||0)),this};L.prototype.skewX=function(e){return this.__stack.push(ut().skewX(e)),this};L.prototype.skewY=function(e){return this.__stack.push(ut().skewY(e)),this};L.prototype.matrix=function(e){return this.__stack.push(ut().matrix(e)),this};L.prototype.transform=function(e){return e.trim()?(this.__stack.push(q1(e)),this):this};L.prototype.round=function(e){var t=0,n=0,r=0,i=0,o;return e=e||0,this.__evaluateStack(),this.segments.forEach(function(a){var s=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":s&&(a[1]+=r),r=a[1]-a[1].toFixed(e),a[1]=+a[1].toFixed(e);return;case"V":case"v":s&&(a[1]+=i),i=a[1]-a[1].toFixed(e),a[1]=+a[1].toFixed(e);return;case"Z":case"z":r=t,i=n;return;case"M":case"m":s&&(a[1]+=r,a[2]+=i),r=a[1]-a[1].toFixed(e),i=a[2]-a[2].toFixed(e),t=r,n=i,a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e);return;case"A":case"a":s&&(a[6]+=r,a[7]+=i),r=a[6]-a[6].toFixed(e),i=a[7]-a[7].toFixed(e),a[1]=+a[1].toFixed(e),a[2]=+a[2].toFixed(e),a[3]=+a[3].toFixed(e+2),a[6]=+a[6].toFixed(e),a[7]=+a[7].toFixed(e);return;default:o=a.length,s&&(a[o-2]+=r,a[o-1]+=i),r=a[o-2]-a[o-2].toFixed(e),i=a[o-1]-a[o-1].toFixed(e),a.forEach(function(u,f){f&&(a[f]=+a[f].toFixed(e))});return}}),this};L.prototype.iterate=function(e,t){var n=this.segments,r={},i=!1,o=0,a=0,s=0,u=0,f,h,c;if(t||this.__evaluateStack(),n.forEach(function(l,p){var g=e(l,p,o,a);Array.isArray(g)&&(r[p]=g,i=!0);var v=l[0]===l[0].toLowerCase();switch(l[0]){case"m":case"M":o=l[1]+(v?o:0),a=l[2]+(v?a:0),s=o,u=a;return;case"h":case"H":o=l[1]+(v?o:0);return;case"v":case"V":a=l[1]+(v?a:0);return;case"z":case"Z":o=s,a=u;return;default:o=l[l.length-2]+(v?o:0),a=l[l.length-1]+(v?a:0)}}),!i)return this;for(c=[],f=0;f<n.length;f++)if(typeof r[f]<"u")for(h=0;h<r[f].length;h++)c.push(r[f][h]);else c.push(n[f]);return this.segments=c,this};L.prototype.abs=function(){return this.iterate(function(e,t,n,r){var i=e[0],o=i.toUpperCase(),a;if(i!==o)switch(e[0]=o,i){case"v":e[1]+=r;return;case"a":e[6]+=n,e[7]+=r;return;default:for(a=1;a<e.length;a++)e[a]+=a%2?n:r}},!0),this};L.prototype.rel=function(){return this.iterate(function(e,t,n,r){var i=e[0],o=i.toLowerCase(),a;if(i!==o&&!(t===0&&i==="M"))switch(e[0]=o,i){case"V":e[1]-=r;return;case"A":e[6]-=n,e[7]-=r;return;default:for(a=1;a<e.length;a++)e[a]-=a%2?n:r}},!0),this};L.prototype.unarc=function(){return this.iterate(function(e,t,n,r){var i,o,a,s=[],u=e[0];return u!=="A"&&u!=="a"?null:(u==="a"?(o=n+e[6],a=r+e[7]):(o=e[6],a=e[7]),i=k1(n,r,o,a,e[4],e[5],e[1],e[2],e[3]),i.length===0?[[e[0]==="a"?"l":"L",e[6],e[7]]]:(i.forEach(function(f){s.push(["C",f[2],f[3],f[4],f[5],f[6],f[7]])}),s))}),this};L.prototype.unshort=function(){var e=this.segments,t,n,r,i,o;return this.iterate(function(a,s,u,f){var h=a[0],c=h.toUpperCase(),l;s&&(c==="T"?(l=h==="t",r=e[s-1],r[0]==="Q"?(t=r[1]-u,n=r[2]-f):r[0]==="q"?(t=r[1]-r[3],n=r[2]-r[4]):(t=0,n=0),i=-t,o=-n,l||(i+=u,o+=f),e[s]=[l?"q":"Q",i,o,a[1],a[2]]):c==="S"&&(l=h==="s",r=e[s-1],r[0]==="C"?(t=r[3]-u,n=r[4]-f):r[0]==="c"?(t=r[3]-r[5],n=r[4]-r[6]):(t=0,n=0),i=-t,o=-n,l||(i+=u,o+=f),e[s]=[l?"c":"C",i,o,a[1],a[2],a[3],a[4]]))}),this};var B1=L,$1=B1;const G1=Q0($1);var me={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},z1=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function V1(e){var t=[];return e.replace(z1,function(n,r,i){var o=r.toLowerCase();for(i=Y1(i),o==="m"&&i.length>2&&(t.push([r].concat(i.splice(0,2))),o="l",r=r==="m"?"l":"L");i.length>=0;){if(i.length===me[o])return i.unshift(r),t.push(i);if(i.length<me[o])throw new Error("malformed path data");t.push([r].concat(i.splice(0,me[o])))}}),t}var J1=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function Y1(e){var t=e.match(J1);return t?t.map(Number):[]}function X(e,t,n,r,i,o,a,s){return new Oe(e,t,n,r,i,o,a,s)}function Oe(e,t,n,r,i,o,a,s){this.a={x:e,y:t},this.b={x:n,y:r},this.c={x:i,y:o},this.d={x:a,y:s},a!=null&&s!==null&&s!==void 0?(this.getArcLength=eo,this.getPoint=Q1,this.getDerivative=U1):(this.getArcLength=W1,this.getPoint=F0,this.getDerivative=X1),this.init()}Oe.prototype={constructor:Oe,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(e){var t=xe(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t)},getTangentAtLength:function(e){var t=xe(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),r=Math.sqrt(n.x*n.x+n.y*n.y),i;return r>0?i={x:n.x/r,y:n.y/r}:i={x:0,y:0},i},getPropertiesAtLength:function(e){var t=xe(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),r=Math.sqrt(n.x*n.x+n.y*n.y),i;r>0?i={x:n.x/r,y:n.y/r}:i={x:0,y:0};var o=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t);return{x:o.x,y:o.y,tangentX:i.x,tangentY:i.y}}};function X1(e,t,n){return{x:(1-n)*2*(e[1]-e[0])+n*2*(e[2]-e[1]),y:(1-n)*2*(t[1]-t[0])+n*2*(t[2]-t[1])}}function U1(e,t,n){var r=F0([3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],[3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],n);return r}function xe(e,t,n,r,i){for(var o=1,a=e/t,s=(e-n(r,i,a))/t;o>.001;){var u=n(r,i,a+s),f=n(r,i,a-s),h=Math.abs(e-u)/t,c=Math.abs(e-f)/t;h<o?(o=h,a+=s):c<o?(o=c,a-=s):s/=2}return a}function F0(e,t,n){var r=(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2],i=(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2];return{x:r,y:i}}function Q1(e,t,n){var r=(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3],i=(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3];return{x:r,y:i}}function W1(e,t,n){n===void 0&&(n=1);var r=e[0]-2*e[1]+e[2],i=t[0]-2*t[1]+t[2],o=2*e[1]-2*e[0],a=2*t[1]-2*t[0],s=4*(r*r+i*i),u=4*(r*o+i*a),f=o*o+a*a;if(s===0)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));var h=u/(2*s),c=f/s,l=n+h,p=c-h*h;return Math.sqrt(s)/2*(l*Math.sqrt(l*l+p)-h*Math.sqrt(h*h+p)+p*Math.log(Math.abs((l+Math.sqrt(l*l+p))/(h+Math.sqrt(h*h+p)))))}var Z1=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],H1=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],K1=[[1],[1,1],[1,2,1],[1,3,3,1]];function j1(e,t){return K1[e][t]}function Ce(e,t,n){var r=n.length-1,i,o,a;if(r===0)return 0;if(e===0){for(o=0,a=0;a<=r;a++)o+=j1(r,a)*Math.pow(1-t,r-a)*Math.pow(t,a)*n[a];return o}else{for(i=new Array(r),a=0;a<r;a++)i[a]=r*(n[a+1]-n[a]);return Ce(e-1,t,i)}}function to(e,t,n){var r=Ce(1,n,e),i=Ce(1,n,t),o=r*r+i*i;return Math.sqrt(o)}function eo(e,t,n){var r,i,o,a;n===void 0&&(n=1);var s=20;for(r=n/2,i=0,o=0;o<s;o++)a=r*Z1[s][o]+r,i+=H1[s][o]*to(e,t,a);return r*i}var At=Math.PI*2;function Zn(e,t,n,r){var i=e*r-t*n<0?-1:1,o=e*n+t*r;return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)}function no(e,t,n,r,i,o,a,s,u,f){var h=f*(e-n)/2+u*(t-r)/2,c=-u*(e-n)/2+f*(t-r)/2,l=a*a,p=s*s,g=h*h,v=c*c,y=l*p-l*v-p*g;y<0&&(y=0),y/=l*v+p*g,y=Math.sqrt(y)*(i===o?-1:1);var d=y*a/s*c,x=y*-s/a*h,S=f*d-u*x+(e+n)/2,E=u*d+f*x+(t+r)/2,w=(h-d)/a,M=(c-x)/s,b=(-h-d)/a,P=(-c-x)/s,O=Zn(1,0,w,M),A=Zn(w,M,b,P);return o===0&&A>0&&(A-=At),o===1&&A<0&&(A+=At),[S,E,O,A]}function ro(e,t){var n=1.3333333333333333*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),o=Math.cos(e+t),a=Math.sin(e+t);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}function io(e,t,n,r,i,o,a,s,u){var f=Math.sin(i*At/360),h=Math.cos(i*At/360),c=h*(e-s)/2+f*(t-u)/2,l=-f*(e-s)/2+h*(t-u)/2;if(c===0&&l===0)return[];if(n===0||r===0)return[];n=Math.abs(n),r=Math.abs(r);var p=c*c/(n*n)+l*l/(r*r);p>1&&(n*=Math.sqrt(p),r*=Math.sqrt(p));var g=no(e,t,s,u,o,a,n,r,f,h),v=[],y=g[2],d=g[3],x=Math.max(Math.ceil(Math.abs(d)/(At/4)),1);d/=x;for(var S=0;S<x;S++)v.push(ro(y,d)),y+=d;return v.map(function(E){for(var w=0;w<E.length;w+=2){var M=E[w+0],b=E[w+1];M*=n,b*=r;var P=h*M-f*b,O=f*M+h*b;E[w+0]=P+g[0],E[w+1]=O+g[1]}return E})}function Hn(e,t,n,r,i,o,a,s,u){return new Ne(e,t,n,r,i,o,a,s,u)}function Ne(e,t,n,r,i,o,a,s,u){var f=0,h=[],c=[],l=io(e,t,n,r,i,o,a,s,u);l.forEach(function(p){var g=new X(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7]),v=g.getTotalLength();f+=v,h.push(v),c.push(g)}),this.length=f,this.partialLengths=h,this.curves=c}Ne.prototype={constructor:Ne,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(e){e<0?e=0:e>this.length&&(e=this.length);for(var t=this.partialLengths.length-1;this.partialLengths[t]>=e&&this.partialLengths[t]>0;)t--;t<this.partialLengths.length-1&&t++;for(var n=0,r=0;r<t;r++)n+=this.partialLengths[r];return this.curves[t].getPointAtLength(e-n)},getTangentAtLength:function(e){e<0?e=0:e>this.length&&(e=this.length);for(var t=this.partialLengths.length-1;this.partialLengths[t]>=e&&this.partialLengths[t]>0;)t--;t<this.partialLengths.length-1&&t++;for(var n=0,r=0;r<t;r++)n+=this.partialLengths[r];return this.curves[t].getTangentAtLength(e-n)},getPropertiesAtLength:function(e){var t=this.getTangentAtLength(e),n=this.getPointAtLength(e);return{x:n.x,y:n.y,tangentX:t.x,tangentY:t.y}}};function Y(e,t,n,r){return new $t(e,t,n,r)}function $t(e,t,n,r){this.x0=e,this.x1=t,this.y0=n,this.y1=r}$t.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))};$t.prototype.getPointAtLength=function(e){var t=e/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),n=(this.x1-this.x0)*t,r=(this.y1-this.y0)*t;return{x:this.x0+n,y:this.y0+r}};$t.prototype.getTangentAtLength=function(){var e=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/e,y:(this.y1-this.y0)/e}};$t.prototype.getPropertiesAtLength=function(e){var t=this.getPointAtLength(e),n=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:n.x,tangentY:n.y}};function oo(e){var t=0,n=[],r=[];function i(a){if(!a)return null;for(var s=V1(a),u=[0,0],f=[0,0],h,c,l=0;l<s.length;l++)s[l][0]==="M"?(u=[s[l][1],s[l][2]],c=[u[0],u[1]],r.push(null)):s[l][0]==="m"?(u=[s[l][1]+u[0],s[l][2]+u[1]],c=[u[0],u[1]],r.push(null)):s[l][0]==="L"?(t=t+Math.sqrt(Math.pow(u[0]-s[l][1],2)+Math.pow(u[1]-s[l][2],2)),r.push(new Y(u[0],s[l][1],u[1],s[l][2])),u=[s[l][1],s[l][2]]):s[l][0]==="l"?(t=t+Math.sqrt(Math.pow(s[l][1],2)+Math.pow(s[l][2],2)),r.push(new Y(u[0],s[l][1]+u[0],u[1],s[l][2]+u[1])),u=[s[l][1]+u[0],s[l][2]+u[1]]):s[l][0]==="H"?(t=t+Math.abs(u[0]-s[l][1]),r.push(new Y(u[0],s[l][1],u[1],u[1])),u[0]=s[l][1]):s[l][0]==="h"?(t=t+Math.abs(s[l][1]),r.push(new Y(u[0],u[0]+s[l][1],u[1],u[1])),u[0]=s[l][1]+u[0]):s[l][0]==="V"?(t=t+Math.abs(u[1]-s[l][1]),r.push(new Y(u[0],u[0],u[1],s[l][1])),u[1]=s[l][1]):s[l][0]==="v"?(t=t+Math.abs(s[l][1]),r.push(new Y(u[0],u[0],u[1],u[1]+s[l][1])),u[1]=s[l][1]+u[1]):s[l][0]==="z"||s[l][0]==="Z"?(t=t+Math.sqrt(Math.pow(c[0]-u[0],2)+Math.pow(c[1]-u[1],2)),r.push(new Y(u[0],c[0],u[1],c[1])),u=[c[0],c[1]]):s[l][0]==="C"?(h=new X(u[0],u[1],s[l][1],s[l][2],s[l][3],s[l][4],s[l][5],s[l][6]),t=t+h.getTotalLength(),u=[s[l][5],s[l][6]],r.push(h)):s[l][0]==="c"?(h=new X(u[0],u[1],u[0]+s[l][1],u[1]+s[l][2],u[0]+s[l][3],u[1]+s[l][4],u[0]+s[l][5],u[1]+s[l][6]),t=t+h.getTotalLength(),u=[s[l][5]+u[0],s[l][6]+u[1]],r.push(h)):s[l][0]==="S"?(l>0&&["C","c","S","s"].indexOf(s[l-1][0])>-1?h=new X(u[0],u[1],2*u[0]-s[l-1][s[l-1].length-4],2*u[1]-s[l-1][s[l-1].length-3],s[l][1],s[l][2],s[l][3],s[l][4]):h=new X(u[0],u[1],u[0],u[1],s[l][1],s[l][2],s[l][3],s[l][4]),t=t+h.getTotalLength(),u=[s[l][3],s[l][4]],r.push(h)):s[l][0]==="s"?(l>0&&["C","c","S","s"].indexOf(s[l-1][0])>-1?h=new X(u[0],u[1],u[0]+h.d.x-h.c.x,u[1]+h.d.y-h.c.y,u[0]+s[l][1],u[1]+s[l][2],u[0]+s[l][3],u[1]+s[l][4]):h=new X(u[0],u[1],u[0],u[1],u[0]+s[l][1],u[1]+s[l][2],u[0]+s[l][3],u[1]+s[l][4]),t=t+h.getTotalLength(),u=[s[l][3]+u[0],s[l][4]+u[1]],r.push(h)):s[l][0]==="Q"?(u[0]!=s[l][1]&&u[1]!=s[l][2]?h=new X(u[0],u[1],s[l][1],s[l][2],s[l][3],s[l][4]):h=new Y(s[l][1],s[l][3],s[l][2],s[l][4]),t=t+h.getTotalLength(),r.push(h),u=[s[l][3],s[l][4]],f=[s[l][1],s[l][2]]):s[l][0]==="q"?(s[l][1]==0&&s[l][2]==0?h=new Y(u[0]+s[l][1],u[0]+s[l][3],u[1]+s[l][2],u[1]+s[l][4]):h=new X(u[0],u[1],u[0]+s[l][1],u[1]+s[l][2],u[0]+s[l][3],u[1]+s[l][4]),t=t+h.getTotalLength(),f=[u[0]+s[l][1],u[1]+s[l][2]],u=[s[l][3]+u[0],s[l][4]+u[1]],r.push(h)):s[l][0]==="T"?(l>0&&["Q","q","T","t"].indexOf(s[l-1][0])>-1?h=new X(u[0],u[1],2*u[0]-f[0],2*u[1]-f[1],s[l][1],s[l][2]):h=new Y(u[0],s[l][1],u[1],s[l][2]),r.push(h),t=t+h.getTotalLength(),f=[2*u[0]-f[0],2*u[1]-f[1]],u=[s[l][1],s[l][2]]):s[l][0]==="t"?(l>0&&["Q","q","T","t"].indexOf(s[l-1][0])>-1?h=new X(u[0],u[1],2*u[0]-f[0],2*u[1]-f[1],u[0]+s[l][1],u[1]+s[l][2]):h=new Y(u[0],u[0]+s[l][1],u[1],u[1]+s[l][2]),t=t+h.getTotalLength(),f=[2*u[0]-f[0],2*u[1]-f[1]],u=[s[l][1]+u[0],s[l][2]+u[0]],r.push(h)):s[l][0]==="A"?(h=new Hn(u[0],u[1],s[l][1],s[l][2],s[l][3],s[l][4],s[l][5],s[l][6],s[l][7]),t=t+h.getTotalLength(),u=[s[l][6],s[l][7]],r.push(h)):s[l][0]==="a"&&(h=new Hn(u[0],u[1],s[l][1],s[l][2],s[l][3],s[l][4],s[l][5],u[0]+s[l][6],u[1]+s[l][7]),t=t+h.getTotalLength(),u=[u[0]+s[l][6],u[1]+s[l][7]],r.push(h)),n.push(t);return i}i.getTotalLength=function(){return t},i.getPointAtLength=function(a){var s=o(a);return r[s.i].getPointAtLength(s.fraction)},i.getTangentAtLength=function(a){var s=o(a);return r[s.i].getTangentAtLength(s.fraction)},i.getPropertiesAtLength=function(a){var s=o(a);return r[s.i].getPropertiesAtLength(s.fraction)};var o=function(a){a<0?a=0:a>t&&(a=t);for(var s=n.length-1;n[s]>=a&&n[s]>0;)s--;return s++,{fraction:a-n[s-1],i:s}};return i(e)}function Gt(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function T0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function so(e,t){return Gt(e,t)<1e-9}function ao(e,t,n){let r=e.map((i,o)=>uo(i,t[o]));return function(i){let o=r.map(a=>a(i));return n?po(o):o}}function uo(e,t){return function(n){return e.map((r,i)=>r+n*(t[i]-r))}}function ee(e){return typeof e=="number"&&isFinite(e)}function Kn(e){return lo(e)?p1(e):[(e[0][0]+e[e.length-1][0])/2,(e[0][1]+e[e.length-1][1])/2]}function lo(e){for(let t=0;t<e.length-2;t++){let n=e[t],r=e[t+1],i=e[t+2];if(n[0]*(r[1]-i[1])+r[0]*(i[1]-n[1])+i[0]*(n[1]-r[1]))return!0}return!1}const Re=`All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).
Example valid ways of supplying a shape would be:
[[0, 0], [10, 0], [10, 10]]
"M0,0 L10,0 L10,10Z"
`,fo="flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).";function co(e){return new G1(e).abs()}function ho(e){return e.toString().split("M").map((t,n)=>(t=t.trim(),n&&t?"M"+t:t)).filter(t=>t)}function po(e){return"M"+e.join("L")+"Z"}function go(e,t){let n=co(e);return vo(n)||yo(n,t)}function vo(e){let t=e.segments||[],n=[];if(!t.length||t[0][0]!=="M")return!1;for(let r=0;r<t.length;r++){let[i,o,a]=t[r];if(i==="M"&&r||i==="Z")break;if(i==="M"||i==="L")n.push([o,a]);else if(i==="H")n.push([o,n[n.length-1][1]]);else if(i==="V")n.push([n[n.length-1][0],o]);else return!1}return n.length?{ring:n}:!1}function yo(e,t){let n=ho(e)[0],r=[],i,o,a=3;if(!n)throw new TypeError(Re);o=mo(n),i=o.getTotalLength(),t&&ee(t)&&t>0&&(a=Math.max(a,Math.ceil(i/t)));for(let s=0;s<a;s++){let u=o.getPointAtLength(i*s/a);r.push([u.x,u.y])}return{ring:r,skipBisect:!0}}function mo(e){if(typeof window<"u"&&window&&window.document)try{let t=window.document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttributeNS(null,"d",e),t}catch{}return oo(e)}function Fe(e,t){const n=e.length+t,r=g1(e)/t;let i=0,o=0,a=r/2;for(;e.length<n;){let s=e[i],u=e[(i+1)%e.length],f=Gt(s,u);if(a<=o+f){e.splice(i+1,0,f?T0(s,u,(a-o)/f):s.slice(0)),a+=r;continue}o+=f,i++}}function xo(e,t=1/0){for(let n=0;n<e.length;n++){let r=e[n],i=n===e.length-1?e[0]:e[n+1];for(;Gt(r,i)>t;)i=T0(r,i,.5),e.splice(n+1,0,i)}}function Tt(e,t){let n,r,i;if(typeof e=="string"){let o=go(e,t);e=o.ring,i=o.skipBisect}else if(!Array.isArray(e))throw new TypeError(Re);if(n=e.slice(0),!wo(n))throw new TypeError(Re);return n.length>1&&so(n[0],n[n.length-1])&&n.pop(),r=N0(n),r>0&&n.reverse(),!i&&t&&ee(t)&&t>0&&xo(n,t),n}function wo(e){return e.every(function(t){return Array.isArray(t)&&t.length>=2&&ee(t[0])&&ee(t[1])})}function Eo(e,t){let n=e.length,r=1/0,i,o,a;for(let s=0;s<n;s++)o=0,t.forEach(function(u,f){let h=Gt(e[(s+f)%n],u);o+=h*h}),o<r&&(r=o,i=s);i&&(a=e.splice(0,i),e.splice(e.length,0,...a))}function Mo(e,t,{maxSegmentLength:n=10,string:r=!0}={}){let i=Tt(e,n),o=Tt(t,n),a=q0(i,o,r);return!r||typeof e!="string"&&typeof t!="string"?a:s=>s<1e-4&&typeof e=="string"?e:1-s<1e-4&&typeof t=="string"?t:a(s)}function q0(e,t,n){let r;return r=e.length-t.length,Fe(e,r<0?r*-1:0),Fe(t,r>0?r:0),Eo(e,t),ao(e,t,n)}function _o(e){return e}function So(e){if(e==null)return _o;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,u){u||(t=n=0);var f=2,h=s.length,c=new Array(h);for(c[0]=(t+=s[0])*r+o,c[1]=(n+=s[1])*i+a;f<h;)c[f]=s[f],++f;return c}}function Po(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function Ao(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return jn(e,n)})}:jn(e,t)}function jn(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=k0(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function k0(e,t){var n=So(e.transform),r=e.arcs;function i(h,c){c.length&&c.pop();for(var l=r[h<0?~h:h],p=0,g=l.length;p<g;++p)c.push(n(l[p],p));h<0&&Po(c,g)}function o(h){return n(h)}function a(h){for(var c=[],l=0,p=h.length;l<p;++l)i(h[l],c);return c.length<2&&c.push(c[0]),c}function s(h){for(var c=a(h);c.length<4;)c.push(c[0]);return c}function u(h){return h.map(s)}function f(h){var c=h.type,l;switch(c){case"GeometryCollection":return{type:c,geometries:h.geometries.map(f)};case"Point":l=o(h.coordinates);break;case"MultiPoint":l=h.coordinates.map(o);break;case"LineString":l=a(h.arcs);break;case"MultiLineString":l=h.arcs.map(a);break;case"Polygon":l=u(h.arcs);break;case"MultiPolygon":l=h.arcs.map(u);break;default:return null}return{type:c,coordinates:l}}return f(t)}function bo(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(f,h){var c=e.arcs[f<0?~f:f],l;c.length<3&&!c[1][0]&&!c[1][1]&&(l=t[++a],t[a]=f,t[h]=l)}),t.forEach(function(f){var h=s(f),c=h[0],l=h[1],p,g;if(p=i[c])if(delete i[p.end],p.push(f),p.end=l,g=r[l]){delete r[g.start];var v=g===p?p:p.concat(g);r[v.start=p.start]=i[v.end=g.end]=v}else r[p.start]=i[p.end]=p;else if(p=r[l])if(delete r[p.start],p.unshift(f),p.start=c,g=i[c]){delete i[g.end];var y=g===p?p:g.concat(p);r[y.start=g.start]=i[y.end=p.end]=y}else r[p.start]=i[p.end]=p;else p=[f],r[p.start=c]=i[p.end=l]=p});function s(f){var h=e.arcs[f<0?~f:f],c=h[0],l;return e.transform?(l=[0,0],h.forEach(function(p){l[0]+=p[0],l[1]+=p[1]})):l=h[h.length-1],f<0?[l,c]:[c,l]}function u(f,h){for(var c in f){var l=f[c];delete h[l.start],delete l.start,delete l.end,l.forEach(function(p){n[p<0?~p:p]=1}),o.push(l)}}return u(i,r),u(r,i),t.forEach(function(f){n[f<0?~f:f]||o.push([f])}),o}function Lo(e){for(var t=-1,n=e.length,r,i=e[n-1],o=0;++t<n;)r=i,i=e[t],o+=r[0]*i[1]-r[1]*i[0];return Math.abs(o)}function Io(e,t){var n={},r=[],i=[];t.forEach(o);function o(u){switch(u.type){case"GeometryCollection":u.geometries.forEach(o);break;case"Polygon":a(u.arcs);break;case"MultiPolygon":u.arcs.forEach(a);break}}function a(u){u.forEach(function(f){f.forEach(function(h){(n[h=h<0?~h:h]||(n[h]=[])).push(u)})}),r.push(u)}function s(u){return Lo(k0(e,{type:"Polygon",arcs:[u]}).coordinates[0])}return r.forEach(function(u){if(!u._){var f=[],h=[u];for(u._=1,i.push(f);u=h.pop();)f.push(u),u.forEach(function(c){c.forEach(function(l){n[l<0?~l:l].forEach(function(p){p._||(p._=1,h.push(p))})})})}}),r.forEach(function(u){delete u._}),{type:"MultiPolygon",arcs:i.map(function(u){var f=[],h;if(u.forEach(function(v){v.forEach(function(y){y.forEach(function(d){n[d<0?~d:d].length<2&&f.push(d)})})}),f=bo(e,f),(h=f.length)>1)for(var c=1,l=s(f[0]),p,g;c<h;++c)(p=s(f[c]))>l&&(g=f[0],f[0]=f[c],f[c]=g,l=p);return f}).filter(function(u){return u.length>0})}}function tr(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n}function Oo(e){var t={},n=e.map(function(){return[]});function r(v,y){v.forEach(function(d){d<0&&(d=~d);var x=t[d];x?x.push(y):t[d]=[y]})}function i(v,y){v.forEach(function(d){r(d,y)})}function o(v,y){v.type==="GeometryCollection"?v.geometries.forEach(function(d){o(d,y)}):v.type in a&&a[v.type](v.arcs,y)}var a={LineString:r,MultiLineString:i,Polygon:i,MultiPolygon:function(v,y){v.forEach(function(d){i(d,y)})}};e.forEach(o);for(var s in t)for(var u=t[s],f=u.length,h=0;h<f;++h)for(var c=h+1;c<f;++c){var l=u[h],p=u[c],g;(g=n[l])[s=tr(g,p)]!==p&&g.splice(s,0,p),(g=n[p])[s=tr(g,l)]!==l&&g.splice(s,0,l)}return n}function D0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function B0(e){return e.length===1&&(e=Co(e)),{left:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function Co(e){return function(t,n){return D0(e(t),n)}}B0(D0);function No(e,t){const n={},r={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return e.forEach(function(i){const o=[];i.forEach(function(a,s){const u=a[0]<a[1]?a.join(","):a[1]+","+a[0],f=a.map(function(h){return t[h]});u in n?o.push(~n[u]):(o.push(n[u]=r.arcs.length),r.arcs.push(f))}),r.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(N0(i.map(function(a){return t[a[0]]}))),arcs:[o]})}),r.objects.triangles.geometries.sort((i,o)=>i.area-o.area),r}function Ro(e,t){const n=e.objects.triangles.geometries,r=B0(o=>o.area).left;for(;n.length>t;)i();if(t>n.length)throw new RangeError("Can't collapse topology into "+t+" pieces.");return Ao(e,e.objects.triangles).features.map(o=>(o.geometry.coordinates[0].pop(),o.geometry.coordinates[0]));function i(){const o=n[0],a=Oo(n)[0][0],s=n[a],u=Io(e,[o,s]);u.area=o.area+s.area,u.type="Polygon",u.arcs=u.arcs[0],n.splice(a,1),n.shift(),n.splice(r(n,u.area),0,u)}}function Fo(e,t){return Ro(No(To(e),e),t)}function To(e){let t=Z0(e.reduce((r,i)=>[...r,i[0],i[1]],[])),n=[];for(let r=0,i=t.length;r<i;r+=3)n.push([[t[r],t[r+1]],[t[r+1],t[r+2]],[t[r+2],t[r]]]);return n}function qo(e,t){if(e.length>8)return e.map((r,i)=>i);let n=e.map(r=>t.map(i=>Do(r,i)));return ko(e,t,n)}function ko(e,t,n){let r=1/0,i=e.map((a,s)=>s);function o(a,s=[],u=0){for(let f=0;f<a.length;f++){let h=a.splice(f,1),c=n[h[0]][s.length];u+c<r&&(a.length?o(a.slice(),s.concat(h),u+c):(r=u+c,i=s.concat(h))),a.length&&a.splice(f,0,h[0])}}return o(i),i}function Do(e,t){let n=Gt(Kn(e),Kn(t));return n*n}function $0(e,t,{maxSegmentLength:n=10,string:r=!0,single:i=!1}={}){let o=Tt(e,n);o.length<t.length+2&&Fe(o,t.length+2-o.length);let a=Fo(o,t.length),s=t.map(h=>Tt(h,n)),u=typeof e=="string"&&e,f;return(!i||t.every(h=>typeof h=="string"))&&(f=t.slice(0)),G0(a,s,{match:!0,string:r,single:i,t0:u,t1:f})}function Bo(e,t,{maxSegmentLength:n=10,string:r=!0,single:i=!1}={}){let o=$0(t,e,{maxSegmentLength:n,string:r,single:i});return i?a=>o(1-a):o.map(a=>s=>a(1-s))}function $o(e,t,{maxSegmentLength:n=10,string:r=!0,single:i=!1}={}){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length||!e.length)throw new TypeError(fo);let o=h=>Tt(h,n),a=e.map(o),s=t.map(o),u,f;return i?(e.every(h=>typeof h=="string")&&(u=e.slice(0)),t.every(h=>typeof h=="string")&&(f=t.slice(0))):(u=e.slice(0),f=t.slice(0)),G0(a,s,{string:r,single:i,t0:u,t1:f,match:!1})}function G0(e,t,{string:n,single:r,t0:i,t1:o,match:a}={}){let s=a?qo(e,t):e.map((f,h)=>h),u=s.map((f,h)=>q0(e[f],t[h],n));if(a&&Array.isArray(i)&&(i=s.map(f=>i[f])),r&&n&&(Array.isArray(i)&&(i=i.join(" ")),Array.isArray(o)&&(o=o.join(" "))),r){let f=n?h=>u.map(c=>c(h)).join(" "):h=>u.map(c=>c(h));return n&&(i||o)?h=>h<1e-4&&i||1-h<1e-4&&o||f(h):f}else if(n)return i=Array.isArray(i)?i.map(f=>typeof f=="string"&&f):[],o=Array.isArray(o)?o.map(f=>typeof f=="string"&&f):[],u.map((f,h)=>i[h]||o[h]?c=>c<1e-4&&i[h]||1-c<1e-4&&o[h]||f(c):f);return u}class Go{constructor(t,n,r=350){Z(this,"waitDuration",75);Z(this,"morphDuration",0);Z(this,"startTime");Z(this,"interpolator");Z(this,"canceled",!1);const i=l1(t,n),o=i?J(i):0,a=J(n),s=J(t),u=.99;(o/a<u||o/s<u)&&(this.morphDuration=Math.min(Math.max(1-o/s,1-o/a)*25e3,r)),this.startTime=+new Date;const f=Se.toArray(n.geometry),h=Se.toArray(t.geometry);let c=null,l=null;n.geometry.type==="MultiPolygon"&&(c=f.sort((p,g)=>J({type:"Polygon",coordinates:[g]})-J({type:"Polygon",coordinates:[p]}))),t.geometry.type==="MultiPolygon"&&(l=h.sort((p,g)=>J({type:"Polygon",coordinates:[g]})-J({type:"Polygon",coordinates:[p]}))),c&&l&&c.length===l.length?this.interpolator=$o(c,l,{string:!1,single:!0,match:!0}):n.geometry.type==="Polygon"&&t.geometry.type==="MultiPolygon"?this.interpolator=$0(f,l,{string:!1,single:!0}):n.geometry.type==="MultiPolygon"&&t.geometry.type==="Polygon"?this.interpolator=Bo(c,h,{string:!1,single:!0}):this.interpolator=Mo(n.geometry.type==="MultiPolygon"?n.geometry.coordinates.sort((p,g)=>J({type:"Polygon",coordinates:g})-J({type:"Polygon",coordinates:p}))[0][0]:n.geometry.coordinates[0],t.geometry.type==="MultiPolygon"?t.geometry.coordinates.sort((p,g)=>J({type:"Polygon",coordinates:g})-J({type:"Polygon",coordinates:p}))[0][0]:t.geometry.coordinates[0],{string:!1})}cancel(){this.canceled=!0}}class zo{constructor(t,n){Z(this,"source");Z(this,"sourceLoaded",!1);Z(this,"morphOption");Z(this,"feature");this.source=t,this.morphOption=Object.assign({maxDuration:350},n)}async morph(t){if(this.sourceLoaded||(this.feature=await this.initSource(this.source)),!this.feature){this.feature=t,this.source.setData(t);return}const n=this.feature,r=t;this.feature=t;const i=new Go(r,n,this.morphOption.maxDuration),o=()=>{if(i.canceled)return;const a=+new Date-i.startTime;let s;if(a<=i.waitDuration)s=Math.min(a/i.waitDuration,1),window.requestAnimationFrame(o);else if(i.morphDuration>0&&a-i.waitDuration<=i.morphDuration){s=Math.min((a-i.waitDuration)/i.morphDuration,1);const u=i.interpolator(s);let f;u[0][0][0]?f={type:"Feature",properties:n.properties,geometry:Se.toGeoJSON([u],"MultiPolygon")}:f={type:"Feature",properties:n.properties,geometry:{type:"Polygon",coordinates:[u]}},this.source.setData(f),window.requestAnimationFrame(o)}else this.source.setData(t)};o()}async initSource(t){const n=t._data;let r;typeof n=="string"?r=await(await fetch(n)).json():r=n;let i;if(r.type==="FeatureCollection")if(r.features.length===1)i=r.features[0];else{this.sourceLoaded=!0;return}else i=r;if(i.geometry.type==="Polygon"||i.geometry.type==="MultiPolygon")return this.sourceLoaded=!0,i;throw new Error("The type of feature must be 'Polygon' or 'MultiPolygon'.")}}const Vo=H0({__name:"polygon-morpher",setup(e,{expose:t}){t();const n={center:[-73.950543,40.7611],zoom:11};let r,i,o=0;const u={mapOptions:n,get features(){return r},set features(f){r=f},get polygonMorpher(){return i},set polygonMorpher(f){i=f},get index(){return o},set index(f){o=f},morph:f=>{o+=f,o<0&&(o=r.length+o),i&&r.length>0&&i.morph(r[o%r.length])},handleMapLoaded:f=>{f.addSource("geojson-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),f.addLayer({id:"poly-layer",type:"fill",source:"geojson-source",paint:{"fill-color":"rgba(152, 224, 173, 0.5)"}},"aeroway-line"),f.addLayer({id:"line-layer",type:"line",source:"geojson-source",layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":3,"line-color":"rgba(255, 178, 125, 1)"}});const h=f.getSource("geojson-source");i=new zo(h),fetch(K0("/data/ny.geojson")).then(c=>c.json()).then(c=>{r=c.features,i.morph(r[o])})},BaseMap:W0};return Object.defineProperty(u,"__isScriptSetup",{enumerable:!1,value:!0}),u}}),Jo={class:"control"};function Yo(e,t,n,r,i,o){return ti(),ei(r.BaseMap,{"map-options":r.mapOptions,onLoad:r.handleMapLoaded},{default:ni(()=>[he("div",Jo,[he("span",{class:"control-item",onClick:t[0]||(t[0]=a=>r.morph(-1))},"上一个"),he("span",{class:"control-item",onClick:t[1]||(t[1]=a=>r.morph(1))},"下一个")])]),_:1})}const Zo=j0(Vo,[["render",Yo],["__file","polygon-morpher.vue"]]);export{Zo as default};
