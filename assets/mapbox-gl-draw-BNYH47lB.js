import{g as Ue}from"./base-map-CxlE6ySX.js";const le=function(e,t){const n={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},r={on(i,s,u){if(n[i]===void 0)throw new Error(`Invalid event type: ${i}`);n[i].push({selector:s,fn:u})},render(i){t.store.featureChanged(i)}},o=function(i,s){const u=n[i];let c=u.length;for(;c--;){const d=u[c];if(d.selector(s)){d.fn.call(r,s)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(r),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(i){o("drag",i)},click(i){o("click",i)},mousemove(i){o("mousemove",i)},mousedown(i){o("mousedown",i)},mouseup(i){o("mouseup",i)},mouseout(i){o("mouseout",i)},keydown(i){o("keydown",i)},keyup(i){o("keyup",i)},touchstart(i){o("touchstart",i)},touchmove(i){o("touchmove",i)},touchend(i){o("touchend",i)},tap(i){o("tap",i)}}};var me={},te={};te.RADIUS=6378137;te.FLATTENING=1/298.257223563;te.POLAR_RADIUS=63567523142e-4;var Le=te;me.geometry=ke;me.ring=de;function ke(e){var t=0,n;switch(e.type){case"Polygon":return Ne(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=Ne(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)t+=ke(e.geometries[n]);return t}}function Ne(e){var t=0;if(e&&e.length>0){t+=Math.abs(de(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(de(e[n]))}return t}function de(e){var t,n,r,o,i,s,u,c=0,d=e.length;if(d>2){for(u=0;u<d;u++)u===d-2?(o=d-2,i=d-1,s=0):u===d-1?(o=d-1,i=0,s=1):(o=u,i=u+1,s=u+2),t=e[o],n=e[i],r=e[s],c+=(ue(r[0])-ue(t[0]))*Math.sin(ue(n[1]));c=c*Le.RADIUS*Le.RADIUS/2}return c}function ue(e){return e*Math.PI/180}const v={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},b={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},C={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},A={POLYGON:"polygon",LINE:"line_string",POINT:"point"},f={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},g={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},L={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},q={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},O={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},S={ACTIVE:"true",INACTIVE:"false"},Ve=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],Qe=-90,fe=-85,je=90,pe=85,et=-270,tt=270,xe=Object.freeze(Object.defineProperty({__proto__:null,LAT_MAX:je,LAT_MIN:Qe,LAT_RENDERED_MAX:pe,LAT_RENDERED_MIN:fe,LNG_MAX:tt,LNG_MIN:et,activeStates:S,classes:v,cursors:C,events:L,geojsonTypes:f,interactions:Ve,meta:O,modes:g,sources:b,types:A,updateActions:q},Symbol.toStringTag,{value:"Module"})),ve={Point:0,LineString:1,MultiLineString:1,Polygon:2};function nt(e,t){const n=ve[e.geometry.type]-ve[t.geometry.type];return n===0&&e.geometry.type===f.POLYGON?e.area-t.area:n}function Ge(e){return e.map(t=>(t.geometry.type===f.POLYGON&&(t.area=me.geometry({type:f.FEATURE,property:{},geometry:t.geometry})),t)).sort(nt).map(t=>(delete t.area,t))}function Be(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}function F(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,n=e.length;t<n;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}F.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};F.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};F.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};F.prototype.values=function(){const e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,n)=>t.v-n.v).map(t=>t.k)};F.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};const ot=[O.FEATURE,O.MIDPOINT,O.VERTEX],$={click:rt,touch:it};function rt(e,t,n){return $e(e,t,n,n.options.clickBuffer)}function it(e,t,n){return $e(e,t,n,n.options.touchBuffer)}function $e(e,t,n,r){if(n.map===null)return[];const o=e?Be(e,r):t,i={};n.options.styles&&(i.layers=n.options.styles.map(d=>d.id).filter(d=>n.map.getLayer(d)!=null));const s=n.map.queryRenderedFeatures(o,i).filter(d=>ot.indexOf(d.properties.meta)!==-1),u=new F,c=[];return s.forEach(d=>{const m=d.properties.id;u.has(m)||(u.add(m),c.push(d))}),Ge(c)}function Q(e,t){const n=$.click(e,null,t),r={mouse:C.NONE};return n[0]&&(r.mouse=n[0].properties.active===S.ACTIVE?C.MOVE:C.POINTER,r.feature=n[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(r.mouse=C.ADD),t.ui.queueMapClasses(r),t.ui.updateMapClasses(),n[0]}function ye(e,t){const n=e.x-t.x,r=e.y-t.y;return Math.sqrt(n*n+r*r)}const st=4,at=12,ut=500;function he(e,t,n={}){const r=n.fineTolerance!=null?n.fineTolerance:st,o=n.grossTolerance!=null?n.grossTolerance:at,i=n.interval!=null?n.interval:ut;e.point=e.point||t.point,e.time=e.time||t.time;const s=ye(e.point,t.point);return s<r||s<o&&t.time-e.time<i}const ct=25,lt=250;function ge(e,t,n={}){const r=n.tolerance!=null?n.tolerance:ct,o=n.interval!=null?n.interval:lt;return e.point=e.point||t.point,e.time=e.time||t.time,ye(e.point,t.point)<r&&t.time-e.time<o}let dt=(e,t=21)=>(n=t)=>{let r="",o=n|0;for(;o--;)r+=e[Math.random()*e.length|0];return r};const ft=dt("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function Ee(){return ft()}const N=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||Ee(),this.type=t.geometry.type};N.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};N.prototype.incomingCoords=function(e){this.setCoordinates(e)};N.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};N.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};N.prototype.setProperty=function(e,t){this.properties[e]=t};N.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:f.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};N.prototype.internal=function(e){const t={id:this.id,meta:O.FEATURE,"meta:type":this.type,active:S.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(const n in this.properties)t[`user_${n}`]=this.properties[n];return{type:f.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};const G=function(e,t){N.call(this,e,t)};G.prototype=Object.create(N.prototype);G.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};G.prototype.updateCoordinate=function(e,t,n){arguments.length===3?this.coordinates=[t,n]:this.coordinates=[e,t],this.changed()};G.prototype.getCoordinate=function(){return this.getCoordinates()};const V=function(e,t){N.call(this,e,t)};V.prototype=Object.create(N.prototype);V.prototype.isValid=function(){return this.coordinates.length>1};V.prototype.addCoordinate=function(e,t,n){this.changed();const r=parseInt(e,10);this.coordinates.splice(r,0,[t,n])};V.prototype.getCoordinate=function(e){const t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};V.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};V.prototype.updateCoordinate=function(e,t,n){const r=parseInt(e,10);this.coordinates[r]=[t,n],this.changed()};const P=function(e,t){N.call(this,e,t),this.coordinates=this.coordinates.map(n=>n.slice(0,-1))};P.prototype=Object.create(N.prototype);P.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};P.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};P.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};P.prototype.addCoordinate=function(e,t,n){this.changed();const r=e.split(".").map(i=>parseInt(i,10));this.coordinates[r[0]].splice(r[1],0,[t,n])};P.prototype.removeCoordinate=function(e){this.changed();const t=e.split(".").map(r=>parseInt(r,10)),n=this.coordinates[t[0]];n&&(n.splice(t[1],1),n.length<3&&this.coordinates.splice(t[0],1))};P.prototype.getCoordinate=function(e){const t=e.split(".").map(r=>parseInt(r,10)),n=this.coordinates[t[0]];return JSON.parse(JSON.stringify(n[t[1]]))};P.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};P.prototype.updateCoordinate=function(e,t,n){this.changed();const r=e.split("."),o=parseInt(r[0],10),i=parseInt(r[1],10);this.coordinates[o]===void 0&&(this.coordinates[o]=[]),this.coordinates[o][i]=[t,n]};const pt={MultiPoint:G,MultiLineString:V,MultiPolygon:P},ne=(e,t,n,r,o)=>{const i=n.split("."),s=parseInt(i[0],10),u=i[1]?i.slice(1).join("."):null;return e[s][t](u,r,o)},M=function(e,t){if(N.call(this,e,t),delete this.coordinates,this.model=pt[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};M.prototype=Object.create(N.prototype);M.prototype._coordinatesToFeatures=function(e){const t=this.model.bind(this);return e.map(n=>new t(this.ctx,{id:Ee(),type:f.FEATURE,properties:{},geometry:{coordinates:n,type:this.type.replace("Multi","")}}))};M.prototype.isValid=function(){return this.features.every(e=>e.isValid())};M.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};M.prototype.getCoordinate=function(e){return ne(this.features,"getCoordinate",e)};M.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===f.POLYGON?e.getCoordinates():e.coordinates)))};M.prototype.updateCoordinate=function(e,t,n){ne(this.features,"updateCoordinate",e,t,n),this.changed()};M.prototype.addCoordinate=function(e,t,n){ne(this.features,"addCoordinate",e,t,n),this.changed()};M.prototype.removeCoordinate=function(e){ne(this.features,"removeCoordinate",e),this.changed()};M.prototype.getFeatures=function(){return this.features};function h(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}h.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};h.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,n)=>(t[n.feature_id]===void 0&&(t[n.feature_id]=!0,this._ctx.store.get(n.feature_id).changed()),t),{})};h.prototype.getSelected=function(){return this._ctx.store.getSelected()};h.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};h.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};h.prototype.getFeature=function(e){return this._ctx.store.get(e)};h.prototype.select=function(e){return this._ctx.store.select(e)};h.prototype.deselect=function(e){return this._ctx.store.deselect(e)};h.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};h.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};h.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};h.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};h.prototype.setActionableState=function(e={}){const t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};h.prototype.changeMode=function(e,t={},n={}){return this._ctx.events.changeMode(e,t,n)};h.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};h.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};h.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};h.prototype.featuresAt=function(e,t,n="click"){if(n!=="click"&&n!=="touch")throw new Error("invalid buffer type");return $[n](e,t,this._ctx)};h.prototype.newFeature=function(e){const t=e.geometry.type;return t===f.POINT?new G(this._ctx,e):t===f.LINE_STRING?new V(this._ctx,e):t===f.POLYGON?new P(this._ctx,e):new M(this._ctx,e)};h.prototype.isInstanceOf=function(e,t){if(e===f.POINT)return t instanceof G;if(e===f.LINE_STRING)return t instanceof V;if(e===f.POLYGON)return t instanceof P;if(e==="MultiFeature")return t instanceof M;throw new Error(`Unknown feature class: ${e}`)};h.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};h.prototype.onSetup=function(){};h.prototype.onDrag=function(){};h.prototype.onClick=function(){};h.prototype.onMouseMove=function(){};h.prototype.onMouseDown=function(){};h.prototype.onMouseUp=function(){};h.prototype.onMouseOut=function(){};h.prototype.onKeyUp=function(){};h.prototype.onKeyDown=function(){};h.prototype.onTouchStart=function(){};h.prototype.onTouchMove=function(){};h.prototype.onTouchEnd=function(){};h.prototype.onTap=function(){};h.prototype.onStop=function(){};h.prototype.onTrash=function(){};h.prototype.onCombineFeature=function(){};h.prototype.onUncombineFeature=function(){};h.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};const Je={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},ht=Object.keys(Je);function gt(e){const t=Object.keys(e);return function(n,r={}){let o={};const i=t.reduce((u,c)=>(u[c]=e[c],u),new h(n));function s(u){return c=>i[u](o,c)}return{start(){o=i.onSetup(r),ht.forEach(u=>{const c=Je[u];let d=()=>!1;e[c]&&(d=()=>!0),this.on(u,d,s(c))})},stop(){i.onStop(o)},trash(){i.onTrash(o)},combineFeatures(){i.onCombineFeatures(o)},uncombineFeatures(){i.onUncombineFeatures(o)},render(u,c){i.toDisplayFeatures(o,u,c)}}}}function mt(e){const t=Object.keys(e.options.modes).reduce((a,l)=>(a[l]=gt(e.options.modes[l]),a),{});let n={},r={};const o={};let i=null,s=null;o.drag=function(a,l){l({point:a.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:C.DRAG}),s.drag(a)):a.originalEvent.stopPropagation()},o.mousedrag=function(a){o.drag(a,l=>!he(n,l))},o.touchdrag=function(a){o.drag(a,l=>!ge(r,l))},o.mousemove=function(a){if((a.originalEvent.buttons!==void 0?a.originalEvent.buttons:a.originalEvent.which)===1)return o.mousedrag(a);const p=Q(a,e);a.featureTarget=p,s.mousemove(a)},o.mousedown=function(a){n={time:new Date().getTime(),point:a.point};const l=Q(a,e);a.featureTarget=l,s.mousedown(a)},o.mouseup=function(a){const l=Q(a,e);a.featureTarget=l,he(n,{point:a.point,time:new Date().getTime()})?s.click(a):s.mouseup(a)},o.mouseout=function(a){s.mouseout(a)},o.touchstart=function(a){if(!e.options.touchEnabled)return;r={time:new Date().getTime(),point:a.point};const l=$.touch(a,null,e)[0];a.featureTarget=l,s.touchstart(a)},o.touchmove=function(a){if(e.options.touchEnabled)return s.touchmove(a),o.touchdrag(a)},o.touchend=function(a){if(a.originalEvent.preventDefault(),!e.options.touchEnabled)return;const l=$.touch(a,null,e)[0];a.featureTarget=l,ge(r,{time:new Date().getTime(),point:a.point})?s.tap(a):s.touchend(a)};const u=a=>!(a===8||a===46||a>=48&&a<=57);o.keydown=function(a){(a.srcElement||a.target).classList.contains(v.CANVAS)&&((a.keyCode===8||a.keyCode===46)&&e.options.controls.trash?(a.preventDefault(),s.trash()):u(a.keyCode)?s.keydown(a):a.keyCode===49&&e.options.controls.point?c(g.DRAW_POINT):a.keyCode===50&&e.options.controls.line_string?c(g.DRAW_LINE_STRING):a.keyCode===51&&e.options.controls.polygon&&c(g.DRAW_POLYGON))},o.keyup=function(a){u(a.keyCode)&&s.keyup(a)},o.zoomend=function(){e.store.changeZoom()},o.data=function(a){if(a.dataType==="style"){const{setup:l,map:p,options:I,store:R}=e;I.styles.some(K=>p.getLayer(K.id))||(l.addLayers(),R.setDirty(),R.render())}};function c(a,l,p={}){s.stop();const I=t[a];if(I===void 0)throw new Error(`${a} is not valid`);i=a;const R=I(e,l);s=le(R,e),p.silent||e.map.fire(L.MODE_CHANGE,{mode:a}),e.store.setDirty(),e.store.render()}const d={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function m(a){let l=!1;Object.keys(a).forEach(p=>{if(d[p]===void 0)throw new Error("Invalid action type");d[p]!==a[p]&&(l=!0),d[p]=a[p]}),l&&e.map.fire(L.ACTIONABLE,{actions:d})}return{start(){i=e.options.defaultMode,s=le(t[i](e),e)},changeMode:c,actionable:m,currentModeName(){return i},currentModeRender(a,l){return s.render(a,l)},fire(a,l){e.map&&e.map.fire(a,l)},addEventListeners(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash(a){s.trash(a)},combineFeatures(){s.combineFeatures()},uncombineFeatures(){s.uncombineFeatures()},getMode(){return i}}}function H(e){return[].concat(e).filter(t=>t!==void 0)}function yt(){const e=this;if(!(e.ctx.map&&e.ctx.map.getSource(b.HOT)!==void 0))return c();const n=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:n});let r=[],o=[];e.isDirty?o=e.getAllIds():(r=e.getChangedIds().filter(d=>e.get(d)!==void 0),o=e.sources.hot.filter(d=>d.properties.id&&r.indexOf(d.properties.id)===-1&&e.get(d.properties.id)!==void 0).map(d=>d.properties.id)),e.sources.hot=[];const i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(d=>{const m=d.properties.id||d.properties.parent;return r.indexOf(m)===-1});const s=i!==e.sources.cold.length||o.length>0;r.forEach(d=>u(d,"hot")),o.forEach(d=>u(d,"cold"));function u(d,m){const a=e.get(d).internal(n);e.ctx.events.currentModeRender(a,l=>{l.properties.mode=n,e.sources[m].push(l)})}s&&e.ctx.map.getSource(b.COLD).setData({type:f.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(b.HOT).setData({type:f.FEATURE_COLLECTION,features:e.sources.hot}),c();function c(){e.isDirty=!1,e.clearChangedIds()}}function T(e){this._features={},this._featureIds=new F,this._selectedFeatureIds=new F,this._selectedCoordinates=[],this._changedFeatureIds=new F,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,yt.call(this),this._emitSelectionChange&&(this.ctx.events.fire(L.SELECTION_CHANGE,{features:this.getSelected().map(n=>n.toGeoJSON()),points:this.getSelectedCoordinates().map(n=>({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:n.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(L.RENDER,{})}))},this.isDirty=!1}T.prototype.createRenderBatch=function(){const e=this.render;let t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};T.prototype.setDirty=function(){return this.isDirty=!0,this};T.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){const r=this.get(e);this.ctx.events.fire(L.CREATE,{features:[r.toGeoJSON()]})}return this};T.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(L.UPDATE,{action:t.action?t.action:q.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};T.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};T.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};T.prototype.getAllIds=function(){return this._featureIds.values()};T.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};T.prototype.delete=function(e,t={}){const n=[];return H(e).forEach(r=>{this._featureIds.has(r)&&(this._featureIds.delete(r),this._selectedFeatureIds.delete(r),t.silent||n.indexOf(this._features[r])===-1&&n.push(this._features[r].toGeoJSON()),delete this._features[r],this.isDirty=!0)}),n.length&&this.ctx.events.fire(L.DELETE,{features:n}),Ye(this,t),this};T.prototype.get=function(e){return this._features[e]};T.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};T.prototype.select=function(e,t={}){return H(e).forEach(n=>{this._selectedFeatureIds.has(n)||(this._selectedFeatureIds.add(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),this};T.prototype.deselect=function(e,t={}){return H(e).forEach(n=>{this._selectedFeatureIds.has(n)&&(this._selectedFeatureIds.delete(n),this._changedFeatureIds.add(n),t.silent||(this._emitSelectionChange=!0))}),Ye(this,t),this};T.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};T.prototype.setSelected=function(e,t={}){return e=H(e),this.deselect(this._selectedFeatureIds.values().filter(n=>e.indexOf(n)===-1),{silent:t.silent}),this.select(e.filter(n=>!this._selectedFeatureIds.has(n)),{silent:t.silent}),this};T.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};T.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};T.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};T.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};T.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};T.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};T.prototype.setFeatureProperty=function(e,t,n,r={}){this.get(e).setProperty(t,n),this.featureChanged(e,{silent:r.silent,action:q.CHANGE_PROPERTIES})};function Ye(e,t={}){const n=e._selectedCoordinates.filter(r=>e._selectedFeatureIds.has(r.feature_id));e._selectedCoordinates.length!==n.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=n}T.prototype.storeMapConfig=function(){Ve.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};T.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};T.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};const Et=["mode","feature","mouse"];function Tt(e){const t={};let n=null,r={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function i(){s({mode:null,feature:null,mouse:null}),u()}function s(l){o=Object.assign(o,l)}function u(){if(!e.container)return;const l=[],p=[];Et.forEach(I=>{o[I]!==r[I]&&(l.push(`${I}-${r[I]}`),o[I]!==null&&p.push(`${I}-${o[I]}`))}),l.length>0&&e.container.classList.remove(...l),p.length>0&&e.container.classList.add(...p),r=Object.assign(r,o)}function c(l,p={}){const I=document.createElement("button");return I.className=`${v.CONTROL_BUTTON} ${p.className}`,I.setAttribute("title",p.title),p.container.appendChild(I),I.addEventListener("click",R=>{if(R.preventDefault(),R.stopPropagation(),R.target===n){d(),p.onDeactivate();return}m(l),p.onActivate()},!0),I}function d(){n&&(n.classList.remove(v.ACTIVE_BUTTON),n=null)}function m(l){d();const p=t[l];p&&p&&l!=="trash"&&(p.classList.add(v.ACTIVE_BUTTON),n=p)}function _(){const l=e.options.controls,p=document.createElement("div");return p.className=`${v.CONTROL_GROUP} ${v.CONTROL_BASE}`,l&&(l[A.LINE]&&(t[A.LINE]=c(A.LINE,{container:p,className:v.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(g.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),l[A.POLYGON]&&(t[A.POLYGON]=c(A.POLYGON,{container:p,className:v.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(g.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),l[A.POINT]&&(t[A.POINT]=c(A.POINT,{container:p,className:v.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(g.DRAW_POINT),onDeactivate:()=>e.events.trash()})),l.trash&&(t.trash=c("trash",{container:p,className:v.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),l.combine_features&&(t.combine_features=c("combineFeatures",{container:p,className:v.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),l.uncombine_features&&(t.uncombine_features=c("uncombineFeatures",{container:p,className:v.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),p}function a(){Object.keys(t).forEach(l=>{const p=t[l];p.parentNode&&p.parentNode.removeChild(p),delete t[l]})}return{setActiveButton:m,queueMapClasses:s,updateMapClasses:u,clearMapClasses:i,addButtons:_,removeButtons:a}}function Ct(e){let t=null,n=null;const r={onRemove(){return e.map.off("load",r.connect),clearInterval(n),r.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",r.connect),clearInterval(n),r.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(o){if(e.map=o,e.events=mt(e),e.ui=Tt(e),e.container=o.getContainer(),e.store=new T(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=o.boxZoom.isEnabled(),o.boxZoom.disable();const i=o.dragPan.isEnabled();o.dragPan.disable(),o.dragPan.enable(),i||o.dragPan.disable()}return o.loaded()?r.connect():(o.on("load",r.connect),n=setInterval(()=>{o.loaded()&&r.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(b.COLD,{data:{type:f.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(b.HOT,{data:{type:f.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(o=>{e.map.addLayer(o)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(o=>{e.map.getLayer(o.id)&&e.map.removeLayer(o.id)}),e.map.getSource(b.COLD)&&e.map.removeSource(b.COLD),e.map.getSource(b.HOT)&&e.map.removeSource(b.HOT)}};return e.setup=r,r}const ce="#3bb2d0",X="#fbb03b",Ae="#fff",Xe=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],X,ce],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],X,ce],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Ae}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],X,ce]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Ae}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":X}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":X}}];function oe(e){return function(t){const n=t.featureTarget;return!n||!n.properties?!1:n.properties.meta===e}}function qe(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function B(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===S.ACTIVE&&e.featureTarget.properties.meta===O.FEATURE}function Te(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===S.INACTIVE&&e.featureTarget.properties.meta===O.FEATURE}function re(e){return e.featureTarget===void 0}function Ce(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===O.FEATURE}function Z(e){const t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===O.VERTEX}function j(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function ie(e){return e.keyCode===27}function se(e){return e.keyCode===13}function It(){return!0}const St=Object.freeze(Object.defineProperty({__proto__:null,isActiveFeature:B,isEnterKey:se,isEscapeKey:ie,isFeature:Ce,isInactiveFeature:Te,isOfMetaType:oe,isShiftDown:j,isShiftMousedown:qe,isTrue:It,isVertex:Z,noTarget:re},Symbol.toStringTag,{value:"Module"}));function x(e,t){this.x=e,this.y=t}x.prototype={clone(){return new x(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){const t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){const t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){const e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){const t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,o=n*this.x+t*this.y;return this.x=r,this.y=o,this},_rotateAround(e,t){const n=Math.cos(e),r=Math.sin(e),o=t.x+n*(this.x-t.x)-r*(this.y-t.y),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=o,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:x};x.convert=function(e){if(e instanceof x)return e;if(Array.isArray(e))return new x(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new x(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function Ie(e,t){const n=t.getBoundingClientRect();return new x(e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0))}function J(e,t,n,r){return{type:f.FEATURE,properties:{meta:O.VERTEX,parent:e,coord_path:n,active:r?S.ACTIVE:S.INACTIVE},geometry:{type:f.POINT,coordinates:t}}}function He(e,t,n){const r=t.geometry.coordinates,o=n.geometry.coordinates;if(r[1]>pe||r[1]<fe||o[1]>pe||o[1]<fe)return null;const i={lng:(r[0]+o[0])/2,lat:(r[1]+o[1])/2};return{type:f.FEATURE,properties:{meta:O.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:n.properties.coord_path},geometry:{type:f.POINT,coordinates:[i.lng,i.lat]}}}function ae(e,t={},n=null){const{type:r,coordinates:o}=e.geometry,i=e.properties&&e.properties.id;let s=[];r===f.POINT?s.push(J(i,o,n,c(n))):r===f.POLYGON?o.forEach((m,_)=>{u(m,n!==null?`${n}.${_}`:String(_))}):r===f.LINE_STRING?u(o,n):r.indexOf(f.MULTI_PREFIX)===0&&d();function u(m,_){let a="",l=null;m.forEach((p,I)=>{const R=_!=null?`${_}.${I}`:String(I),Y=J(i,p,R,c(R));if(t.midpoints&&l){const Me=He(i,l,Y);Me&&s.push(Me)}l=Y;const K=JSON.stringify(p);a!==K&&s.push(Y),I===0&&(a=K)})}function c(m){return t.selectedPaths?t.selectedPaths.indexOf(m)!==-1:!1}function d(){const m=r.replace(f.MULTI_PREFIX,"");o.forEach((_,a)=>{const l={type:f.FEATURE,properties:e.properties,geometry:{type:m,coordinates:_}};s=s.concat(ae(l,t,a))})}return s}const w={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}},{LAT_MIN:W,LAT_MAX:z,LAT_RENDERED_MIN:Pe,LAT_RENDERED_MAX:be,LNG_MIN:Fe,LNG_MAX:Re}=xe;function _t(e){const t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],n=[e.geometry.coordinates].flat(t),r=n.map(u=>u[0]),o=n.map(u=>u[1]),i=u=>Math.min.apply(null,u),s=u=>Math.max.apply(null,u);return[i(r),i(o),s(r),s(o)]}function Se(e,t){let n=W,r=z,o=W,i=z,s=Re,u=Fe;e.forEach(d=>{const m=_t(d),_=m[1],a=m[3],l=m[0],p=m[2];_>n&&(n=_),a<r&&(r=a),a>o&&(o=a),_<i&&(i=_),l<s&&(s=l),p>u&&(u=p)});const c=t;return n+c.lat>be&&(c.lat=be-n),o+c.lat>z&&(c.lat=z-o),r+c.lat<Pe&&(c.lat=Pe-r),i+c.lat<W&&(c.lat=W-i),s+c.lng<=Fe&&(c.lng+=Math.ceil(Math.abs(c.lng)/360)*360),u+c.lng>=Re&&(c.lng-=Math.ceil(Math.abs(c.lng)/360)*360),c}function _e(e,t){const n=Se(e.map(r=>r.toGeoJSON()),t);e.forEach(r=>{const o=r.getCoordinates(),i=d=>{const m={lng:d[0]+n.lng,lat:d[1]+n.lat};return[m.lng,m.lat]},s=d=>d.map(m=>i(m)),u=d=>d.map(m=>s(m));let c;r.type===f.POINT?c=i(o):r.type===f.LINE_STRING||r.type===f.MULTI_POINT?c=o.map(i):r.type===f.POLYGON||r.type===f.MULTI_LINE_STRING?c=o.map(s):r.type===f.MULTI_POLYGON&&(c=o.map(u)),r.incomingCoords(c)})}const y={};y.onSetup=function(e){const t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(n=>this.getFeature(n)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};y.fireUpdate=function(){this.fire(L.UPDATE,{action:q.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};y.fireActionable=function(){const e=this.getSelected(),t=e.filter(i=>this.isInstanceOf("MultiFeature",i));let n=!1;if(e.length>1){n=!0;const i=e[0].type.replace("Multi","");e.forEach(s=>{s.type.replace("Multi","")!==i&&(n=!1)})}const r=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:n,uncombineFeatures:r,trash:o})};y.getUniqueIds=function(e){return e.length?e.map(n=>n.properties.id).filter(n=>n!==void 0).reduce((n,r)=>(n.add(r),n),new F).values():[]};y.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};y.onStop=function(){w.enable(this)};y.onMouseMove=function(e,t){return Ce(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};y.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};y.onTap=y.onClick=function(e,t){if(re(t))return this.clickAnywhere(e,t);if(oe(O.VERTEX)(t))return this.clickOnVertex(e,t);if(Ce(t))return this.clickOnFeature(e,t)};y.clickAnywhere=function(e){const t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(n=>this.doRender(n))),w.enable(this),this.stopExtendedInteractions(e)};y.clickOnVertex=function(e,t){this.changeMode(g.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:C.MOVE})};y.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};y.clickOnFeature=function(e,t){w.disable(this),this.stopExtendedInteractions(e);const n=j(t),r=this.getSelectedIds(),o=t.featureTarget.properties.id,i=this.isSelected(o);if(!n&&i&&this.getFeature(o).type!==f.POINT)return this.changeMode(g.DIRECT_SELECT,{featureId:o});i&&n?(this.deselect(o),this.updateUIClasses({mouse:C.POINTER}),r.length===1&&w.enable(this)):!i&&n?(this.select(o),this.updateUIClasses({mouse:C.MOVE})):!i&&!n&&(r.forEach(s=>this.doRender(s)),this.setSelected(o),this.updateUIClasses({mouse:C.MOVE})),this.doRender(o)};y.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),B(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&qe(t))return this.startBoxSelect(e,t)};y.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=Ie(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};y.onTouchStart=function(e,t){if(B(t))return this.startOnActiveFeature(e,t)};y.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};y.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:C.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(v.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));const n=Ie(t.originalEvent,this.map.getContainer()),r=Math.min(e.boxSelectStartLocation.x,n.x),o=Math.max(e.boxSelectStartLocation.x,n.x),i=Math.min(e.boxSelectStartLocation.y,n.y),s=Math.max(e.boxSelectStartLocation.y,n.y),u=`translate(${r}px, ${i}px)`;e.boxSelectElement.style.transform=u,e.boxSelectElement.style.WebkitTransform=u,e.boxSelectElement.style.width=`${o-r}px`,e.boxSelectElement.style.height=`${s-i}px`};y.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};_e(this.getSelected(),n),e.dragMoveLocation=t.lngLat};y.onTouchEnd=y.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){const n=[e.boxSelectStartLocation,Ie(t.originalEvent,this.map.getContainer())],r=this.featuresAt(null,n,"click"),o=this.getUniqueIds(r).filter(i=>!this.isSelected(i));o.length&&(this.select(o),o.forEach(i=>this.doRender(i)),this.updateUIClasses({mouse:C.MOVE}))}this.stopExtendedInteractions(e)};y.toDisplayFeatures=function(e,t,n){t.properties.active=this.isSelected(t.properties.id)?S.ACTIVE:S.INACTIVE,n(t),this.fireActionable(),!(t.properties.active!==S.ACTIVE||t.geometry.type===f.POINT)&&ae(t).forEach(n)};y.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};y.onCombineFeatures=function(){const e=this.getSelected();if(e.length===0||e.length<2)return;const t=[],n=[],r=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){const i=e[o];if(i.type.replace("Multi","")!==r)return;i.type.includes("Multi")?i.getCoordinates().forEach(s=>{t.push(s)}):t.push(i.getCoordinates()),n.push(i.toGeoJSON())}if(n.length>1){const o=this.newFeature({type:f.FEATURE,properties:n[0].properties,geometry:{type:`Multi${r}`,coordinates:t}});this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.fire(L.COMBINE_FEATURES,{createdFeatures:[o.toGeoJSON()],deletedFeatures:n})}this.fireActionable()};y.onUncombineFeatures=function(){const e=this.getSelected();if(e.length===0)return;const t=[],n=[];for(let r=0;r<e.length;r++){const o=e[r];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(i=>{this.addFeature(i),i.properties=o.properties,t.push(i.toGeoJSON()),this.select([i.id])}),this.deleteFeature(o.id,{silent:!0}),n.push(o.toGeoJSON()))}t.length>1&&this.fire(L.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:n}),this.fireActionable()};const Ze=oe(O.VERTEX),Ke=oe(O.MIDPOINT),E={};E.fireUpdate=function(){this.fire(L.UPDATE,{action:q.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};E.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};E.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};E.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};E.onVertex=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties,r=e.selectedCoordPaths.indexOf(n.coord_path);!j(t)&&r===-1?e.selectedCoordPaths=[n.coord_path]:j(t)&&r===-1&&e.selectedCoordPaths.push(n.coord_path);const o=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(o)};E.onMidpoint=function(e,t){this.startDragging(e,t);const n=t.featureTarget.properties;e.feature.addCoordinate(n.coord_path,n.lng,n.lat),this.fireUpdate(),e.selectedCoordPaths=[n.coord_path]};E.pathsToCoordinates=function(e,t){return t.map(n=>({feature_id:e,coord_path:n}))};E.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};E.dragFeature=function(e,t,n){_e(this.getSelected(),n),e.dragMoveLocation=t.lngLat};E.dragVertex=function(e,t,n){const r=e.selectedCoordPaths.map(s=>e.feature.getCoordinate(s)),o=r.map(s=>({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:s}})),i=Se(o,n);for(let s=0;s<r.length;s++){const u=r[s];e.feature.updateCoordinate(e.selectedCoordPaths[s],u[0]+i.lng,u[1]+i.lat)}};E.clickNoTarget=function(){this.changeMode(g.SIMPLE_SELECT)};E.clickInactive=function(){this.changeMode(g.SIMPLE_SELECT)};E.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};E.onSetup=function(e){const t=e.featureId,n=this.getFeature(t);if(!n)throw new Error("You must provide a featureId to enter direct_select mode");if(n.type===f.POINT)throw new TypeError("direct_select mode doesn't handle point features");const r={featureId:t,feature:n,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,r.selectedCoordPaths)),this.setSelected(t),w.disable(this),this.setActionableState({trash:!0}),r};E.onStop=function(){w.enable(this),this.clearSelectedCoordinates()};E.toDisplayFeatures=function(e,t,n){e.featureId===t.properties.id?(t.properties.active=S.ACTIVE,n(t),ae(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(n)):(t.properties.active=S.INACTIVE,n(t)),this.fireActionable(e)};E.onTrash=function(e){e.selectedCoordPaths.sort((t,n)=>n.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(g.SIMPLE_SELECT,{}))};E.onMouseMove=function(e,t){const n=B(t),r=Ze(t),o=Ke(t),i=e.selectedCoordPaths.length===0;return n&&i?this.updateUIClasses({mouse:C.MOVE}):r&&!i?this.updateUIClasses({mouse:C.MOVE}):this.updateUIClasses({mouse:C.NONE}),(r||n||o)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};E.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};E.onTouchStart=E.onMouseDown=function(e,t){if(Ze(t))return this.onVertex(e,t);if(B(t))return this.onFeature(e,t);if(Ke(t))return this.onMidpoint(e,t)};E.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();const n={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,n):this.dragFeature(e,t,n),e.dragMoveLocation=t.lngLat};E.onClick=function(e,t){if(re(t))return this.clickNoTarget(e,t);if(B(t))return this.clickActiveFeature(e,t);if(Te(t))return this.clickInactive(e,t);this.stopDragging(e)};E.onTap=function(e,t){if(re(t))return this.clickNoTarget(e,t);if(B(t))return this.clickActiveFeature(e,t);if(Te(t))return this.clickInactive(e,t)};E.onTouchEnd=E.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};const k={};k.onSetup=function(){const e=this.newFeature({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:C.ADD}),this.activateUIButton(A.POINT),this.setActionableState({trash:!0}),{point:e}};k.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(g.SIMPLE_SELECT)};k.onTap=k.onClick=function(e,t){this.updateUIClasses({mouse:C.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(L.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(g.SIMPLE_SELECT,{featureIds:[e.point.id]})};k.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};k.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.point.id;if(t.properties.active=r?S.ACTIVE:S.INACTIVE,!r)return n(t)};k.onTrash=k.stopDrawingAndRemove;k.onKeyUp=function(e,t){if(ie(t)||se(t))return this.stopDrawingAndRemove(e,t)};function ee(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}const D={};D.onSetup=function(){const e=this.newFeature({type:f.FEATURE,properties:{},geometry:{type:f.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),w.disable(this),this.updateUIClasses({mouse:C.ADD}),this.activateUIButton(A.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};D.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&ee(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(g.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:C.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};D.clickOnVertex=function(e){return this.changeMode(g.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};D.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),Z(t)&&this.updateUIClasses({mouse:C.POINTER})};D.onTap=D.onClick=function(e,t){return Z(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};D.onKeyUp=function(e,t){ie(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(g.SIMPLE_SELECT)):se(t)&&this.changeMode(g.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};D.onStop=function(e){this.updateUIClasses({mouse:C.NONE}),w.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(L.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(g.SIMPLE_SELECT,{},{silent:!0})))};D.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.polygon.id;if(t.properties.active=r?S.ACTIVE:S.INACTIVE,!r)return n(t);if(t.geometry.coordinates.length===0)return;const o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=O.FEATURE,n(J(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){const i=t.geometry.coordinates[0].length-3;n(J(e.polygon.id,t.geometry.coordinates[0][i],`0.${i}`,!1))}if(o<=4){const i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(n({type:f.FEATURE,properties:t.properties,geometry:{coordinates:i,type:f.LINE_STRING}}),o===3)return}return n(t)}};D.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(g.SIMPLE_SELECT)};const U={};U.onSetup=function(e){e=e||{};const t=e.featureId;let n,r,o="forward";if(t){if(n=this.getFeature(t),!n)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");const s=n.coordinates.length-1;if(n.coordinates[s][0]===i[0]&&n.coordinates[s][1]===i[1])r=s+1,n.addCoordinate(r,...n.coordinates[s]);else if(n.coordinates[0][0]===i[0]&&n.coordinates[0][1]===i[1])o="backwards",r=0,n.addCoordinate(r,...n.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else n=this.newFeature({type:f.FEATURE,properties:{},geometry:{type:f.LINE_STRING,coordinates:[]}}),r=0,this.addFeature(n);return this.clearSelectedFeatures(),w.disable(this),this.updateUIClasses({mouse:C.ADD}),this.activateUIButton(A.LINE),this.setActionableState({trash:!0}),{line:n,currentVertexPosition:r,direction:o}};U.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&ee(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&ee(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(g.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:C.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};U.clickOnVertex=function(e){return this.changeMode(g.SIMPLE_SELECT,{featureIds:[e.line.id]})};U.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),Z(t)&&this.updateUIClasses({mouse:C.POINTER})};U.onTap=U.onClick=function(e,t){if(Z(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};U.onKeyUp=function(e,t){se(t)?this.changeMode(g.SIMPLE_SELECT,{featureIds:[e.line.id]}):ie(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(g.SIMPLE_SELECT))};U.onStop=function(e){w.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(L.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(g.SIMPLE_SELECT,{},{silent:!0})))};U.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(g.SIMPLE_SELECT)};U.toDisplayFeatures=function(e,t,n){const r=t.properties.id===e.line.id;if(t.properties.active=r?S.ACTIVE:S.INACTIVE,!r)return n(t);t.geometry.coordinates.length<2||(t.properties.meta=O.FEATURE,n(J(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),n(t))};const We={simple_select:y,direct_select:E,draw_point:k,draw_polygon:D,draw_line_string:U},Ot={defaultMode:g.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Xe,modes:We,controls:{},userProperties:!1,suppressAPIEvents:!0},Mt={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},Lt={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function we(e,t){return e.map(n=>n.source?n:Object.assign({},n,{id:`${n.id}.${t}`,source:t==="hot"?b.HOT:b.COLD}))}function Nt(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},Lt,e.controls):t.controls=Object.assign({},Mt,e.controls),t=Object.assign({},Ot,t),t.styles=we(t.styles,"cold").concat(we(t.styles,"hot")),t}var vt=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,i;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[o]))return!1;for(o=r;o--!==0;){var s=i[o];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n};const De=Ue(vt);var At=bt,Pt={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function bt(e){if(!e||!e.type)return null;var t=Pt[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}const Ft=Ue(At);function ze(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(n=>n).sort())===JSON.stringify(t.map(n=>n).sort())}const Rt={Polygon:P,LineString:V,Point:G,MultiPolygon:M,MultiLineString:M,MultiPoint:M};function wt(e,t){t.modes=g;const n=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(r){return $.click({point:r},null,e).map(i=>i.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:f.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(r=>e.store.get(r)).map(r=>r.toGeoJSON())}},t.getSelectedPoints=function(){return{type:f.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(r=>({type:f.FEATURE,properties:{},geometry:{type:f.POINT,coordinates:r.coordinates}}))}},t.set=function(r){if(r.type===void 0||r.type!==f.FEATURE_COLLECTION||!Array.isArray(r.features))throw new Error("Invalid FeatureCollection");const o=e.store.createRenderBatch();let i=e.store.getAllIds().slice();const s=t.add(r),u=new F(s);return i=i.filter(c=>!u.has(c)),i.length&&t.delete(i),o(),s},t.add=function(r){const i=JSON.parse(JSON.stringify(Ft(r))).features.map(s=>{if(s.id=s.id||Ee(),s.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(s.id)===void 0||e.store.get(s.id).type!==s.geometry.type){const u=Rt[s.geometry.type];if(u===void 0)throw new Error(`Invalid geometry type: ${s.geometry.type}.`);const c=new u(e,s);e.store.add(c,{silent:n})}else{const u=e.store.get(s.id),c=u.properties;u.properties=s.properties,De(c,s.properties)||e.store.featureChanged(u.id,{silent:n}),De(u.getCoordinates(),s.geometry.coordinates)||u.incomingCoords(s.geometry.coordinates)}return s.id});return e.store.render(),i},t.get=function(r){const o=e.store.get(r);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:f.FEATURE_COLLECTION,features:e.store.getAll().map(r=>r.toGeoJSON())}},t.delete=function(r){return e.store.delete(r,{silent:n}),t.getMode()===g.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(g.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:n}),t.getMode()===g.DIRECT_SELECT?e.events.changeMode(g.SIMPLE_SELECT,void 0,{silent:n}):e.store.render(),t},t.changeMode=function(r,o={}){return r===g.SIMPLE_SELECT&&t.getMode()===g.SIMPLE_SELECT?(ze(o.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(o.featureIds,{silent:n}),e.store.render()),t):(r===g.DIRECT_SELECT&&t.getMode()===g.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(r,o,{silent:n}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:n}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:n}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:n}),t},t.setFeatureProperty=function(r,o,i){return e.store.setFeatureProperty(r,o,i,{silent:n}),t},t}const Dt=Object.freeze(Object.defineProperty({__proto__:null,CommonSelectors:St,ModeHandler:le,StringSet:F,constrainFeatureMovement:Se,createMidPoint:He,createSupplementaryPoints:ae,createVertex:J,doubleClickZoom:w,euclideanDistance:ye,featuresAt:$,getFeatureAtAndSetCursors:Q,isClick:he,isEventAtCoordinates:ee,isTap:ge,mapEventToBoundingBox:Be,moveFeatures:_e,sortFeatures:Ge,stringSetsAreEqual:ze,theme:Xe,toDenseArray:H},Symbol.toStringTag,{value:"Module"})),Ut=function(e,t){e=Nt(e);const n={options:e};t=wt(n,t),n.api=t;const r=Ct(n);return t.onAdd=r.onAdd,t.onRemove=r.onRemove,t.types=A,t.options=e,t};function Oe(e){Ut(e,this)}Oe.modes=We;Oe.constants=xe;Oe.lib=Dt;export{Oe as M};
