import{_ as s,c as r,a as n,b as a,w as l,r as c,o as i}from"./app-DUPhFMc-.js";const h={};function d(m,e){const o=c("common-code-view"),t=c("ClientOnly");return i(),r("div",null,[e[0]||(e[0]=n('<h1 id="echarts" tabindex="-1"><a class="header-anchor" href="#echarts"><span>ECharts</span></a></h1><p><code>ECharts</code> 结合 <code>Marker</code> 即可在地图中展示图表数据。前面说过，<code>Marker</code> ( <strong>如果数量过多，会出现重叠和性能问题</strong> ），但是很多时候又不得不使用，比如在需要用复杂的形式展示数据时，<code>layer</code> 通常满足不了需求。</p><p>在浏览官方案例 <a href="https://docs.mapbox.com/mapbox-gl-js/example/cluster-html/" target="_blank" rel="noopener noreferrer">Display HTML clusters with custom properties</a> 时，想到：可结合 <code>cluster</code> 属性，来解决 <code>Marker</code> 在地图中显示重叠以及性能问题。</p><h2 id="饼图" tabindex="-1"><a class="header-anchor" href="#饼图"><span>饼图</span></a></h2><p>使用聚合属性来解决图表重叠和性能问题的关键在于：在数据变化时，通过查询可视范围内的 <code>聚合要素</code> 及 <code>非聚合要素</code> 位置显示图表。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>聚合要素的属性与原始属性不一致（参考 <a href="https://docs.mapbox.com/mapbox-gl-js/style-spec/#sources-geojson-cluster" target="_blank" rel="noopener noreferrer">geojson-cluster</a>），需要通过 <code>GeoJSONSource.getClusterLeaves()</code> 方法来获取原始要素属性（参考：<a href="https://docs.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterleaves" target="_blank" rel="noopener noreferrer">getClusterLeaves</a>）。</p><p>因为聚合点要素与实际要素的位置有一定的偏差，可以取离聚合点最近的要素。</p><p>非聚合要素属性与原始属性一致。</p></div><p>如果需要将 <code>ECharts</code> 图表的事件与地图结合做交互，由于 <code>ECharts</code> 事件回调参数中不能设置自定义属性，我们可以将相关属性融入到 ECharts 的默认属性中，比如：下面示例中将要素的坐标信息放在了 <code>seriesName</code>。</p><blockquote><p>详细实现请查看示例代码</p></blockquote>',8)),a(t,null,{default:l(()=>[a(o,{name:"echarts-pie"})]),_:1})])}const u=s(h,[["render",d]]),g=JSON.parse('{"path":"/advance/ECharts.html","title":"ECharts","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"饼图","slug":"饼图","link":"#饼图","children":[]}],"git":{"updatedTime":1662556077000,"contributors":[{"name":"huangli","username":"huangli","email":"849151701@qq.com","commits":1,"url":"https://github.com/huangli"},{"name":"huanglii","username":"huanglii","email":"849151701@qq.com","commits":4,"url":"https://github.com/huanglii"},{"name":"黄俐","username":"","email":"li.huangli@qq.com","commits":1}],"changelog":[{"hash":"102b6c3a0fb730dfe559bcc4a8d2b196fb6274c1","time":1662556077000,"email":"li.huangli@qq.com","author":"huanglii","message":"add plugins"},{"hash":"f818acea2560dc8a5013f4054d896e9dd5cb0b2e","time":1645850676000,"email":"li.huangli@qq.com","author":"huanglii","message":"add echarts layer"},{"hash":"ab449bb812df59fae7bb717da4dbbbb28cbcc462","time":1626580774000,"email":"li.huangli@qq.com","author":"黄俐","message":"更新样式规范、数据"},{"hash":"f538bf572c85ca822b4f865535fcb7683432889c","time":1574863355000,"email":"849151701@qq.com","author":"huanglii","message":"update echart-pie"},{"hash":"3bbc88613cd57f2cf337794962f4c52c3ffa9c8d","time":1574862830000,"email":"849151701@qq.com","author":"huanglii","message":"update echart-pie"},{"hash":"0d8c195f6ebc6bbddb1f94c3d2f4dd5dded28e34","time":1574848879000,"email":"849151701@qq.com","author":"huangli","message":"add echart-pie"}]},"filePathRelative":"advance/ECharts.md"}');export{u as comp,g as data};
