import{_ as s,c,a as n,b as a,d as l,r as o,o as i}from"./app-BF_9Ay7_.js";const h={};function m(p,e){const t=o("common-code-view"),r=o("ClientOnly");return i(),c("div",null,[e[0]||(e[0]=n('<h1 id="echarts" tabindex="-1"><a class="header-anchor" href="#echarts"><span>ECharts</span></a></h1><p><code>ECharts</code> 结合 <code>Marker</code> 即可在地图中展示图表数据。前面说过，<code>Marker</code> ( <strong>如果数量过多，会出现重叠和性能问题</strong> ），但是很多时候又不得不使用，比如在需要用复杂的形式展示数据时，<code>layer</code> 通常满足不了需求。</p><p>在浏览官方案例 <a href="https://docs.mapbox.com/mapbox-gl-js/example/cluster-html/" target="_blank" rel="noopener noreferrer">Display HTML clusters with custom properties</a> 时，想到：可结合 <code>cluster</code> 属性，来解决 <code>Marker</code> 在地图中显示重叠以及性能问题。</p><h2 id="饼图" tabindex="-1"><a class="header-anchor" href="#饼图"><span>饼图</span></a></h2><p>使用聚合属性来解决图表重叠和性能问题的关键在于：在数据变化时，通过查询可视范围内的 <code>聚合要素</code> 及 <code>非聚合要素</code> 位置显示图表。</p><div class="hint-container warning"><p class="hint-container-title">注意</p><p>聚合要素的属性与原始属性不一致（参考 <a href="https://docs.mapbox.com/mapbox-gl-js/style-spec/#sources-geojson-cluster" target="_blank" rel="noopener noreferrer">geojson-cluster</a>），需要通过 <code>GeoJSONSource.getClusterLeaves()</code> 方法来获取原始要素属性（参考：<a href="https://docs.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterleaves" target="_blank" rel="noopener noreferrer">getClusterLeaves</a>）。</p><p>因为聚合点要素与实际要素的位置有一定的偏差，可以取离聚合点最近的要素。</p><p>非聚合要素属性与原始属性一致。</p></div><p>如果需要将 <code>ECharts</code> 图表的事件与地图结合做交互，由于 <code>ECharts</code> 事件回调参数中不能设置自定义属性，我们可以将相关属性融入到 ECharts 的默认属性中，比如：下面示例中将要素的坐标信息放在了 <code>seriesName</code>。</p><blockquote><p>详细实现请查看示例代码</p></blockquote>',8)),a(r,null,{default:l(()=>[a(t,{name:"echarts-pie"})]),_:1})])}const u=s(h,[["render",m],["__file","ECharts.html.vue"]]),g=JSON.parse('{"path":"/advance/ECharts.html","title":"ECharts","lang":"zh-CN","frontmatter":{},"headers":[{"level":2,"title":"饼图","slug":"饼图","link":"#饼图","children":[]}],"git":{"updatedTime":1662556077000,"contributors":[{"name":"huanglii","username":"huanglii","email":"li.huangli@qq.com","commits":2,"url":"https://github.com/huanglii"},{"name":"黄俐","username":"黄俐","email":"li.huangli@qq.com","commits":1,"url":"https://github.com/黄俐"},{"name":"huanglii","username":"huanglii","email":"849151701@qq.com","commits":2,"url":"https://github.com/huanglii"},{"name":"huangli","username":"huangli","email":"849151701@qq.com","commits":1,"url":"https://github.com/huangli"}]},"filePathRelative":"advance/ECharts.md"}');export{u as comp,g as data};
