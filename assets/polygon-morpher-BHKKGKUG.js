var G0=Object.defineProperty;var $0=(e,t,n)=>t in e?G0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Q=(e,t,n)=>$0(e,typeof t!="symbol"?t+"":t,n);import{b as z0,g as V0,_ as J0}from"./base-map.vue_vue_type_style_index_0_lang-D9rQBs-7.js";import{e as Y0}from"./earcut-CdYUdopu.js";import{f as X0,g as U0,o as Q0,w as W0,d as Kt,k as Z0}from"./app-DUPhFMc-.js";var ot={},be="1.13.7",pn=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},zt=Array.prototype,Le=Object.prototype,gn=typeof Symbol<"u"?Symbol.prototype:null,H0=zt.push,bt=zt.slice,xt=Le.toString,K0=Le.hasOwnProperty,Kn=typeof ArrayBuffer<"u",j0=typeof DataView<"u",ti=Array.isArray,vn=Object.keys,yn=Object.create,dn=Kn&&ArrayBuffer.isView,ei=isNaN,ni=isFinite,jn=!{toString:null}.propertyIsEnumerable("toString"),mn=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],ri=Math.pow(2,53)-1;function F(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),r=Array(n),o=0;o<n;o++)r[o]=arguments[o+t];switch(t){case 0:return e.call(this,r);case 1:return e.call(this,arguments[0],r);case 2:return e.call(this,arguments[0],arguments[1],r)}var i=Array(t+1);for(o=0;o<t;o++)i[o]=arguments[o];return i[t]=r,e.apply(this,i)}}function nt(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function tr(e){return e===null}function Ie(e){return e===void 0}function Oe(e){return e===!0||e===!1||xt.call(e)==="[object Boolean]"}function er(e){return!!(e&&e.nodeType===1)}function N(e){var t="[object "+e+"]";return function(n){return xt.call(n)===t}}const Vt=N("String"),Re=N("Number"),nr=N("Date"),rr=N("RegExp"),ir=N("Error"),Ce=N("Symbol"),Ne=N("ArrayBuffer");var or=N("Function"),ii=pn.document&&pn.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof ii!="function"&&(or=function(e){return typeof e=="function"||!1});const C=or,sr=N("Object");var ar=j0&&(!/\[native code\]/.test(String(DataView))||sr(new DataView(new ArrayBuffer(8)))),qe=typeof Map<"u"&&sr(new Map),oi=N("DataView");function si(e){return e!=null&&C(e.getInt8)&&Ne(e.buffer)}const wt=ar?si:oi,rt=ti||N("Array");function it(e,t){return e!=null&&K0.call(e,t)}var pe=N("Arguments");(function(){pe(arguments)||(pe=function(e){return it(e,"callee")})})();const Jt=pe;function ur(e){return!Ce(e)&&ni(e)&&!isNaN(parseFloat(e))}function Fe(e){return Re(e)&&ei(e)}function Te(e){return function(){return e}}function lr(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=ri}}function fr(e){return function(t){return t==null?void 0:t[e]}}const qt=fr("byteLength"),ai=lr(qt);var ui=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function li(e){return dn?dn(e)&&!wt(e):ai(e)&&ui.test(xt.call(e))}const ke=Kn?li:Te(!1),T=fr("length");function fi(e){for(var t={},n=e.length,r=0;r<n;++r)t[e[r]]=!0;return{contains:function(o){return t[o]===!0},push:function(o){return t[o]=!0,e.push(o)}}}function cr(e,t){t=fi(t);var n=mn.length,r=e.constructor,o=C(r)&&r.prototype||Le,i="constructor";for(it(e,i)&&!t.contains(i)&&t.push(i);n--;)i=mn[n],i in e&&e[i]!==o[i]&&!t.contains(i)&&t.push(i)}function I(e){if(!nt(e))return[];if(vn)return vn(e);var t=[];for(var n in e)it(e,n)&&t.push(n);return jn&&cr(e,t),t}function hr(e){if(e==null)return!0;var t=T(e);return typeof t=="number"&&(rt(e)||Vt(e)||Jt(e))?t===0:T(I(e))===0}function De(e,t){var n=I(t),r=n.length;if(e==null)return!r;for(var o=Object(e),i=0;i<r;i++){var a=n[i];if(t[a]!==o[a]||!(a in o))return!1}return!0}function b(e){if(e instanceof b)return e;if(!(this instanceof b))return new b(e);this._wrapped=e}b.VERSION=be;b.prototype.value=function(){return this._wrapped};b.prototype.valueOf=b.prototype.toJSON=b.prototype.value;b.prototype.toString=function(){return String(this._wrapped)};function xn(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,qt(e))}var wn="[object DataView]";function ge(e,t,n,r){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var o=typeof e;return o!=="function"&&o!=="object"&&typeof t!="object"?!1:pr(e,t,n,r)}function pr(e,t,n,r){e instanceof b&&(e=e._wrapped),t instanceof b&&(t=t._wrapped);var o=xt.call(e);if(o!==xt.call(t))return!1;if(ar&&o=="[object Object]"&&wt(e)){if(!wt(t))return!1;o=wn}switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return gn.valueOf.call(e)===gn.valueOf.call(t);case"[object ArrayBuffer]":case wn:return pr(xn(e),xn(t),n,r)}var i=o==="[object Array]";if(!i&&ke(e)){var a=qt(e);if(a!==qt(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;i=!0}if(!i){if(typeof e!="object"||typeof t!="object")return!1;var s=e.constructor,l=t.constructor;if(s!==l&&!(C(s)&&s instanceof s&&C(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var f=n.length;f--;)if(n[f]===e)return r[f]===t;if(n.push(e),r.push(t),i){if(f=e.length,f!==t.length)return!1;for(;f--;)if(!ge(e[f],t[f],n,r))return!1}else{var p=I(e),c;if(f=p.length,I(t).length!==f)return!1;for(;f--;)if(c=p[f],!(it(t,c)&&ge(e[c],t[c],n,r)))return!1}return n.pop(),r.pop(),!0}function gr(e,t){return ge(e,t)}function yt(e){if(!nt(e))return[];var t=[];for(var n in e)t.push(n);return jn&&cr(e,t),t}function Be(e){var t=T(e);return function(n){if(n==null)return!1;var r=yt(n);if(T(r))return!1;for(var o=0;o<t;o++)if(!C(n[e[o]]))return!1;return e!==dr||!C(n[Ge])}}var Ge="forEach",vr="has",$e=["clear","delete"],yr=["get",vr,"set"],ci=$e.concat(Ge,yr),dr=$e.concat(yr),hi=["add"].concat($e,Ge,vr);const mr=qe?Be(ci):N("Map"),xr=qe?Be(dr):N("WeakMap"),wr=qe?Be(hi):N("Set"),Er=N("WeakSet");function ut(e){for(var t=I(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=e[t[o]];return r}function Mr(e){for(var t=I(e),n=t.length,r=Array(n),o=0;o<n;o++)r[o]=[t[o],e[t[o]]];return r}function ze(e){for(var t={},n=I(e),r=0,o=n.length;r<o;r++)t[e[n[r]]]=n[r];return t}function Et(e){var t=[];for(var n in e)C(e[n])&&t.push(n);return t.sort()}function Ve(e,t){return function(n){var r=arguments.length;if(t&&(n=Object(n)),r<2||n==null)return n;for(var o=1;o<r;o++)for(var i=arguments[o],a=e(i),s=a.length,l=0;l<s;l++){var f=a[l];(!t||n[f]===void 0)&&(n[f]=i[f])}return n}}const Je=Ve(yt),gt=Ve(I),Ye=Ve(yt,!0);function pi(){return function(){}}function Sr(e){if(!nt(e))return{};if(yn)return yn(e);var t=pi();t.prototype=e;var n=new t;return t.prototype=null,n}function _r(e,t){var n=Sr(e);return t&&gt(n,t),n}function Pr(e){return nt(e)?rt(e)?e.slice():Je({},e):e}function Ar(e,t){return t(e),e}function Xe(e){return rt(e)?e:[e]}b.toPath=Xe;function Lt(e){return b.toPath(e)}function Ue(e,t){for(var n=t.length,r=0;r<n;r++){if(e==null)return;e=e[t[r]]}return n?e:void 0}function Qe(e,t,n){var r=Ue(e,Lt(t));return Ie(r)?n:r}function br(e,t){t=Lt(t);for(var n=t.length,r=0;r<n;r++){var o=t[r];if(!it(e,o))return!1;e=e[o]}return!!n}function Yt(e){return e}function at(e){return e=gt({},e),function(t){return De(t,e)}}function Xt(e){return e=Lt(e),function(t){return Ue(t,e)}}function It(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(r){return e.call(t,r)};case 3:return function(r,o,i){return e.call(t,r,o,i)};case 4:return function(r,o,i,a){return e.call(t,r,o,i,a)}}return function(){return e.apply(t,arguments)}}function Lr(e,t,n){return e==null?Yt:C(e)?It(e,t,n):nt(e)&&!rt(e)?at(e):Xt(e)}function Ut(e,t){return Lr(e,t,1/0)}b.iteratee=Ut;function k(e,t,n){return b.iteratee!==Ut?b.iteratee(e,t):Lr(e,t,n)}function Ir(e,t,n){t=k(t,n);for(var r=I(e),o=r.length,i={},a=0;a<o;a++){var s=r[a];i[s]=t(e[s],s,e)}return i}function We(){}function Or(e){return e==null?We:function(t){return Qe(e,t)}}function Rr(e,t,n){var r=Array(Math.max(0,e));t=It(t,n,1);for(var o=0;o<e;o++)r[o]=t(o);return r}function Ft(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}const vt=Date.now||function(){return new Date().getTime()};function Cr(e){var t=function(i){return e[i]},n="(?:"+I(e).join("|")+")",r=RegExp(n),o=RegExp(n,"g");return function(i){return i=i==null?"":""+i,r.test(i)?i.replace(o,t):i}}const Nr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},qr=Cr(Nr),gi=ze(Nr),Fr=Cr(gi),Tr=b.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var jt=/(.)^/,vi={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},yi=/\\|'|\r|\n|\u2028|\u2029/g;function di(e){return"\\"+vi[e]}var mi=/^\s*(\w|\$)+\s*$/;function kr(e,t,n){!t&&n&&(t=n),t=Ye({},t,b.templateSettings);var r=RegExp([(t.escape||jt).source,(t.interpolate||jt).source,(t.evaluate||jt).source].join("|")+"|$","g"),o=0,i="__p+='";e.replace(r,function(f,p,c,u,h){return i+=e.slice(o,h).replace(yi,di),o=h+f.length,p?i+=`'+
((__t=(`+p+`))==null?'':_.escape(__t))+
'`:c?i+=`'+
((__t=(`+c+`))==null?'':__t)+
'`:u&&(i+=`';
`+u+`
__p+='`),f}),i+=`';
`;var a=t.variable;if(a){if(!mi.test(a))throw new Error("variable is not a bare identifier: "+a)}else i=`with(obj||{}){
`+i+`}
`,a="obj";i=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+i+`return __p;
`;var s;try{s=new Function(a,"_",i)}catch(f){throw f.source=i,f}var l=function(f){return s.call(this,f,b)};return l.source="function("+a+`){
`+i+"}",l}function Dr(e,t,n){t=Lt(t);var r=t.length;if(!r)return C(n)?n.call(e):n;for(var o=0;o<r;o++){var i=e==null?void 0:e[t[o]];i===void 0&&(i=n,o=r),e=C(i)?i.call(e):i}return e}var xi=0;function Br(e){var t=++xi+"";return e?e+t:t}function Gr(e){var t=b(e);return t._chain=!0,t}function $r(e,t,n,r,o){if(!(r instanceof t))return e.apply(n,o);var i=Sr(e.prototype),a=e.apply(i,o);return nt(a)?a:i}var lt=F(function(e,t){var n=lt.placeholder,r=function(){for(var o=0,i=t.length,a=Array(i),s=0;s<i;s++)a[s]=t[s]===n?arguments[o++]:t[s];for(;o<arguments.length;)a.push(arguments[o++]);return $r(e,r,this,this,a)};return r});lt.placeholder=b;const Ze=F(function(e,t,n){if(!C(e))throw new TypeError("Bind must be called on a function");var r=F(function(o){return $r(e,r,t,this,n.concat(o))});return r}),G=lr(T);function ft(e,t,n,r){if(r=r||[],!t&&t!==0)t=1/0;else if(t<=0)return r.concat(e);for(var o=r.length,i=0,a=T(e);i<a;i++){var s=e[i];if(G(s)&&(rt(s)||Jt(s)))if(t>1)ft(s,t-1,n,r),o=r.length;else for(var l=0,f=s.length;l<f;)r[o++]=s[l++];else n||(r[o++]=s)}return r}const zr=F(function(e,t){t=ft(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=t[n];e[r]=Ze(e[r],e)}return e});function Vr(e,t){var n=function(r){var o=n.cache,i=""+(t?t.apply(this,arguments):r);return it(o,i)||(o[i]=e.apply(this,arguments)),o[i]};return n.cache={},n}const He=F(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)}),Jr=lt(He,b,1);function Yr(e,t,n){var r,o,i,a,s=0;n||(n={});var l=function(){s=n.leading===!1?0:vt(),r=null,a=e.apply(o,i),r||(o=i=null)},f=function(){var p=vt();!s&&n.leading===!1&&(s=p);var c=t-(p-s);return o=this,i=arguments,c<=0||c>t?(r&&(clearTimeout(r),r=null),s=p,a=e.apply(o,i),r||(o=i=null)):!r&&n.trailing!==!1&&(r=setTimeout(l,c)),a};return f.cancel=function(){clearTimeout(r),s=0,r=o=i=null},f}function Xr(e,t,n){var r,o,i,a,s,l=function(){var p=vt()-o;t>p?r=setTimeout(l,t-p):(r=null,n||(a=e.apply(s,i)),r||(i=s=null))},f=F(function(p){return s=this,i=p,o=vt(),r||(r=setTimeout(l,t),n&&(a=e.apply(s,i))),a});return f.cancel=function(){clearTimeout(r),r=i=s=null},f}function Ur(e,t){return lt(t,e)}function Qt(e){return function(){return!e.apply(this,arguments)}}function Qr(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function Wr(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Ke(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const Zr=lt(Ke,2);function je(e,t,n){t=k(t,n);for(var r=I(e),o,i=0,a=r.length;i<a;i++)if(o=r[i],t(e[o],o,e))return o}function Hr(e){return function(t,n,r){n=k(n,r);for(var o=T(t),i=e>0?0:o-1;i>=0&&i<o;i+=e)if(n(t[i],i,t))return i;return-1}}const Wt=Hr(1),tn=Hr(-1);function en(e,t,n,r){n=k(n,r,1);for(var o=n(t),i=0,a=T(e);i<a;){var s=Math.floor((i+a)/2);n(e[s])<o?i=s+1:a=s}return i}function Kr(e,t,n){return function(r,o,i){var a=0,s=T(r);if(typeof i=="number")e>0?a=i>=0?i:Math.max(i+s,a):s=i>=0?Math.min(i+1,s):i+s+1;else if(n&&i&&s)return i=n(r,o),r[i]===o?i:-1;if(o!==o)return i=t(bt.call(r,a,s),Fe),i>=0?i+a:-1;for(i=e>0?a:s-1;i>=0&&i<s;i+=e)if(r[i]===o)return i;return-1}}const nn=Kr(1,Wt,en),jr=Kr(-1,tn);function Mt(e,t,n){var r=G(e)?Wt:je,o=r(e,t,n);if(o!==void 0&&o!==-1)return e[o]}function t0(e,t){return Mt(e,at(t))}function U(e,t,n){t=It(t,n);var r,o;if(G(e))for(r=0,o=e.length;r<o;r++)t(e[r],r,e);else{var i=I(e);for(r=0,o=i.length;r<o;r++)t(e[i[r]],i[r],e)}return e}function Z(e,t,n){t=k(t,n);for(var r=!G(e)&&I(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var s=r?r[a]:a;i[a]=t(e[s],s,e)}return i}function e0(e){var t=function(n,r,o,i){var a=!G(n)&&I(n),s=(a||n).length,l=e>0?0:s-1;for(i||(o=n[a?a[l]:l],l+=e);l>=0&&l<s;l+=e){var f=a?a[l]:l;o=r(o,n[f],f,n)}return o};return function(n,r,o,i){var a=arguments.length>=3;return t(n,It(r,i,4),o,a)}}const ht=e0(1),Tt=e0(-1);function tt(e,t,n){var r=[];return t=k(t,n),U(e,function(o,i,a){t(o,i,a)&&r.push(o)}),r}function n0(e,t,n){return tt(e,Qt(k(t)),n)}function kt(e,t,n){t=k(t,n);for(var r=!G(e)&&I(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!t(e[a],a,e))return!1}return!0}function Dt(e,t,n){t=k(t,n);for(var r=!G(e)&&I(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(t(e[a],a,e))return!0}return!1}function z(e,t,n,r){return G(e)||(e=ut(e)),(typeof n!="number"||r)&&(n=0),nn(e,t,n)>=0}const r0=F(function(e,t,n){var r,o;return C(t)?o=t:(t=Lt(t),r=t.slice(0,-1),t=t[t.length-1]),Z(e,function(i){var a=o;if(!a){if(r&&r.length&&(i=Ue(i,r)),i==null)return;a=i[t]}return a==null?a:a.apply(i,n)})});function Zt(e,t){return Z(e,Xt(t))}function i0(e,t){return tt(e,at(t))}function rn(e,t,n){var r=-1/0,o=-1/0,i,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=G(e)?e:ut(e);for(var s=0,l=e.length;s<l;s++)i=e[s],i!=null&&i>r&&(r=i)}else t=k(t,n),U(e,function(f,p,c){a=t(f,p,c),(a>o||a===-1/0&&r===-1/0)&&(r=f,o=a)});return r}function o0(e,t,n){var r=1/0,o=1/0,i,a;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=G(e)?e:ut(e);for(var s=0,l=e.length;s<l;s++)i=e[s],i!=null&&i<r&&(r=i)}else t=k(t,n),U(e,function(f,p,c){a=t(f,p,c),(a<o||a===1/0&&r===1/0)&&(r=f,o=a)});return r}var wi=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function on(e){return e?rt(e)?bt.call(e):Vt(e)?e.match(wi):G(e)?Z(e,Yt):ut(e):[]}function sn(e,t,n){if(t==null||n)return G(e)||(e=ut(e)),e[Ft(e.length-1)];var r=on(e),o=T(r);t=Math.max(Math.min(t,o),0);for(var i=o-1,a=0;a<t;a++){var s=Ft(a,i),l=r[a];r[a]=r[s],r[s]=l}return r.slice(0,t)}function s0(e){return sn(e,1/0)}function a0(e,t,n){var r=0;return t=k(t,n),Zt(Z(e,function(o,i,a){return{value:o,index:r++,criteria:t(o,i,a)}}).sort(function(o,i){var a=o.criteria,s=i.criteria;if(a!==s){if(a>s||a===void 0)return 1;if(a<s||s===void 0)return-1}return o.index-i.index}),"value")}function Ht(e,t){return function(n,r,o){var i=t?[[],[]]:{};return r=k(r,o),U(n,function(a,s){var l=r(a,s,n);e(i,a,l)}),i}}const u0=Ht(function(e,t,n){it(e,n)?e[n].push(t):e[n]=[t]}),l0=Ht(function(e,t,n){e[n]=t}),f0=Ht(function(e,t,n){it(e,n)?e[n]++:e[n]=1}),c0=Ht(function(e,t,n){e[n?0:1].push(t)},!0);function h0(e){return e==null?0:G(e)?e.length:I(e).length}function Ei(e,t,n){return t in n}const an=F(function(e,t){var n={},r=t[0];if(e==null)return n;C(r)?(t.length>1&&(r=It(r,t[1])),t=yt(e)):(r=Ei,t=ft(t,!1,!1),e=Object(e));for(var o=0,i=t.length;o<i;o++){var a=t[o],s=e[a];r(s,a,e)&&(n[a]=s)}return n}),p0=F(function(e,t){var n=t[0],r;return C(n)?(n=Qt(n),t.length>1&&(r=t[1])):(t=Z(ft(t,!1,!1),String),n=function(o,i){return!z(t,i)}),an(e,n,r)});function un(e,t,n){return bt.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function pt(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:un(e,e.length-t)}function st(e,t,n){return bt.call(e,t==null||n?1:t)}function g0(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:st(e,Math.max(0,e.length-t))}function v0(e){return tt(e,Boolean)}function y0(e,t){return ft(e,t,!1)}const ln=F(function(e,t){return t=ft(t,!0,!0),tt(e,function(n){return!z(t,n)})}),d0=F(function(e,t){return ln(e,t)});function St(e,t,n,r){Oe(t)||(r=n,n=t,t=!1),n!=null&&(n=k(n,r));for(var o=[],i=[],a=0,s=T(e);a<s;a++){var l=e[a],f=n?n(l,a,e):l;t&&!n?((!a||i!==f)&&o.push(l),i=f):n?z(i,f)||(i.push(f),o.push(l)):z(o,l)||o.push(l)}return o}const m0=F(function(e){return St(ft(e,!0,!0))});function x0(e){for(var t=[],n=arguments.length,r=0,o=T(e);r<o;r++){var i=e[r];if(!z(t,i)){var a;for(a=1;a<n&&z(arguments[a],i);a++);a===n&&t.push(i)}}return t}function _t(e){for(var t=e&&rn(e,T).length||0,n=Array(t),r=0;r<t;r++)n[r]=Zt(e,r);return n}const w0=F(_t);function E0(e,t){for(var n={},r=0,o=T(e);r<o;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n}function M0(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var r=Math.max(Math.ceil((t-e)/n),0),o=Array(r),i=0;i<r;i++,e+=n)o[i]=e;return o}function S0(e,t){if(t==null||t<1)return[];for(var n=[],r=0,o=e.length;r<o;)n.push(bt.call(e,r,r+=t));return n}function fn(e,t){return e._chain?b(t).chain():t}function cn(e){return U(Et(e),function(t){var n=b[t]=e[t];b.prototype[t]=function(){var r=[this._wrapped];return H0.apply(r,arguments),fn(this,n.apply(b,r))}}),b}U(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=zt[e];b.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),fn(this,n)}});U(["concat","join","slice"],function(e){var t=zt[e];b.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),fn(this,n)}});const Mi=Object.freeze(Object.defineProperty({__proto__:null,VERSION:be,after:Wr,all:kt,allKeys:yt,any:Dt,assign:gt,before:Ke,bind:Ze,bindAll:zr,chain:Gr,chunk:S0,clone:Pr,collect:Z,compact:v0,compose:Qr,constant:Te,contains:z,countBy:f0,create:_r,debounce:Xr,default:b,defaults:Ye,defer:Jr,delay:He,detect:Mt,difference:ln,drop:st,each:U,escape:qr,every:kt,extend:Je,extendOwn:gt,filter:tt,find:Mt,findIndex:Wt,findKey:je,findLastIndex:tn,findWhere:t0,first:pt,flatten:y0,foldl:ht,foldr:Tt,forEach:U,functions:Et,get:Qe,groupBy:u0,has:br,head:pt,identity:Yt,include:z,includes:z,indexBy:l0,indexOf:nn,initial:un,inject:ht,intersection:x0,invert:ze,invoke:r0,isArguments:Jt,isArray:rt,isArrayBuffer:Ne,isBoolean:Oe,isDataView:wt,isDate:nr,isElement:er,isEmpty:hr,isEqual:gr,isError:ir,isFinite:ur,isFunction:C,isMap:mr,isMatch:De,isNaN:Fe,isNull:tr,isNumber:Re,isObject:nt,isRegExp:rr,isSet:wr,isString:Vt,isSymbol:Ce,isTypedArray:ke,isUndefined:Ie,isWeakMap:xr,isWeakSet:Er,iteratee:Ut,keys:I,last:g0,lastIndexOf:jr,map:Z,mapObject:Ir,matcher:at,matches:at,max:rn,memoize:Vr,methods:Et,min:o0,mixin:cn,negate:Qt,noop:We,now:vt,object:E0,omit:p0,once:Zr,pairs:Mr,partial:lt,partition:c0,pick:an,pluck:Zt,property:Xt,propertyOf:Or,random:Ft,range:M0,reduce:ht,reduceRight:Tt,reject:n0,rest:st,restArguments:F,result:Dr,sample:sn,select:tt,shuffle:s0,size:h0,some:Dt,sortBy:a0,sortedIndex:en,tail:st,take:pt,tap:Ar,template:kr,templateSettings:Tr,throttle:Yr,times:Rr,toArray:on,toPath:Xe,transpose:_t,unescape:Fr,union:m0,uniq:St,unique:St,uniqueId:Br,unzip:_t,values:ut,where:i0,without:d0,wrap:Ur,zip:w0},Symbol.toStringTag,{value:"Module"}));var ve=cn(Mi);ve._=ve;const Si=Object.freeze(Object.defineProperty({__proto__:null,VERSION:be,after:Wr,all:kt,allKeys:yt,any:Dt,assign:gt,before:Ke,bind:Ze,bindAll:zr,chain:Gr,chunk:S0,clone:Pr,collect:Z,compact:v0,compose:Qr,constant:Te,contains:z,countBy:f0,create:_r,debounce:Xr,default:ve,defaults:Ye,defer:Jr,delay:He,detect:Mt,difference:ln,drop:st,each:U,escape:qr,every:kt,extend:Je,extendOwn:gt,filter:tt,find:Mt,findIndex:Wt,findKey:je,findLastIndex:tn,findWhere:t0,first:pt,flatten:y0,foldl:ht,foldr:Tt,forEach:U,functions:Et,get:Qe,groupBy:u0,has:br,head:pt,identity:Yt,include:z,includes:z,indexBy:l0,indexOf:nn,initial:un,inject:ht,intersection:x0,invert:ze,invoke:r0,isArguments:Jt,isArray:rt,isArrayBuffer:Ne,isBoolean:Oe,isDataView:wt,isDate:nr,isElement:er,isEmpty:hr,isEqual:gr,isError:ir,isFinite:ur,isFunction:C,isMap:mr,isMatch:De,isNaN:Fe,isNull:tr,isNumber:Re,isObject:nt,isRegExp:rr,isSet:wr,isString:Vt,isSymbol:Ce,isTypedArray:ke,isUndefined:Ie,isWeakMap:xr,isWeakSet:Er,iteratee:Ut,keys:I,last:g0,lastIndexOf:jr,map:Z,mapObject:Ir,matcher:at,matches:at,max:rn,memoize:Vr,methods:Et,min:o0,mixin:cn,negate:Qt,noop:We,now:vt,object:E0,omit:p0,once:Zr,pairs:Mr,partial:lt,partition:c0,pick:an,pluck:Zt,property:Xt,propertyOf:Or,random:Ft,range:M0,reduce:ht,reduceRight:Tt,reject:n0,rest:st,restArguments:F,result:Dr,sample:sn,select:tt,shuffle:s0,size:h0,some:Dt,sortBy:a0,sortedIndex:en,tail:st,take:pt,tap:Ar,template:kr,templateSettings:Tr,throttle:Yr,times:Rr,toArray:on,toPath:Xe,transpose:_t,unescape:Fr,union:m0,uniq:St,unique:St,uniqueId:Br,unzip:_t,values:ut,where:i0,without:d0,wrap:Ur,zip:w0},Symbol.toStringTag,{value:"Module"})),_i=z0(Si);var En;function Pi(){if(En)return ot;En=1;var e=_i,t=function(c,u,h){return u?(h||(h={}),h.message?{result:c,message:h.message}:{result:c}):c},n=function(c,u){return c.length<2||!e.isNumber(c[0])||!e.isNumber(c[1])?t(!1,u,{message:"invalid coordinates for GeoJSON Point"}):!0},r=function(c,u){var h=e.find(c,function(v){return v.length<4?t(!1,u,{message:"expecting coordinates of GeoJSON object to have at least 4 positions"}):e.isEqual(e.last(v),v[0])?n(v):t(!1,u,{message:"the first and last positions of GeoJSON LinearRing are not the same"})});return h?t(!1,u,{message:""}):!0},o=function(c,u){var h=e.find(c,function(v){return!n(v)});return h?t(!1,u,{message:"one of the coordinates of the LineString are invalid"}):!0},i=function(c){return c*Math.PI/180},a=function(c,u){var h={},v,g,y;switch(u||(u="point"),u=u.toLowerCase(),u){case"point":var d=e.flatten(c),m=JSON.stringify(c)||{};d.length!==2?g=new Error(`expected a single set of coordinates in [lat, lng] format. 
Received `+m):(v=[parseFloat(d[1]),parseFloat(d[0])],h={type:"Point",coordinates:v});break;case"linestring":case"multipoint":v=[],e.each(c,function(x){v.push([parseFloat(x[1]),parseFloat(x[0])])}),u==="linestring"?u="LineString":u==="multipoint"&&(u="MultiPoint"),h={type:u,coordinates:v};break;case"polygon":e.isArray(c)&&e.isArray(c[0])&&!e.isArray(c[0][0])&&(c=[c]),v=[],e.find(c,function(x){return x.length<3?(g=new Error("Expecting 'array' to have at length of at least 3 sets of coordinates."),!0):(x.toString()!==e.last(x).toString()&&x.push(x[0]),y=[],e.each(x,function(M){y.push([parseFloat(M[1]),parseFloat(M[0])])}),v.push(y),!1)}),g||(h={type:"Polygon",coordinates:v});break;case"multilinestring":v=[],e.find(c,function(x){return x.length<2&&!g?(g=new Error("Expecting each LineString in MultiLineString to have at least 2 points."),!0):(y=[],e.each(x,function(M){y.push([parseFloat(M[1]),parseFloat(M[0])])}),v.push(y),!1)}),g||(h={type:"MultiLineString",coordinates:v});break;case"multipolygon":v=[];var E,w;e.find(c,function(x){return E=[],e.find(x,function(M){return w=[],M.length<3?(g=new Error("Expecting each array in MultiPolygon to have at least 3 points."),!0):(e.find(M,function(_){return w.push([parseFloat(_[1]),parseFloat(_[0])]),!1}),E.push(w),!1)}),v.push(E),!1}),g||(h={type:"MultiPolygon",coordinates:v});break;default:g=new Error("type not recognised or supported")}return g||h},s=function(c){var u,h,v,g,y;if(!c.type||!c.coordinates)return new Error("The object specified is not a a valid GeoJSON object");switch(c.type.toLowerCase()){case"point":u=[parseFloat(c.coordinates[1]),parseFloat(c.coordinates[0])];break;case"linestring":u=c.coordinates,y=[],e.find(u,function(d){return typeof d=="object"?(y.push([parseFloat(d[1]),parseFloat(d[0])]),!1):(h=new Error("the object specified is not a valid GeoJSON LineString"),!0)}),h||(u=y);break;case"polygon":u=[],e.find(c.coordinates,function(d){return d.length?(v=[],d[0].toString()!==e.last(d).toString()?(h=new Error("The first and last coordinates of the Polygon are not the same"),!0):d.length<4?(h=new Error("A valid Polygon should have a minimum set of 4 points"),!0):(e.each(e.initial(d),function(m){v.push([parseFloat(m[1]),parseFloat(m[0])])}),u.push(v),h||(u=v),!1)):(h=new Error("the object specified is not a valid GeoJSON Polygon"),!0)});break;case"multipoint":u=[],e.each(c.coordinates,function(d){u.push([parseFloat(d[1]),parseFloat(d[0])])});break;case"multilinestring":u=[],e.find(c.coordinates,function(d){return d.length?(g=[],e.each(d,function(m){g.push([parseFloat(m[1]),parseFloat(m[0])])}),u.push(g),!1):(h=new Error("the object specified is not a valid GeoJSON MultiLineString"),!0)});break;case"multipolygon":u=[],e.each(c.coordinates,function(d){e.find(d,function(m){return m.length?(v=[],m[0].toString()!==e.last(m).toString()?(h=new Error("The first and last coordinates of the Polygon are not the same"),!0):m.length<4?(h=new Error("A valid Polygon should have a minimum set of 4 points"),!0):(e.each(e.initial(m),function(E){v.push([parseFloat(E[1]),parseFloat(E[0])])}),u.push(v),!1)):(h=new Error("the object specified is not a valid GeoJSON Polygon"),!0)})});break;default:h=new Error("unknown GeoJSON type specified")}return h||u},l=function(c,u){u=u||3;var h=6378.137,v=0,g=c.length,y,d,m,E,w,x,M,_,A,P,S,L;for(y=0;y+1<g;y++)d=c[y],m=c[y+1],E=parseFloat(d[0]),w=parseFloat(m[0]),x=parseFloat(d[1]),M=parseFloat(m[1]),_=i(w-E),A=i(M-x),E=i(E),w=i(w),P=Math.sin(_/2)*Math.sin(_/2)+Math.sin(A/2)*Math.sin(A/2)*Math.cos(E)*Math.cos(w),S=2*Math.atan2(Math.sqrt(P),Math.sqrt(1-P)),L=h*S,v+=L;return v=Math.round(v*Math.pow(10,u))/Math.pow(10,u),v},f=function(c,u){if(!e.isNumber(u)||u<.01)return console.error(new Error("distance should be a number greater than 10 meters")),null;var h;if(!e.isArray(c))if(c.coordinates&&e.isArray(c.coordinates)&&c.type.toLowerCase()==="linestring")h=!0,c=s(c);else return console.error(new Error("distance should be a number greater than 10 meters")),null;var v,g,y,d=[],m;g=c[0],d.push(g);var E,w,x,M,_,A,P,S;return e.each(c,function(L){if(y=g,g=L,m=l([g,y]),m>u){for(v=0,E=!1,w=u/m,x=u,M=0;!E||M+u<m;)_=e.last(d),A=g,P=[],_[0]>A[0]?P.push(-1):P.push(1),_[1]>A[1]?P.push(-1):P.push(1),S=[(A[0]-_[0])*w*P[0],(A[1]-_[1])*w*P[1]],P[0]>0?S[0]=S[0]+_[0]:S[0]=_[0]-S[0],P[1]>0?S[1]=S[1]+_[1]:S[1]=_[1]-S[1],P=[],x=l([_,S]),x!==u?(v=x/u,w=w+w*(1-v)):(M+=u,E=!0,d.push(S));M=0,E=!1,d.push(g)}else d.push(g)}),h?a(d,"linestring"):d},p=function(c,u){var h=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Feature","FeatureCollection","GeometryCollection"],v,g=e.indexOf(h,c.type);if(!c.type||g<0)return t(!1,u,{message:"invalid GeoJSON type supplied"});if(g<6){if(!c.coordinates||!e.isArray(c.coordinates))return t(!1,u,{message:"invalid GeoJSON type supplied"});if(c.type==="Point")return n(c.coordinates,u);if(c.type==="MultiPoint")return c.coordinates.length<2?t(!1,u,{message:"expecting array with at least 2 elements for GeoJSON MultiPoint"}):(v=e.find(c.coordinates,function(y){return!n(y)}),v?t(!1,u,{message:"one of the coordinates of the GeoJSON MultiPoint are invalid"}):!0);if(c.type==="LineString")return c.coordinates.length<2?t(!1,u,{message:"expecting array with at least 2 elements for GeoJSON LineString"}):o(c.coordinates,u);if(c.type==="MultiLineString")return c.coordinates.length<2?t(!1,u,{message:"expecting array of multiple set of coordinates for GeoJSON MultiLineString"}):(v=e.find(c.coordinates,function(y){return!o(y,u)}),v?t(!1,u,{message:"one of the coordinates of the GeoJSON MultiLineString are invalid"}):!0);if(c.type==="Polygon")return r(c.coordinates,u);if(c.type==="MultiPolygon")return v=e.find(c.coordinates,function(y){return!r(y,u)}),v?t(!1,u,{message:"one of the coordinateof the GeoJSON MultiPolygon are invalid"}):!0}if(g===6)return c.geometry?c.properties?p(c.geometry,u):t(!1,u,{message:"expected GeoJSON Feature to have properties"}):t(!1,u,{message:"expected GeoJSON Feature to have a geometry"});if(g===7)return c.features?e.isArray(c.features)?(v=e.find(c.features,function(y){return!p(y)}),v?t(!1,u,{message:"one of the GeoJSON FeatureCollection's features is invalid"}):!0):t(!1,u,{message:"expected GeoJSON FeatureCollection's features to be an array"}):t(!1,u,{message:"expected GeoJSON FeatureCollection to have features"});if(g===8)return c.geometries?e.isArray(c.geometries)?(v=e.find(c.geometries,function(y){return!p(y)}),v?t(!1,u,{message:"one of the GeoJSON GeometryCollection's geometries is invalid"}):!0):t(!1,u,{message:"expected GeoJSON GeometryCollection's geometries to be an array"}):t(!1,u,{message:"expected GeoJSON GeometryCollection to have geometries"})};return ot.toGeoJSON=a,ot.toArray=s,ot.getDistance=l,ot.complexify=f,ot.isGeoJSON=p,ot}var te,Mn;function Ai(){return Mn||(Mn=1,te=Pi()),te}var ye=Ai();function _0(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function bi(e,t,n){n===void 0&&(n={});for(var r=0,o=e;r<o.length;r++){var i=o[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<i[i.length-1].length;a++)if(i[i.length-1][a]!==i[0][a])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return _0(s,t,n)}function Li(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return _0(r,t,n)}function Sn(e){return e.type==="Feature"?e.geometry:e}/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Ii(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(f){return function(p){return l([f,p])}}function l(f){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,o&&(i=f[0]&2?o.return:f[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,f[1])).done)return i;switch(o=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return n.label++,{value:f[1],done:!1};case 5:n.label++,o=f[1],f=[0];continue;case 7:f=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){n=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){n.label=f[1];break}if(f[0]===6&&n.label<i[1]){n.label=i[1],i=f;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(f);break}i[2]&&n.ops.pop(),n.trys.pop();continue}f=t.call(e,n)}catch(p){f=[6,p],o=0}finally{r=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var et=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function Oi(e,t){return e>t?1:e<t?-1:0}function H(e,t,n){for(var r=new et(null,null),o=r,i=r;;){var a=n(e,t.key);if(a<0){if(t.left===null)break;if(n(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,t=s,t.left===null)break}i.left=t,i=t,t=t.left}else if(a>0){if(t.right===null)break;if(n(e,t.right.key)>0){var s=t.right;if(t.right=s.left,s.left=t,t=s,t.right===null)break}o.right=t,o=t,t=t.right}else break}return o.right=t.left,i.left=t.right,t.left=r.right,t.right=r.left,t}function ee(e,t,n,r){var o=new et(e,t);if(n===null)return o.left=o.right=null,o;n=H(e,n,r);var i=r(e,n.key);return i<0?(o.left=n.left,o.right=n,n.left=null):i>=0&&(o.right=n.right,o.left=n,n.right=null),o}function _n(e,t,n){var r=null,o=null;if(t){t=H(e,t,n);var i=n(t.key,e);i===0?(r=t.left,o=t.right):i<0?(o=t.right,t.right=null,r=t):(r=t.left,t.left=null,o=t)}return{left:r,right:o}}function Ri(e,t,n){return t===null?e:(e===null||(t=H(e.key,t,n),t.left=e),t)}function de(e,t,n,r,o){if(e){r(""+t+(n?"└── ":"├── ")+o(e)+`
`);var i=t+(n?"    ":"│   ");e.left&&de(e.left,i,!1,r,o),e.right&&de(e.right,i,!0,r,o)}}var hn=function(){function e(t){t===void 0&&(t=Oi),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=ee(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new et(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,i=H(t,this._root,o),a=o(t,i.key);return a===0?this._root=i:(a<0?(r.left=i.left,r.right=i,i.left=null):a>0&&(r.right=i.right,r.left=i,i.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var o;if(n===null)return null;n=H(t,n,r);var i=r(t,n.key);return i===0?(n.left===null?o=n.right:(o=H(t,n.left,r),o.right=n.right),this._size--,o):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=H(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var o=r(t,n.key);if(o===0)return n;o<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=H(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var o=r(t,n.key);if(o===0)return!0;o<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,o=[],i=!1;!i;)r!==null?(o.push(r),r=r.left):o.length!==0?(r=o.pop(),t.call(n,r),r=r.right):i=!0;return this},e.prototype.range=function(t,n,r,o){for(var i=[],a=this._comparator,s=this._root,l;i.length!==0||s;)if(s)i.push(s),s=s.left;else{if(s=i.pop(),l=a(s.key,n),l>0)break;if(a(s.key,t)>=0&&r.call(o,s))return this;s=s.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,o=0,i=[];!r;)if(n)i.push(n),n=n.left;else if(i.length>0){if(n=i.pop(),o===t)return n;o++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var o=this._comparator;n;){var i=o(t.key,n.key);if(i===0)break;i<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var o=this._comparator;n;){var i=o(t.key,n.key);if(i===0)break;i<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return Ni(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var o=t.length,i=this._comparator;if(r&&we(t,n,0,o-1,i),this._root===null)this._root=me(t,n,0,o),this._size=o;else{var a=qi(this.toList(),Ci(t,n),i);o=this._size+o,this._root=xe({head:a},0,o)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return de(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var o=this._comparator,i=_n(t,this._root,o),a=i.left,s=i.right;o(t,n)<0?s=ee(n,r,s,o):a=ee(n,r,a,o),this._root=Ri(a,s,o)},e.prototype.split=function(t){return _n(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t,n,r;return Ii(this,function(o){switch(o.label){case 0:t=this._root,n=[],r=!1,o.label=1;case 1:return r?[3,6]:t===null?[3,2]:(n.push(t),t=t.left,[3,5]);case 2:return n.length===0?[3,4]:(t=n.pop(),[4,t]);case 3:return o.sent(),t=t.right,[3,5];case 4:r=!0,o.label=5;case 5:return[3,1];case 6:return[2]}})},e}();function me(e,t,n,r){var o=r-n;if(o>0){var i=n+Math.floor(o/2),a=e[i],s=t[i],l=new et(a,s);return l.left=me(e,t,n,i),l.right=me(e,t,i+1,r),l}return null}function Ci(e,t){for(var n=new et(null,null),r=n,o=0;o<e.length;o++)r=r.next=new et(e[o],t[o]);return r.next=null,n.next}function Ni(e){for(var t=e,n=[],r=!1,o=new et(null,null),i=o;!r;)t?(n.push(t),t=t.left):n.length>0?(t=i=i.next=n.pop(),t=t.right):r=!0;return i.next=null,o.next}function xe(e,t,n){var r=n-t;if(r>0){var o=t+Math.floor(r/2),i=xe(e,t,o),a=e.head;return a.left=i,e.head=e.head.next,a.right=xe(e,o+1,n),a}return null}function qi(e,t,n){for(var r=new et(null,null),o=r,i=e,a=t;i!==null&&a!==null;)n(i.key,a.key)<0?(o.next=i,i=i.next):(o.next=a,a=a.next),o=o.next;return i!==null?o.next=i:a!==null&&(o.next=a),r.next}function we(e,t,n,r,o){if(!(n>=r)){for(var i=e[n+r>>1],a=n-1,s=r+1;;){do a++;while(o(e[a],i)<0);do s--;while(o(e[s],i)>0);if(a>=s)break;var l=e[a];e[a]=e[s],e[s]=l,l=t[a],t[a]=t[s],t[s]=l}we(e,t,n,s,o),we(e,t,s+1,r,o)}}const W=11102230246251565e-32,R=134217729,Fi=(3+8*W)*W;function ne(e,t,n,r,o){let i,a,s,l,f=t[0],p=r[0],c=0,u=0;p>f==p>-f?(i=f,f=t[++c]):(i=p,p=r[++u]);let h=0;if(c<e&&u<n)for(p>f==p>-f?(a=f+i,s=i-(a-f),f=t[++c]):(a=p+i,s=i-(a-p),p=r[++u]),i=a,s!==0&&(o[h++]=s);c<e&&u<n;)p>f==p>-f?(a=i+f,l=a-i,s=i-(a-l)+(f-l),f=t[++c]):(a=i+p,l=a-i,s=i-(a-l)+(p-l),p=r[++u]),i=a,s!==0&&(o[h++]=s);for(;c<e;)a=i+f,l=a-i,s=i-(a-l)+(f-l),f=t[++c],i=a,s!==0&&(o[h++]=s);for(;u<n;)a=i+p,l=a-i,s=i-(a-l)+(p-l),p=r[++u],i=a,s!==0&&(o[h++]=s);return(i!==0||h===0)&&(o[h++]=i),h}function Ti(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Ot(e){return new Float64Array(e)}const ki=(3+16*W)*W,Di=(2+12*W)*W,Bi=(9+64*W)*W*W,ct=Ot(4),Pn=Ot(8),An=Ot(12),bn=Ot(16),q=Ot(4);function Gi(e,t,n,r,o,i,a){let s,l,f,p,c,u,h,v,g,y,d,m,E,w,x,M,_,A;const P=e-o,S=n-o,L=t-i,O=r-i;w=P*O,u=R*P,h=u-(u-P),v=P-h,u=R*O,g=u-(u-O),y=O-g,x=v*y-(w-h*g-v*g-h*y),M=L*S,u=R*L,h=u-(u-L),v=L-h,u=R*S,g=u-(u-S),y=S-g,_=v*y-(M-h*g-v*g-h*y),d=x-_,c=x-d,ct[0]=x-(d+c)+(c-_),m=w+d,c=m-w,E=w-(m-c)+(d-c),d=E-M,c=E-d,ct[1]=E-(d+c)+(c-M),A=m+d,c=A-m,ct[2]=m-(A-c)+(d-c),ct[3]=A;let D=Ti(4,ct),B=Di*a;if(D>=B||-D>=B||(c=e-P,s=e-(P+c)+(c-o),c=n-S,f=n-(S+c)+(c-o),c=t-L,l=t-(L+c)+(c-i),c=r-O,p=r-(O+c)+(c-i),s===0&&l===0&&f===0&&p===0)||(B=Bi*a+Fi*Math.abs(D),D+=P*p+O*s-(L*f+S*l),D>=B||-D>=B))return D;w=s*O,u=R*s,h=u-(u-s),v=s-h,u=R*O,g=u-(u-O),y=O-g,x=v*y-(w-h*g-v*g-h*y),M=l*S,u=R*l,h=u-(u-l),v=l-h,u=R*S,g=u-(u-S),y=S-g,_=v*y-(M-h*g-v*g-h*y),d=x-_,c=x-d,q[0]=x-(d+c)+(c-_),m=w+d,c=m-w,E=w-(m-c)+(d-c),d=E-M,c=E-d,q[1]=E-(d+c)+(c-M),A=m+d,c=A-m,q[2]=m-(A-c)+(d-c),q[3]=A;const k0=ne(4,ct,4,q,Pn);w=P*p,u=R*P,h=u-(u-P),v=P-h,u=R*p,g=u-(u-p),y=p-g,x=v*y-(w-h*g-v*g-h*y),M=L*f,u=R*L,h=u-(u-L),v=L-h,u=R*f,g=u-(u-f),y=f-g,_=v*y-(M-h*g-v*g-h*y),d=x-_,c=x-d,q[0]=x-(d+c)+(c-_),m=w+d,c=m-w,E=w-(m-c)+(d-c),d=E-M,c=E-d,q[1]=E-(d+c)+(c-M),A=m+d,c=A-m,q[2]=m-(A-c)+(d-c),q[3]=A;const D0=ne(k0,Pn,4,q,An);w=s*p,u=R*s,h=u-(u-s),v=s-h,u=R*p,g=u-(u-p),y=p-g,x=v*y-(w-h*g-v*g-h*y),M=l*f,u=R*l,h=u-(u-l),v=l-h,u=R*f,g=u-(u-f),y=f-g,_=v*y-(M-h*g-v*g-h*y),d=x-_,c=x-d,q[0]=x-(d+c)+(c-_),m=w+d,c=m-w,E=w-(m-c)+(d-c),d=E-M,c=E-d,q[1]=E-(d+c)+(c-M),A=m+d,c=A-m,q[2]=m-(A-c)+(d-c),q[3]=A;const B0=ne(D0,An,4,q,bn);return bn[B0-1]}function $i(e,t,n,r,o,i){const a=(t-i)*(n-o),s=(e-o)*(r-i),l=a-s,f=Math.abs(a+s);return Math.abs(l)>=ki*f?l:-Gi(e,t,n,r,o,i,f)}var P0={};const dt=(e,t)=>e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y,Ee=(e,t)=>{if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;const n=e.ll.x<t.ll.x?t.ll.x:e.ll.x,r=e.ur.x<t.ur.x?e.ur.x:t.ur.x,o=e.ll.y<t.ll.y?t.ll.y:e.ll.y,i=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:n,y:o},ur:{x:r,y:i}}};let K=Number.EPSILON;K===void 0&&(K=Math.pow(2,-52));const zi=K*K,Ln=(e,t)=>{if(-K<e&&e<K&&-K<t&&t<K)return 0;const n=e-t;return n*n<zi*e*t?0:e<t?-1:1};class Vi{constructor(){this.reset()}reset(){this.xRounder=new In,this.yRounder=new In}round(t,n){return{x:this.xRounder.round(t),y:this.yRounder.round(n)}}}class In{constructor(){this.tree=new hn,this.round(0)}round(t){const n=this.tree.add(t),r=this.tree.prev(n);if(r!==null&&Ln(n.key,r.key)===0)return this.tree.remove(t),r.key;const o=this.tree.next(n);return o!==null&&Ln(n.key,o.key)===0?(this.tree.remove(t),o.key):t}}const Pt=new Vi,Nt=(e,t)=>e.x*t.y-e.y*t.x,A0=(e,t)=>e.x*t.x+e.y*t.y,On=(e,t,n)=>{const r=$i(e.x,e.y,t.x,t.y,n.x,n.y);return r>0?-1:r<0?1:0},Bt=e=>Math.sqrt(A0(e,e)),Ji=(e,t,n)=>{const r={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return Nt(o,r)/Bt(o)/Bt(r)},Yi=(e,t,n)=>{const r={x:t.x-e.x,y:t.y-e.y},o={x:n.x-e.x,y:n.y-e.y};return A0(o,r)/Bt(o)/Bt(r)},Rn=(e,t,n)=>t.y===0?null:{x:e.x+t.x/t.y*(n-e.y),y:n},Cn=(e,t,n)=>t.x===0?null:{x:n,y:e.y+t.y/t.x*(n-e.x)},Xi=(e,t,n,r)=>{if(t.x===0)return Cn(n,r,e.x);if(r.x===0)return Cn(e,t,n.x);if(t.y===0)return Rn(n,r,e.y);if(r.y===0)return Rn(e,t,n.y);const o=Nt(t,r);if(o==0)return null;const i={x:n.x-e.x,y:n.y-e.y},a=Nt(i,t)/o,s=Nt(i,r)/o,l=e.x+s*t.x,f=n.x+a*r.x,p=e.y+s*t.y,c=n.y+a*r.y,u=(l+f)/2,h=(p+c)/2;return{x:u,y:h}};class ${static compare(t,n){const r=$.comparePoints(t.point,n.point);return r!==0?r:(t.point!==n.point&&t.link(n),t.isLeft!==n.isLeft?t.isLeft?1:-1:j.compare(t.segment,n.segment))}static comparePoints(t,n){return t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0}constructor(t,n){t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}link(t){if(t.point===this.point)throw new Error("Tried to link already linked events");const n=t.point.events;for(let r=0,o=n.length;r<o;r++){const i=n[r];this.point.events.push(i),i.point=this.point}this.checkForConsuming()}checkForConsuming(){const t=this.point.events.length;for(let n=0;n<t;n++){const r=this.point.events[n];if(r.segment.consumedBy===void 0)for(let o=n+1;o<t;o++){const i=this.point.events[o];i.consumedBy===void 0&&r.otherSE.point.events===i.otherSE.point.events&&r.segment.consume(i.segment)}}}getAvailableLinkedEvents(){const t=[];for(let n=0,r=this.point.events.length;n<r;n++){const o=this.point.events[n];o!==this&&!o.segment.ringOut&&o.segment.isInResult()&&t.push(o)}return t}getLeftmostComparator(t){const n=new Map,r=o=>{const i=o.otherSE;n.set(o,{sine:Ji(this.point,t.point,i.point),cosine:Yi(this.point,t.point,i.point)})};return(o,i)=>{n.has(o)||r(o),n.has(i)||r(i);const{sine:a,cosine:s}=n.get(o),{sine:l,cosine:f}=n.get(i);return a>=0&&l>=0?s<f?1:s>f?-1:0:a<0&&l<0?s<f?-1:s>f?1:0:l<a?-1:l>a?1:0}}}let Ui=0;class j{static compare(t,n){const r=t.leftSE.point.x,o=n.leftSE.point.x,i=t.rightSE.point.x,a=n.rightSE.point.x;if(a<r)return 1;if(i<o)return-1;const s=t.leftSE.point.y,l=n.leftSE.point.y,f=t.rightSE.point.y,p=n.rightSE.point.y;if(r<o){if(l<s&&l<f)return 1;if(l>s&&l>f)return-1;const c=t.comparePoint(n.leftSE.point);if(c<0)return 1;if(c>0)return-1;const u=n.comparePoint(t.rightSE.point);return u!==0?u:-1}if(r>o){if(s<l&&s<p)return-1;if(s>l&&s>p)return 1;const c=n.comparePoint(t.leftSE.point);if(c!==0)return c;const u=t.comparePoint(n.rightSE.point);return u<0?1:u>0?-1:1}if(s<l)return-1;if(s>l)return 1;if(i<a){const c=n.comparePoint(t.rightSE.point);if(c!==0)return c}if(i>a){const c=t.comparePoint(n.rightSE.point);if(c<0)return 1;if(c>0)return-1}if(i!==a){const c=f-s,u=i-r,h=p-l,v=a-o;if(c>u&&h<v)return 1;if(c<u&&h>v)return-1}return i>a?1:i<a||f<p?-1:f>p?1:t.id<n.id?-1:t.id>n.id?1:0}constructor(t,n,r,o){this.id=++Ui,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=o}static fromRing(t,n,r){let o,i,a;const s=$.comparePoints(t,n);if(s<0)o=t,i=n,a=1;else if(s>0)o=n,i=t,a=-1;else throw new Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);const l=new $(o,!0),f=new $(i,!1);return new j(l,f,[r],[a])}replaceRightSE(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){const t=this.leftSE.point.y,n=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<n?t:n},ur:{x:this.rightSE.point.x,y:t>n?t:n}}}vector(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}isAnEndpoint(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}comparePoint(t){if(this.isAnEndpoint(t))return 0;const n=this.leftSE.point,r=this.rightSE.point,o=this.vector();if(n.x===r.x)return t.x===n.x?0:t.x<n.x?1:-1;const i=(t.y-n.y)/o.y,a=n.x+i*o.x;if(t.x===a)return 0;const s=(t.x-n.x)/o.x,l=n.y+s*o.y;return t.y===l?0:t.y<l?-1:1}getIntersection(t){const n=this.bbox(),r=t.bbox(),o=Ee(n,r);if(o===null)return null;const i=this.leftSE.point,a=this.rightSE.point,s=t.leftSE.point,l=t.rightSE.point,f=dt(n,s)&&this.comparePoint(s)===0,p=dt(r,i)&&t.comparePoint(i)===0,c=dt(n,l)&&this.comparePoint(l)===0,u=dt(r,a)&&t.comparePoint(a)===0;if(p&&f)return u&&!c?a:!u&&c?l:null;if(p)return c&&i.x===l.x&&i.y===l.y?null:i;if(f)return u&&a.x===s.x&&a.y===s.y?null:s;if(u&&c)return null;if(u)return a;if(c)return l;const h=Xi(i,this.vector(),s,t.vector());return h===null||!dt(o,h)?null:Pt.round(h.x,h.y)}split(t){const n=[],r=t.events!==void 0,o=new $(t,!0),i=new $(t,!1),a=this.rightSE;this.replaceRightSE(i),n.push(i),n.push(o);const s=new j(o,a,this.rings.slice(),this.windings.slice());return $.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),$.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(o.checkForConsuming(),i.checkForConsuming()),n}swapEvents(){const t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let n=0,r=this.windings.length;n<r;n++)this.windings[n]*=-1}consume(t){let n=this,r=t;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;const o=j.compare(n,r);if(o!==0){if(o>0){const i=n;n=r,r=i}if(n.prev===r){const i=n;n=r,r=i}for(let i=0,a=r.rings.length;i<a;i++){const s=r.rings[i],l=r.windings[i],f=n.rings.indexOf(s);f===-1?(n.rings.push(s),n.windings.push(l)):n.windings[f]+=l}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}beforeState(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{const t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;const t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};const n=this._afterState.rings,r=this._afterState.windings,o=this._afterState.multiPolys;for(let s=0,l=this.rings.length;s<l;s++){const f=this.rings[s],p=this.windings[s],c=n.indexOf(f);c===-1?(n.push(f),r.push(p)):r[c]+=p}const i=[],a=[];for(let s=0,l=n.length;s<l;s++){if(r[s]===0)continue;const f=n[s],p=f.poly;if(a.indexOf(p)===-1)if(f.isExterior)i.push(p);else{a.indexOf(p)===-1&&a.push(p);const c=i.indexOf(f.poly);c!==-1&&i.splice(c,1)}}for(let s=0,l=i.length;s<l;s++){const f=i[s].multiPoly;o.indexOf(f)===-1&&o.push(f)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;const t=this.beforeState().multiPolys,n=this.afterState().multiPolys;switch(X.type){case"union":{const r=t.length===0,o=n.length===0;this._isInResult=r!==o;break}case"intersection":{let r,o;t.length<n.length?(r=t.length,o=n.length):(r=n.length,o=t.length),this._isInResult=o===X.numMultiPolys&&r<o;break}case"xor":{const r=Math.abs(t.length-n.length);this._isInResult=r%2===1;break}case"difference":{const r=o=>o.length===1&&o[0].isSubject;this._isInResult=r(t)!==r(n);break}default:throw new Error(`Unrecognized operation type found ${X.type}`)}return this._isInResult}}class Nn{constructor(t,n,r){if(!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");const o=Pt.round(t[0][0],t[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};let i=o;for(let a=1,s=t.length;a<s;a++){if(typeof t[a][0]!="number"||typeof t[a][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");let l=Pt.round(t[a][0],t[a][1]);l.x===i.x&&l.y===i.y||(this.segments.push(j.fromRing(i,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),i=l)}(o.x!==i.x||o.y!==i.y)&&this.segments.push(j.fromRing(i,o,this))}getSweepEvents(){const t=[];for(let n=0,r=this.segments.length;n<r;n++){const o=this.segments[n];t.push(o.leftSE),t.push(o.rightSE)}return t}}class Qi{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new Nn(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let r=1,o=t.length;r<o;r++){const i=new Nn(t[r],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}getSweepEvents(){const t=this.exteriorRing.getSweepEvents();for(let n=0,r=this.interiorRings.length;n<r;n++){const o=this.interiorRings[n].getSweepEvents();for(let i=0,a=o.length;i<a;i++)t.push(o[i])}return t}}class qn{constructor(t,n){if(!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(let r=0,o=t.length;r<o;r++){const i=new Qi(t[r],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}getSweepEvents(){const t=[];for(let n=0,r=this.polys.length;n<r;n++){const o=this.polys[n].getSweepEvents();for(let i=0,a=o.length;i<a;i++)t.push(o[i])}return t}}class Gt{static factory(t){const n=[];for(let r=0,o=t.length;r<o;r++){const i=t[r];if(!i.isInResult()||i.ringOut)continue;let a=null,s=i.leftSE,l=i.rightSE;const f=[s],p=s.point,c=[];for(;a=s,s=l,f.push(s),s.point!==p;)for(;;){const u=s.getAvailableLinkedEvents();if(u.length===0){const g=f[0].point,y=f[f.length-1].point;throw new Error(`Unable to complete output ring starting at [${g.x}, ${g.y}]. Last matching segment found ends at [${y.x}, ${y.y}].`)}if(u.length===1){l=u[0].otherSE;break}let h=null;for(let g=0,y=c.length;g<y;g++)if(c[g].point===s.point){h=g;break}if(h!==null){const g=c.splice(h)[0],y=f.splice(g.index);y.unshift(y[0].otherSE),n.push(new Gt(y.reverse()));continue}c.push({index:f.length,point:s.point});const v=s.getLeftmostComparator(a);l=u.sort(v)[0].otherSE;break}n.push(new Gt(f))}return n}constructor(t){this.events=t;for(let n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}getGeom(){let t=this.events[0].point;const n=[t];for(let f=1,p=this.events.length-1;f<p;f++){const c=this.events[f].point,u=this.events[f+1].point;On(c,t,u)!==0&&(n.push(c),t=c)}if(n.length===1)return null;const r=n[0],o=n[1];On(r,t,o)===0&&n.shift(),n.push(n[0]);const i=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:n.length-1,s=this.isExteriorRing()?n.length:-1,l=[];for(let f=a;f!=s;f+=i)l.push([n[f].x,n[f].y]);return l}isExteriorRing(){if(this._isExteriorRing===void 0){const t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let t=this.events[0];for(let o=1,i=this.events.length;o<i;o++){const a=this.events[o];$.compare(t,a)>0&&(t=a)}let n=t.segment.prevInResult(),r=n?n.prevInResult():null;for(;;){if(!n)return null;if(!r)return n.ringOut;if(r.ringOut!==n.ringOut)return r.ringOut.enclosingRing()!==n.ringOut?n.ringOut:n.ringOut.enclosingRing();n=r.prevInResult(),r=n?n.prevInResult():null}}}class Fn{constructor(t){this.exteriorRing=t,t.poly=this,this.interiorRings=[]}addInterior(t){this.interiorRings.push(t),t.poly=this}getGeom(){const t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(let n=0,r=this.interiorRings.length;n<r;n++){const o=this.interiorRings[n].getGeom();o!==null&&t.push(o)}return t}}class Wi{constructor(t){this.rings=t,this.polys=this._composePolys(t)}getGeom(){const t=[];for(let n=0,r=this.polys.length;n<r;n++){const o=this.polys[n].getGeom();o!==null&&t.push(o)}return t}_composePolys(t){const n=[];for(let r=0,o=t.length;r<o;r++){const i=t[r];if(!i.poly)if(i.isExteriorRing())n.push(new Fn(i));else{const a=i.enclosingRing();a.poly||n.push(new Fn(a)),a.poly.addInterior(i)}}return n}}class Zi{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:j.compare;this.queue=t,this.tree=new hn(n),this.segments=[]}process(t){const n=t.segment,r=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(n),r;const o=t.isLeft?this.tree.add(n):this.tree.find(n);if(!o)throw new Error(`Unable to find segment #${n.id} [${n.leftSE.point.x}, ${n.leftSE.point.y}] -> [${n.rightSE.point.x}, ${n.rightSE.point.y}] in SweepLine tree.`);let i=o,a=o,s,l;for(;s===void 0;)i=this.tree.prev(i),i===null?s=null:i.key.consumedBy===void 0&&(s=i.key);for(;l===void 0;)a=this.tree.next(a),a===null?l=null:a.key.consumedBy===void 0&&(l=a.key);if(t.isLeft){let f=null;if(s){const c=s.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(f=c),!s.isAnEndpoint(c))){const u=this._splitSafely(s,c);for(let h=0,v=u.length;h<v;h++)r.push(u[h])}}let p=null;if(l){const c=l.getIntersection(n);if(c!==null&&(n.isAnEndpoint(c)||(p=c),!l.isAnEndpoint(c))){const u=this._splitSafely(l,c);for(let h=0,v=u.length;h<v;h++)r.push(u[h])}}if(f!==null||p!==null){let c=null;f===null?c=p:p===null?c=f:c=$.comparePoints(f,p)<=0?f:p,this.queue.remove(n.rightSE),r.push(n.rightSE);const u=n.split(c);for(let h=0,v=u.length;h<v;h++)r.push(u[h])}r.length>0?(this.tree.remove(n),r.push(t)):(this.segments.push(n),n.prev=s)}else{if(s&&l){const f=s.getIntersection(l);if(f!==null){if(!s.isAnEndpoint(f)){const p=this._splitSafely(s,f);for(let c=0,u=p.length;c<u;c++)r.push(p[c])}if(!l.isAnEndpoint(f)){const p=this._splitSafely(l,f);for(let c=0,u=p.length;c<u;c++)r.push(p[c])}}}this.tree.remove(n)}return r}_splitSafely(t,n){this.tree.remove(t);const r=t.rightSE;this.queue.remove(r);const o=t.split(n);return o.push(r),t.consumedBy===void 0&&this.tree.add(t),o}}const Tn=typeof process<"u"&&P0.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Hi=typeof process<"u"&&P0.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6;class Ki{run(t,n,r){X.type=t,Pt.reset();const o=[new qn(n,!0)];for(let c=0,u=r.length;c<u;c++)o.push(new qn(r[c],!1));if(X.numMultiPolys=o.length,X.type==="difference"){const c=o[0];let u=1;for(;u<o.length;)Ee(o[u].bbox,c.bbox)!==null?u++:o.splice(u,1)}if(X.type==="intersection")for(let c=0,u=o.length;c<u;c++){const h=o[c];for(let v=c+1,g=o.length;v<g;v++)if(Ee(h.bbox,o[v].bbox)===null)return[]}const i=new hn($.compare);for(let c=0,u=o.length;c<u;c++){const h=o[c].getSweepEvents();for(let v=0,g=h.length;v<g;v++)if(i.insert(h[v]),i.size>Tn)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big).")}const a=new Zi(i);let s=i.size,l=i.pop();for(;l;){const c=l.key;if(i.size===s){const h=c.segment;throw new Error(`Unable to pop() ${c.isLeft?"left":"right"} SweepEvent [${c.point.x}, ${c.point.y}] from segment #${h.id} [${h.leftSE.point.x}, ${h.leftSE.point.y}] -> [${h.rightSE.point.x}, ${h.rightSE.point.y}] from queue.`)}if(i.size>Tn)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big).");if(a.segments.length>Hi)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments).");const u=a.process(c);for(let h=0,v=u.length;h<v;h++){const g=u[h];g.consumedBy===void 0&&i.insert(g)}s=i.size,l=i.pop()}Pt.reset();const f=Gt.factory(a.segments);return new Wi(f).getGeom()}}const X=new Ki,ji=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return X.run("union",e,n)},t1=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return X.run("intersection",e,n)},e1=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return X.run("xor",e,n)},n1=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return X.run("difference",e,n)};var r1={union:ji,intersection:t1,xor:e1,difference:n1};function i1(e,t,n){n===void 0&&(n={});var r=Sn(e),o=Sn(t),i=r1.intersection(r.coordinates,o.coordinates);return i.length===0?null:i.length===1?bi(i[0],n.properties):Li(i,n.properties)}function o1(e,t){var n,r,o,i,a,s,l,f,p,c,u=0,h=e.type==="FeatureCollection",v=e.type==="Feature",g=h?e.features.length:1;for(n=0;n<g;n++){for(s=h?e.features[n].geometry:v?e.geometry:e,f=h?e.features[n].properties:v?e.properties:{},p=h?e.features[n].bbox:v?e.bbox:void 0,c=h?e.features[n].id:v?e.id:void 0,l=s?s.type==="GeometryCollection":!1,a=l?s.geometries.length:1,o=0;o<a;o++){if(i=l?s.geometries[o]:s,i===null){if(t(null,u,f,p,c)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,u,f,p,c)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<i.geometries.length;r++)if(t(i.geometries[r],u,f,p,c)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}u++}}function s1(e,t,n){var r=n;return o1(e,function(o,i,a,s,l){i===0&&n===void 0?r=o:r=t(r,o,i,a,s,l)}),r}var kn=6378137;function V(e){return s1(e,function(t,n){return t+a1(n)},0)}function a1(e){var t=0,n;switch(e.type){case"Polygon":return Dn(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=Dn(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Dn(e){var t=0;if(e&&e.length>0){t+=Math.abs(Bn(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(Bn(e[n]))}return t}function Bn(e){var t,n,r,o,i,a,s,l=0,f=e.length;if(f>2){for(s=0;s<f;s++)s===f-2?(o=f-2,i=f-1,a=0):s===f-1?(o=f-1,i=0,a=1):(o=s,i=s+1,a=s+2),t=e[o],n=e[i],r=e[a],l+=(re(r[0])-re(t[0]))*Math.sin(re(n[1]));l=l*kn*kn/2}return l}function re(e){return e*Math.PI/180}function b0(e){for(var t=-1,n=e.length,r,o=e[n-1],i=0;++t<n;)r=o,o=e[t],i+=r[1]*o[0]-r[0]*o[1];return i/2}function u1(e){for(var t=-1,n=e.length,r=0,o=0,i,a=e[n-1],s,l=0;++t<n;)i=a,a=e[t],l+=s=i[0]*a[1]-a[0]*i[1],r+=(i[0]+a[0])*s,o+=(i[1]+a[1])*s;return l*=3,[r/l,o/l]}function l1(e){for(var t=-1,n=e.length,r=e[n-1],o,i,a=r[0],s=r[1],l=0;++t<n;)o=a,i=s,r=e[t],a=r[0],s=r[1],o-=a,i-=s,l+=Math.sqrt(o*o+i*i);return l}var ie,Gn;function f1(){if(Gn)return ie;Gn=1;var e={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},t=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function n(h){return h===10||h===13||h===8232||h===8233||h===32||h===9||h===11||h===12||h===160||h>=5760&&t.indexOf(h)>=0}function r(h){switch(h|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function o(h){return(h|32)===97}function i(h){return h>=48&&h<=57}function a(h){return h>=48&&h<=57||h===43||h===45||h===46}function s(h){this.index=0,this.path=h,this.max=h.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function l(h){for(;h.index<h.max&&n(h.path.charCodeAt(h.index));)h.index++}function f(h){var v=h.path.charCodeAt(h.index);if(v===48){h.param=0,h.index++;return}if(v===49){h.param=1,h.index++;return}h.err="SvgPath: arc flag can be 0 or 1 only (at pos "+h.index+")"}function p(h){var v=h.index,g=v,y=h.max,d=!1,m=!1,E=!1,w=!1,x;if(g>=y){h.err="SvgPath: missed param (at pos "+g+")";return}if(x=h.path.charCodeAt(g),(x===43||x===45)&&(g++,x=g<y?h.path.charCodeAt(g):0),!i(x)&&x!==46){h.err="SvgPath: param should start with 0..9 or `.` (at pos "+g+")";return}if(x!==46){if(d=x===48,g++,x=g<y?h.path.charCodeAt(g):0,d&&g<y&&x&&i(x)){h.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+v+")";return}for(;g<y&&i(h.path.charCodeAt(g));)g++,m=!0;x=g<y?h.path.charCodeAt(g):0}if(x===46){for(w=!0,g++;i(h.path.charCodeAt(g));)g++,E=!0;x=g<y?h.path.charCodeAt(g):0}if(x===101||x===69){if(w&&!m&&!E){h.err="SvgPath: invalid float exponent (at pos "+g+")";return}if(g++,x=g<y?h.path.charCodeAt(g):0,(x===43||x===45)&&g++,g<y&&i(h.path.charCodeAt(g)))for(;g<y&&i(h.path.charCodeAt(g));)g++;else{h.err="SvgPath: invalid float exponent (at pos "+g+")";return}}h.index=g,h.param=parseFloat(h.path.slice(v,g))+0}function c(h){var v,g;v=h.path[h.segmentStart],g=v.toLowerCase();var y=h.data;if(g==="m"&&y.length>2&&(h.result.push([v,y[0],y[1]]),y=y.slice(2),g="l",v=v==="m"?"l":"L"),g==="r")h.result.push([v].concat(y));else for(;y.length>=e[g]&&(h.result.push([v].concat(y.splice(0,e[g]))),!!e[g]););}function u(h){var v=h.max,g,y,d,m,E;if(h.segmentStart=h.index,g=h.path.charCodeAt(h.index),y=o(g),!r(g)){h.err="SvgPath: bad command "+h.path[h.index]+" (at pos "+h.index+")";return}if(m=e[h.path[h.index].toLowerCase()],h.index++,l(h),h.data=[],!m){c(h);return}for(d=!1;;){for(E=m;E>0;E--){if(y&&(E===3||E===4)?f(h):p(h),h.err.length){c(h);return}h.data.push(h.param),l(h),d=!1,h.index<v&&h.path.charCodeAt(h.index)===44&&(h.index++,l(h),d=!0)}if(!d&&(h.index>=h.max||!a(h.path.charCodeAt(h.index))))break}c(h)}return ie=function(v){var g=new s(v),y=g.max;for(l(g);g.index<y&&!g.err.length;)u(g);return g.result.length&&("mM".indexOf(g.result[0][0])<0?(g.err="SvgPath: string should start with `M` or `m`",g.result=[]):g.result[0][0]="M"),{err:g.err,segments:g.result}},ie}var oe,$n;function L0(){if($n)return oe;$n=1;function e(n,r){return[n[0]*r[0]+n[2]*r[1],n[1]*r[0]+n[3]*r[1],n[0]*r[2]+n[2]*r[3],n[1]*r[2]+n[3]*r[3],n[0]*r[4]+n[2]*r[5]+n[4],n[1]*r[4]+n[3]*r[5]+n[5]]}function t(){if(!(this instanceof t))return new t;this.queue=[],this.cache=null}return t.prototype.matrix=function(n){return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1&&n[4]===0&&n[5]===0?this:(this.cache=null,this.queue.push(n),this)},t.prototype.translate=function(n,r){return(n!==0||r!==0)&&(this.cache=null,this.queue.push([1,0,0,1,n,r])),this},t.prototype.scale=function(n,r){return(n!==1||r!==1)&&(this.cache=null,this.queue.push([n,0,0,r,0,0])),this},t.prototype.rotate=function(n,r,o){var i,a,s;return n!==0&&(this.translate(r,o),i=n*Math.PI/180,a=Math.cos(i),s=Math.sin(i),this.queue.push([a,s,-s,a,0,0]),this.cache=null,this.translate(-r,-o)),this},t.prototype.skewX=function(n){return n!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(n*Math.PI/180),1,0,0])),this},t.prototype.skewY=function(n){return n!==0&&(this.cache=null,this.queue.push([1,Math.tan(n*Math.PI/180),0,1,0,0])),this},t.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var n=1;n<this.queue.length;n++)this.cache=e(this.cache,this.queue[n]);return this.cache},t.prototype.calc=function(n,r,o){var i;return this.queue.length?(this.cache||(this.cache=this.toArray()),i=this.cache,[n*i[0]+r*i[2]+(o?0:i[4]),n*i[1]+r*i[3]+(o?0:i[5])]):[n,r]},oe=t,oe}var se,zn;function c1(){if(zn)return se;zn=1;var e=L0(),t={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},n=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,r=/[\s,]+/;return se=function(i){var a=new e,s,l;return i.split(n).forEach(function(f){if(f.length){if(typeof t[f]<"u"){s=f;return}switch(l=f.split(r).map(function(p){return+p||0}),s){case"matrix":l.length===6&&a.matrix(l);return;case"scale":l.length===1?a.scale(l[0],l[0]):l.length===2&&a.scale(l[0],l[1]);return;case"rotate":l.length===1?a.rotate(l[0],0,0):l.length===3&&a.rotate(l[0],l[1],l[2]);return;case"translate":l.length===1?a.translate(l[0],0):l.length===2&&a.translate(l[0],l[1]);return;case"skewX":l.length===1&&a.skewX(l[0]);return;case"skewY":l.length===1&&a.skewY(l[0]);return}}}),a},se}var ae,Vn;function h1(){if(Vn)return ae;Vn=1;var e=Math.PI*2;function t(o,i,a,s){var l=o*s-i*a<0?-1:1,f=o*a+i*s;return f>1&&(f=1),f<-1&&(f=-1),l*Math.acos(f)}function n(o,i,a,s,l,f,p,c,u,h){var v=h*(o-a)/2+u*(i-s)/2,g=-u*(o-a)/2+h*(i-s)/2,y=p*p,d=c*c,m=v*v,E=g*g,w=y*d-y*E-d*m;w<0&&(w=0),w/=y*E+d*m,w=Math.sqrt(w)*(l===f?-1:1);var x=w*p/c*g,M=w*-c/p*v,_=h*x-u*M+(o+a)/2,A=u*x+h*M+(i+s)/2,P=(v-x)/p,S=(g-M)/c,L=(-v-x)/p,O=(-g-M)/c,D=t(1,0,P,S),B=t(P,S,L,O);return f===0&&B>0&&(B-=e),f===1&&B<0&&(B+=e),[_,A,D,B]}function r(o,i){var a=1.3333333333333333*Math.tan(i/4),s=Math.cos(o),l=Math.sin(o),f=Math.cos(o+i),p=Math.sin(o+i);return[s,l,s-l*a,l+s*a,f+p*a,p-f*a,f,p]}return ae=function(i,a,s,l,f,p,c,u,h){var v=Math.sin(h*e/360),g=Math.cos(h*e/360),y=g*(i-s)/2+v*(a-l)/2,d=-v*(i-s)/2+g*(a-l)/2;if(y===0&&d===0)return[];if(c===0||u===0)return[];c=Math.abs(c),u=Math.abs(u);var m=y*y/(c*c)+d*d/(u*u);m>1&&(c*=Math.sqrt(m),u*=Math.sqrt(m));var E=n(i,a,s,l,f,p,c,u,v,g),w=[],x=E[2],M=E[3],_=Math.max(Math.ceil(Math.abs(M)/(e/4)),1);M/=_;for(var A=0;A<_;A++)w.push(r(x,M)),x+=M;return w.map(function(P){for(var S=0;S<P.length;S+=2){var L=P[S+0],O=P[S+1];L*=c,O*=u;var D=g*L-v*O,B=v*L+g*O;P[S+0]=D+E[0],P[S+1]=B+E[1]}return P})},ae}var ue,Jn;function p1(){if(Jn)return ue;Jn=1;var e=1e-10,t=Math.PI/180;function n(r,o,i){if(!(this instanceof n))return new n(r,o,i);this.rx=r,this.ry=o,this.ax=i}return n.prototype.transform=function(r){var o=Math.cos(this.ax*t),i=Math.sin(this.ax*t),a=[this.rx*(r[0]*o+r[2]*i),this.rx*(r[1]*o+r[3]*i),this.ry*(-r[0]*i+r[2]*o),this.ry*(-r[1]*i+r[3]*o)],s=a[0]*a[0]+a[2]*a[2],l=a[1]*a[1]+a[3]*a[3],f=((a[0]-a[3])*(a[0]-a[3])+(a[2]+a[1])*(a[2]+a[1]))*((a[0]+a[3])*(a[0]+a[3])+(a[2]-a[1])*(a[2]-a[1])),p=(s+l)/2;if(f<e*p)return this.rx=this.ry=Math.sqrt(p),this.ax=0,this;var c=a[0]*a[1]+a[2]*a[3];f=Math.sqrt(f);var u=p+f/2,h=p-f/2;return this.ax=Math.abs(c)<e&&Math.abs(u-l)<e?90:Math.atan(Math.abs(c)>Math.abs(u-l)?(u-s)/c:c/(u-l))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(u)),this},n.prototype.isDegenerate=function(){return this.rx<e*this.ry||this.ry<e*this.rx},ue=n,ue}var le,Yn;function g1(){if(Yn)return le;Yn=1;var e=f1(),t=c1(),n=L0(),r=h1(),o=p1();function i(a){if(!(this instanceof i))return new i(a);var s=e(a);this.segments=s.segments,this.err=s.err,this.__stack=[]}return i.from=function(a){if(typeof a=="string")return new i(a);if(a instanceof i){var s=new i("");return s.err=a.err,s.segments=a.segments.map(function(l){return l.slice()}),s.__stack=a.__stack.map(function(l){return n().matrix(l.toArray())}),s}throw new Error("SvgPath.from: invalid param type "+a)},i.prototype.__matrix=function(a){var s=this,l;a.queue.length&&this.iterate(function(f,p,c,u){var h,v,g,y;switch(f[0]){case"v":h=a.calc(0,f[1],!0),v=h[0]===0?["v",h[1]]:["l",h[0],h[1]];break;case"V":h=a.calc(c,f[1],!1),v=h[0]===a.calc(c,u,!1)[0]?["V",h[1]]:["L",h[0],h[1]];break;case"h":h=a.calc(f[1],0,!0),v=h[1]===0?["h",h[0]]:["l",h[0],h[1]];break;case"H":h=a.calc(f[1],u,!1),v=h[1]===a.calc(c,u,!1)[1]?["H",h[0]]:["L",h[0],h[1]];break;case"a":case"A":var d=a.toArray(),m=o(f[1],f[2],f[3]).transform(d);if(d[0]*d[3]-d[1]*d[2]<0&&(f[5]=f[5]?"0":"1"),h=a.calc(f[6],f[7],f[0]==="a"),f[0]==="A"&&f[6]===c&&f[7]===u||f[0]==="a"&&f[6]===0&&f[7]===0){v=[f[0]==="a"?"l":"L",h[0],h[1]];break}m.isDegenerate()?v=[f[0]==="a"?"l":"L",h[0],h[1]]:v=[f[0],m.rx,m.ry,m.ax,f[4],f[5],h[0],h[1]];break;case"m":y=p>0,h=a.calc(f[1],f[2],y),v=["m",h[0],h[1]];break;default:for(g=f[0],v=[g],y=g.toLowerCase()===g,l=1;l<f.length;l+=2)h=a.calc(f[l],f[l+1],y),v.push(h[0],h[1])}s.segments[p]=v},!0)},i.prototype.__evaluateStack=function(){var a,s;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(a=n(),s=this.__stack.length;--s>=0;)a.matrix(this.__stack[s].toArray());this.__matrix(a),this.__stack=[]}},i.prototype.toString=function(){var a="",s="",l=!1;this.__evaluateStack();for(var f=0,p=this.segments.length;f<p;f++){var c=this.segments[f],u=c[0];u!==s||u==="m"||u==="M"?(u==="m"&&s==="z"&&(a+=" "),a+=u,l=!1):l=!0;for(var h=1;h<c.length;h++){var v=c[h];h===1?l&&v>=0&&(a+=" "):v>=0&&(a+=" "),a+=v}s=u}return a},i.prototype.translate=function(a,s){return this.__stack.push(n().translate(a,s||0)),this},i.prototype.scale=function(a,s){return this.__stack.push(n().scale(a,!s&&s!==0?a:s)),this},i.prototype.rotate=function(a,s,l){return this.__stack.push(n().rotate(a,s||0,l||0)),this},i.prototype.skewX=function(a){return this.__stack.push(n().skewX(a)),this},i.prototype.skewY=function(a){return this.__stack.push(n().skewY(a)),this},i.prototype.matrix=function(a){return this.__stack.push(n().matrix(a)),this},i.prototype.transform=function(a){return a.trim()?(this.__stack.push(t(a)),this):this},i.prototype.round=function(a){var s=0,l=0,f=0,p=0,c;return a=a||0,this.__evaluateStack(),this.segments.forEach(function(u){var h=u[0].toLowerCase()===u[0];switch(u[0]){case"H":case"h":h&&(u[1]+=f),f=u[1]-u[1].toFixed(a),u[1]=+u[1].toFixed(a);return;case"V":case"v":h&&(u[1]+=p),p=u[1]-u[1].toFixed(a),u[1]=+u[1].toFixed(a);return;case"Z":case"z":f=s,p=l;return;case"M":case"m":h&&(u[1]+=f,u[2]+=p),f=u[1]-u[1].toFixed(a),p=u[2]-u[2].toFixed(a),s=f,l=p,u[1]=+u[1].toFixed(a),u[2]=+u[2].toFixed(a);return;case"A":case"a":h&&(u[6]+=f,u[7]+=p),f=u[6]-u[6].toFixed(a),p=u[7]-u[7].toFixed(a),u[1]=+u[1].toFixed(a),u[2]=+u[2].toFixed(a),u[3]=+u[3].toFixed(a+2),u[6]=+u[6].toFixed(a),u[7]=+u[7].toFixed(a);return;default:c=u.length,h&&(u[c-2]+=f,u[c-1]+=p),f=u[c-2]-u[c-2].toFixed(a),p=u[c-1]-u[c-1].toFixed(a),u.forEach(function(v,g){g&&(u[g]=+u[g].toFixed(a))});return}}),this},i.prototype.iterate=function(a,s){var l=this.segments,f={},p=!1,c=0,u=0,h=0,v=0,g,y,d;if(s||this.__evaluateStack(),l.forEach(function(m,E){var w=a(m,E,c,u);Array.isArray(w)&&(f[E]=w,p=!0);var x=m[0]===m[0].toLowerCase();switch(m[0]){case"m":case"M":c=m[1]+(x?c:0),u=m[2]+(x?u:0),h=c,v=u;return;case"h":case"H":c=m[1]+(x?c:0);return;case"v":case"V":u=m[1]+(x?u:0);return;case"z":case"Z":c=h,u=v;return;default:c=m[m.length-2]+(x?c:0),u=m[m.length-1]+(x?u:0)}}),!p)return this;for(d=[],g=0;g<l.length;g++)if(typeof f[g]<"u")for(y=0;y<f[g].length;y++)d.push(f[g][y]);else d.push(l[g]);return this.segments=d,this},i.prototype.abs=function(){return this.iterate(function(a,s,l,f){var p=a[0],c=p.toUpperCase(),u;if(p!==c)switch(a[0]=c,p){case"v":a[1]+=f;return;case"a":a[6]+=l,a[7]+=f;return;default:for(u=1;u<a.length;u++)a[u]+=u%2?l:f}},!0),this},i.prototype.rel=function(){return this.iterate(function(a,s,l,f){var p=a[0],c=p.toLowerCase(),u;if(p!==c&&!(s===0&&p==="M"))switch(a[0]=c,p){case"V":a[1]-=f;return;case"A":a[6]-=l,a[7]-=f;return;default:for(u=1;u<a.length;u++)a[u]-=u%2?l:f}},!0),this},i.prototype.unarc=function(){return this.iterate(function(a,s,l,f){var p,c,u,h=[],v=a[0];return v!=="A"&&v!=="a"?null:(v==="a"?(c=l+a[6],u=f+a[7]):(c=a[6],u=a[7]),p=r(l,f,c,u,a[4],a[5],a[1],a[2],a[3]),p.length===0?[[a[0]==="a"?"l":"L",a[6],a[7]]]:(p.forEach(function(g){h.push(["C",g[2],g[3],g[4],g[5],g[6],g[7]])}),h))}),this},i.prototype.unshort=function(){var a=this.segments,s,l,f,p,c;return this.iterate(function(u,h,v,g){var y=u[0],d=y.toUpperCase(),m;h&&(d==="T"?(m=y==="t",f=a[h-1],f[0]==="Q"?(s=f[1]-v,l=f[2]-g):f[0]==="q"?(s=f[1]-f[3],l=f[2]-f[4]):(s=0,l=0),p=-s,c=-l,m||(p+=v,c+=g),a[h]=[m?"q":"Q",p,c,u[1],u[2]]):d==="S"&&(m=y==="s",f=a[h-1],f[0]==="C"?(s=f[3]-v,l=f[4]-g):f[0]==="c"?(s=f[3]-f[5],l=f[4]-f[6]):(s=0,l=0),p=-s,c=-l,m||(p+=v,c+=g),a[h]=[m?"c":"C",p,c,u[1],u[2],u[3],u[4]]))}),this},le=i,le}var fe,Xn;function v1(){return Xn||(Xn=1,fe=g1()),fe}var y1=v1();const d1=V0(y1);var ce={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},m1=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function x1(e){var t=[];return e.replace(m1,function(n,r,o){var i=r.toLowerCase();for(o=E1(o),i==="m"&&o.length>2&&(t.push([r].concat(o.splice(0,2))),i="l",r=r==="m"?"l":"L");o.length>=0;){if(o.length===ce[i])return o.unshift(r),t.push(o);if(o.length<ce[i])throw new Error("malformed path data");t.push([r].concat(o.splice(0,ce[i])))}}),t}var w1=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function E1(e){var t=e.match(w1);return t?t.map(Number):[]}function Y(e,t,n,r,o,i,a,s){return new Me(e,t,n,r,o,i,a,s)}function Me(e,t,n,r,o,i,a,s){this.a={x:e,y:t},this.b={x:n,y:r},this.c={x:o,y:i},this.d={x:a,y:s},a!=null&&s!==null&&s!==void 0?(this.getArcLength=R1,this.getPoint=_1,this.getDerivative=S1):(this.getArcLength=P1,this.getPoint=I0,this.getDerivative=M1),this.init()}Me.prototype={constructor:Me,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(e){var t=he(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t)},getTangentAtLength:function(e){var t=he(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),r=Math.sqrt(n.x*n.x+n.y*n.y),o;return r>0?o={x:n.x/r,y:n.y/r}:o={x:0,y:0},o},getPropertiesAtLength:function(e){var t=he(e,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t),r=Math.sqrt(n.x*n.x+n.y*n.y),o;r>0?o={x:n.x/r,y:n.y/r}:o={x:0,y:0};var i=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],t);return{x:i.x,y:i.y,tangentX:o.x,tangentY:o.y}}};function M1(e,t,n){return{x:(1-n)*2*(e[1]-e[0])+n*2*(e[2]-e[1]),y:(1-n)*2*(t[1]-t[0])+n*2*(t[2]-t[1])}}function S1(e,t,n){var r=I0([3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],[3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],n);return r}function he(e,t,n,r,o){for(var i=1,a=e/t,s=(e-n(r,o,a))/t;i>.001;){var l=n(r,o,a+s),f=n(r,o,a-s),p=Math.abs(e-l)/t,c=Math.abs(e-f)/t;p<i?(i=p,a+=s):c<i?(i=c,a-=s):s/=2}return a}function I0(e,t,n){var r=(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2],o=(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2];return{x:r,y:o}}function _1(e,t,n){var r=(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3],o=(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3];return{x:r,y:o}}function P1(e,t,n){n===void 0&&(n=1);var r=e[0]-2*e[1]+e[2],o=t[0]-2*t[1]+t[2],i=2*e[1]-2*e[0],a=2*t[1]-2*t[0],s=4*(r*r+o*o),l=4*(r*i+o*a),f=i*i+a*a;if(s===0)return n*Math.sqrt(Math.pow(e[2]-e[0],2)+Math.pow(t[2]-t[0],2));var p=l/(2*s),c=f/s,u=n+p,h=c-p*p;return Math.sqrt(s)/2*(u*Math.sqrt(u*u+h)-p*Math.sqrt(p*p+h)+h*Math.log(Math.abs((u+Math.sqrt(u*u+h))/(p+Math.sqrt(p*p+h)))))}var A1=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],b1=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],L1=[[1],[1,1],[1,2,1],[1,3,3,1]];function I1(e,t){return L1[e][t]}function Se(e,t,n){var r=n.length-1,o,i,a;if(r===0)return 0;if(e===0){for(i=0,a=0;a<=r;a++)i+=I1(r,a)*Math.pow(1-t,r-a)*Math.pow(t,a)*n[a];return i}else{for(o=new Array(r),a=0;a<r;a++)o[a]=r*(n[a+1]-n[a]);return Se(e-1,t,o)}}function O1(e,t,n){var r=Se(1,n,e),o=Se(1,n,t),i=r*r+o*o;return Math.sqrt(i)}function R1(e,t,n){var r,o,i,a;n===void 0&&(n=1);var s=20;for(r=n/2,o=0,i=0;i<s;i++)a=r*A1[s][i]+r,o+=b1[s][i]*O1(e,t,a);return r*o}var mt=Math.PI*2;function Un(e,t,n,r){var o=e*r-t*n<0?-1:1,i=e*n+t*r;return i>1&&(i=1),i<-1&&(i=-1),o*Math.acos(i)}function C1(e,t,n,r,o,i,a,s,l,f){var p=f*(e-n)/2+l*(t-r)/2,c=-l*(e-n)/2+f*(t-r)/2,u=a*a,h=s*s,v=p*p,g=c*c,y=u*h-u*g-h*v;y<0&&(y=0),y/=u*g+h*v,y=Math.sqrt(y)*(o===i?-1:1);var d=y*a/s*c,m=y*-s/a*p,E=f*d-l*m+(e+n)/2,w=l*d+f*m+(t+r)/2,x=(p-d)/a,M=(c-m)/s,_=(-p-d)/a,A=(-c-m)/s,P=Un(1,0,x,M),S=Un(x,M,_,A);return i===0&&S>0&&(S-=mt),i===1&&S<0&&(S+=mt),[E,w,P,S]}function N1(e,t){var n=1.3333333333333333*Math.tan(t/4),r=Math.cos(e),o=Math.sin(e),i=Math.cos(e+t),a=Math.sin(e+t);return[r,o,r-o*n,o+r*n,i+a*n,a-i*n,i,a]}function q1(e,t,n,r,o,i,a,s,l){var f=Math.sin(o*mt/360),p=Math.cos(o*mt/360),c=p*(e-s)/2+f*(t-l)/2,u=-f*(e-s)/2+p*(t-l)/2;if(c===0&&u===0)return[];if(n===0||r===0)return[];n=Math.abs(n),r=Math.abs(r);var h=c*c/(n*n)+u*u/(r*r);h>1&&(n*=Math.sqrt(h),r*=Math.sqrt(h));var v=C1(e,t,s,l,i,a,n,r,f,p),g=[],y=v[2],d=v[3],m=Math.max(Math.ceil(Math.abs(d)/(mt/4)),1);d/=m;for(var E=0;E<m;E++)g.push(N1(y,d)),y+=d;return g.map(function(w){for(var x=0;x<w.length;x+=2){var M=w[x+0],_=w[x+1];M*=n,_*=r;var A=p*M-f*_,P=f*M+p*_;w[x+0]=A+v[0],w[x+1]=P+v[1]}return w})}function Qn(e,t,n,r,o,i,a,s,l){return new _e(e,t,n,r,o,i,a,s,l)}function _e(e,t,n,r,o,i,a,s,l){var f=0,p=[],c=[],u=q1(e,t,n,r,o,i,a,s,l);u.forEach(function(h){var v=new Y(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7]),g=v.getTotalLength();f+=g,p.push(g),c.push(v)}),this.length=f,this.partialLengths=p,this.curves=c}_e.prototype={constructor:_e,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(e){e<0?e=0:e>this.length&&(e=this.length);for(var t=this.partialLengths.length-1;this.partialLengths[t]>=e&&this.partialLengths[t]>0;)t--;t<this.partialLengths.length-1&&t++;for(var n=0,r=0;r<t;r++)n+=this.partialLengths[r];return this.curves[t].getPointAtLength(e-n)},getTangentAtLength:function(e){e<0?e=0:e>this.length&&(e=this.length);for(var t=this.partialLengths.length-1;this.partialLengths[t]>=e&&this.partialLengths[t]>0;)t--;t<this.partialLengths.length-1&&t++;for(var n=0,r=0;r<t;r++)n+=this.partialLengths[r];return this.curves[t].getTangentAtLength(e-n)},getPropertiesAtLength:function(e){var t=this.getTangentAtLength(e),n=this.getPointAtLength(e);return{x:n.x,y:n.y,tangentX:t.x,tangentY:t.y}}};function J(e,t,n,r){return new Rt(e,t,n,r)}function Rt(e,t,n,r){this.x0=e,this.x1=t,this.y0=n,this.y1=r}Rt.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))};Rt.prototype.getPointAtLength=function(e){var t=e/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),n=(this.x1-this.x0)*t,r=(this.y1-this.y0)*t;return{x:this.x0+n,y:this.y0+r}};Rt.prototype.getTangentAtLength=function(){var e=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/e,y:(this.y1-this.y0)/e}};Rt.prototype.getPropertiesAtLength=function(e){var t=this.getPointAtLength(e),n=this.getTangentAtLength();return{x:t.x,y:t.y,tangentX:n.x,tangentY:n.y}};function F1(e){var t=0,n=[],r=[];function o(a){if(!a)return null;for(var s=x1(a),l=[0,0],f=[0,0],p,c,u=0;u<s.length;u++)s[u][0]==="M"?(l=[s[u][1],s[u][2]],c=[l[0],l[1]],r.push(null)):s[u][0]==="m"?(l=[s[u][1]+l[0],s[u][2]+l[1]],c=[l[0],l[1]],r.push(null)):s[u][0]==="L"?(t=t+Math.sqrt(Math.pow(l[0]-s[u][1],2)+Math.pow(l[1]-s[u][2],2)),r.push(new J(l[0],s[u][1],l[1],s[u][2])),l=[s[u][1],s[u][2]]):s[u][0]==="l"?(t=t+Math.sqrt(Math.pow(s[u][1],2)+Math.pow(s[u][2],2)),r.push(new J(l[0],s[u][1]+l[0],l[1],s[u][2]+l[1])),l=[s[u][1]+l[0],s[u][2]+l[1]]):s[u][0]==="H"?(t=t+Math.abs(l[0]-s[u][1]),r.push(new J(l[0],s[u][1],l[1],l[1])),l[0]=s[u][1]):s[u][0]==="h"?(t=t+Math.abs(s[u][1]),r.push(new J(l[0],l[0]+s[u][1],l[1],l[1])),l[0]=s[u][1]+l[0]):s[u][0]==="V"?(t=t+Math.abs(l[1]-s[u][1]),r.push(new J(l[0],l[0],l[1],s[u][1])),l[1]=s[u][1]):s[u][0]==="v"?(t=t+Math.abs(s[u][1]),r.push(new J(l[0],l[0],l[1],l[1]+s[u][1])),l[1]=s[u][1]+l[1]):s[u][0]==="z"||s[u][0]==="Z"?(t=t+Math.sqrt(Math.pow(c[0]-l[0],2)+Math.pow(c[1]-l[1],2)),r.push(new J(l[0],c[0],l[1],c[1])),l=[c[0],c[1]]):s[u][0]==="C"?(p=new Y(l[0],l[1],s[u][1],s[u][2],s[u][3],s[u][4],s[u][5],s[u][6]),t=t+p.getTotalLength(),l=[s[u][5],s[u][6]],r.push(p)):s[u][0]==="c"?(p=new Y(l[0],l[1],l[0]+s[u][1],l[1]+s[u][2],l[0]+s[u][3],l[1]+s[u][4],l[0]+s[u][5],l[1]+s[u][6]),t=t+p.getTotalLength(),l=[s[u][5]+l[0],s[u][6]+l[1]],r.push(p)):s[u][0]==="S"?(u>0&&["C","c","S","s"].indexOf(s[u-1][0])>-1?p=new Y(l[0],l[1],2*l[0]-s[u-1][s[u-1].length-4],2*l[1]-s[u-1][s[u-1].length-3],s[u][1],s[u][2],s[u][3],s[u][4]):p=new Y(l[0],l[1],l[0],l[1],s[u][1],s[u][2],s[u][3],s[u][4]),t=t+p.getTotalLength(),l=[s[u][3],s[u][4]],r.push(p)):s[u][0]==="s"?(u>0&&["C","c","S","s"].indexOf(s[u-1][0])>-1?p=new Y(l[0],l[1],l[0]+p.d.x-p.c.x,l[1]+p.d.y-p.c.y,l[0]+s[u][1],l[1]+s[u][2],l[0]+s[u][3],l[1]+s[u][4]):p=new Y(l[0],l[1],l[0],l[1],l[0]+s[u][1],l[1]+s[u][2],l[0]+s[u][3],l[1]+s[u][4]),t=t+p.getTotalLength(),l=[s[u][3]+l[0],s[u][4]+l[1]],r.push(p)):s[u][0]==="Q"?(l[0]!=s[u][1]&&l[1]!=s[u][2]?p=new Y(l[0],l[1],s[u][1],s[u][2],s[u][3],s[u][4]):p=new J(s[u][1],s[u][3],s[u][2],s[u][4]),t=t+p.getTotalLength(),r.push(p),l=[s[u][3],s[u][4]],f=[s[u][1],s[u][2]]):s[u][0]==="q"?(s[u][1]==0&&s[u][2]==0?p=new J(l[0]+s[u][1],l[0]+s[u][3],l[1]+s[u][2],l[1]+s[u][4]):p=new Y(l[0],l[1],l[0]+s[u][1],l[1]+s[u][2],l[0]+s[u][3],l[1]+s[u][4]),t=t+p.getTotalLength(),f=[l[0]+s[u][1],l[1]+s[u][2]],l=[s[u][3]+l[0],s[u][4]+l[1]],r.push(p)):s[u][0]==="T"?(u>0&&["Q","q","T","t"].indexOf(s[u-1][0])>-1?p=new Y(l[0],l[1],2*l[0]-f[0],2*l[1]-f[1],s[u][1],s[u][2]):p=new J(l[0],s[u][1],l[1],s[u][2]),r.push(p),t=t+p.getTotalLength(),f=[2*l[0]-f[0],2*l[1]-f[1]],l=[s[u][1],s[u][2]]):s[u][0]==="t"?(u>0&&["Q","q","T","t"].indexOf(s[u-1][0])>-1?p=new Y(l[0],l[1],2*l[0]-f[0],2*l[1]-f[1],l[0]+s[u][1],l[1]+s[u][2]):p=new J(l[0],l[0]+s[u][1],l[1],l[1]+s[u][2]),t=t+p.getTotalLength(),f=[2*l[0]-f[0],2*l[1]-f[1]],l=[s[u][1]+l[0],s[u][2]+l[0]],r.push(p)):s[u][0]==="A"?(p=new Qn(l[0],l[1],s[u][1],s[u][2],s[u][3],s[u][4],s[u][5],s[u][6],s[u][7]),t=t+p.getTotalLength(),l=[s[u][6],s[u][7]],r.push(p)):s[u][0]==="a"&&(p=new Qn(l[0],l[1],s[u][1],s[u][2],s[u][3],s[u][4],s[u][5],l[0]+s[u][6],l[1]+s[u][7]),t=t+p.getTotalLength(),l=[l[0]+s[u][6],l[1]+s[u][7]],r.push(p)),n.push(t);return o}o.getTotalLength=function(){return t},o.getPointAtLength=function(a){var s=i(a);return r[s.i].getPointAtLength(s.fraction)},o.getTangentAtLength=function(a){var s=i(a);return r[s.i].getTangentAtLength(s.fraction)},o.getPropertiesAtLength=function(a){var s=i(a);return r[s.i].getPropertiesAtLength(s.fraction)};var i=function(a){a<0?a=0:a>t&&(a=t);for(var s=n.length-1;n[s]>=a&&n[s]>0;)s--;return s++,{fraction:a-n[s-1],i:s}};return o(e)}function Ct(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}function O0(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function T1(e,t){return Ct(e,t)<1e-9}function k1(e,t,n){let r=e.map((o,i)=>D1(o,t[i]));return function(o){let i=r.map(a=>a(o));return n?V1(i):i}}function D1(e,t){return function(n){return e.map((r,o)=>r+n*(t[o]-r))}}function $t(e){return typeof e=="number"&&isFinite(e)}function Wn(e){return B1(e)?u1(e):[(e[0][0]+e[e.length-1][0])/2,(e[0][1]+e[e.length-1][1])/2]}function B1(e){for(let t=0;t<e.length-2;t++){let n=e[t],r=e[t+1],o=e[t+2];if(n[0]*(r[1]-o[1])+r[0]*(o[1]-n[1])+o[0]*(n[1]-r[1]))return!0}return!1}const Pe=`All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).
Example valid ways of supplying a shape would be:
[[0, 0], [10, 0], [10, 10]]
"M0,0 L10,0 L10,10Z"
`,G1="flubber.all() expects two arrays of equal length as arguments. Each element in both arrays should be an array of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).";function $1(e){return new d1(e).abs()}function z1(e){return e.toString().split("M").map((t,n)=>(t=t.trim(),n&&t?"M"+t:t)).filter(t=>t)}function V1(e){return"M"+e.join("L")+"Z"}function J1(e,t){let n=$1(e);return Y1(n)||X1(n,t)}function Y1(e){let t=e.segments||[],n=[];if(!t.length||t[0][0]!=="M")return!1;for(let r=0;r<t.length;r++){let[o,i,a]=t[r];if(o==="M"&&r||o==="Z")break;if(o==="M"||o==="L")n.push([i,a]);else if(o==="H")n.push([i,n[n.length-1][1]]);else if(o==="V")n.push([n[n.length-1][0],i]);else return!1}return n.length?{ring:n}:!1}function X1(e,t){let n=z1(e)[0],r=[],o,i,a=3;if(!n)throw new TypeError(Pe);i=U1(n),o=i.getTotalLength(),t&&$t(t)&&t>0&&(a=Math.max(a,Math.ceil(o/t)));for(let s=0;s<a;s++){let l=i.getPointAtLength(o*s/a);r.push([l.x,l.y])}return{ring:r,skipBisect:!0}}function U1(e){if(typeof window<"u"&&window&&window.document)try{let t=window.document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttributeNS(null,"d",e),t}catch{}return F1(e)}function Ae(e,t){const n=e.length+t,r=l1(e)/t;let o=0,i=0,a=r/2;for(;e.length<n;){let s=e[o],l=e[(o+1)%e.length],f=Ct(s,l);if(a<=i+f){e.splice(o+1,0,f?O0(s,l,(a-i)/f):s.slice(0)),a+=r;continue}i+=f,o++}}function Q1(e,t=1/0){for(let n=0;n<e.length;n++){let r=e[n],o=n===e.length-1?e[0]:e[n+1];for(;Ct(r,o)>t;)o=O0(r,o,.5),e.splice(n+1,0,o)}}function At(e,t){let n,r,o;if(typeof e=="string"){let i=J1(e,t);e=i.ring,o=i.skipBisect}else if(!Array.isArray(e))throw new TypeError(Pe);if(n=e.slice(0),!W1(n))throw new TypeError(Pe);return n.length>1&&T1(n[0],n[n.length-1])&&n.pop(),r=b0(n),r>0&&n.reverse(),!o&&t&&$t(t)&&t>0&&Q1(n,t),n}function W1(e){return e.every(function(t){return Array.isArray(t)&&t.length>=2&&$t(t[0])&&$t(t[1])})}function Z1(e,t){let n=e.length,r=1/0,o,i,a;for(let s=0;s<n;s++)i=0,t.forEach(function(l,f){let p=Ct(e[(s+f)%n],l);i+=p*p}),i<r&&(r=i,o=s);o&&(a=e.splice(0,o),e.splice(e.length,0,...a))}function H1(e,t,{maxSegmentLength:n=10,string:r=!0}={}){let o=At(e,n),i=At(t,n),a=R0(o,i,r);return!r||typeof e!="string"&&typeof t!="string"?a:s=>s<1e-4&&typeof e=="string"?e:1-s<1e-4&&typeof t=="string"?t:a(s)}function R0(e,t,n){let r;return r=e.length-t.length,Ae(e,r<0?r*-1:0),Ae(t,r>0?r:0),Z1(e,t),k1(e,t,n)}function K1(e){return e}function j1(e){if(e==null)return K1;var t,n,r=e.scale[0],o=e.scale[1],i=e.translate[0],a=e.translate[1];return function(s,l){l||(t=n=0);var f=2,p=s.length,c=new Array(p);for(c[0]=(t+=s[0])*r+i,c[1]=(n+=s[1])*o+a;f<p;)c[f]=s[f],++f;return c}}function to(e,t){for(var n,r=e.length,o=r-t;o<--r;)n=e[o],e[o++]=e[r],e[r]=n}function eo(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Zn(e,n)})}:Zn(e,t)}function Zn(e,t){var n=t.id,r=t.bbox,o=t.properties==null?{}:t.properties,i=C0(e,t);return n==null&&r==null?{type:"Feature",properties:o,geometry:i}:r==null?{type:"Feature",id:n,properties:o,geometry:i}:{type:"Feature",id:n,bbox:r,properties:o,geometry:i}}function C0(e,t){var n=j1(e.transform),r=e.arcs;function o(p,c){c.length&&c.pop();for(var u=r[p<0?~p:p],h=0,v=u.length;h<v;++h)c.push(n(u[h],h));p<0&&to(c,v)}function i(p){return n(p)}function a(p){for(var c=[],u=0,h=p.length;u<h;++u)o(p[u],c);return c.length<2&&c.push(c[0]),c}function s(p){for(var c=a(p);c.length<4;)c.push(c[0]);return c}function l(p){return p.map(s)}function f(p){var c=p.type,u;switch(c){case"GeometryCollection":return{type:c,geometries:p.geometries.map(f)};case"Point":u=i(p.coordinates);break;case"MultiPoint":u=p.coordinates.map(i);break;case"LineString":u=a(p.arcs);break;case"MultiLineString":u=p.arcs.map(a);break;case"Polygon":u=l(p.arcs);break;case"MultiPolygon":u=p.arcs.map(l);break;default:return null}return{type:c,coordinates:u}}return f(t)}function no(e,t){var n={},r={},o={},i=[],a=-1;t.forEach(function(f,p){var c=e.arcs[f<0?~f:f],u;c.length<3&&!c[1][0]&&!c[1][1]&&(u=t[++a],t[a]=f,t[p]=u)}),t.forEach(function(f){var p=s(f),c=p[0],u=p[1],h,v;if(h=o[c])if(delete o[h.end],h.push(f),h.end=u,v=r[u]){delete r[v.start];var g=v===h?h:h.concat(v);r[g.start=h.start]=o[g.end=v.end]=g}else r[h.start]=o[h.end]=h;else if(h=r[u])if(delete r[h.start],h.unshift(f),h.start=c,v=o[c]){delete o[v.end];var y=v===h?h:v.concat(h);r[y.start=v.start]=o[y.end=h.end]=y}else r[h.start]=o[h.end]=h;else h=[f],r[h.start=c]=o[h.end=u]=h});function s(f){var p=e.arcs[f<0?~f:f],c=p[0],u;return e.transform?(u=[0,0],p.forEach(function(h){u[0]+=h[0],u[1]+=h[1]})):u=p[p.length-1],f<0?[u,c]:[c,u]}function l(f,p){for(var c in f){var u=f[c];delete p[u.start],delete u.start,delete u.end,u.forEach(function(h){n[h<0?~h:h]=1}),i.push(u)}}return l(o,r),l(r,o),t.forEach(function(f){n[f<0?~f:f]||i.push([f])}),i}function ro(e){for(var t=-1,n=e.length,r,o=e[n-1],i=0;++t<n;)r=o,o=e[t],i+=r[0]*o[1]-r[1]*o[0];return Math.abs(i)}function io(e,t){var n={},r=[],o=[];t.forEach(i);function i(l){switch(l.type){case"GeometryCollection":l.geometries.forEach(i);break;case"Polygon":a(l.arcs);break;case"MultiPolygon":l.arcs.forEach(a);break}}function a(l){l.forEach(function(f){f.forEach(function(p){(n[p=p<0?~p:p]||(n[p]=[])).push(l)})}),r.push(l)}function s(l){return ro(C0(e,{type:"Polygon",arcs:[l]}).coordinates[0])}return r.forEach(function(l){if(!l._){var f=[],p=[l];for(l._=1,o.push(f);l=p.pop();)f.push(l),l.forEach(function(c){c.forEach(function(u){n[u<0?~u:u].forEach(function(h){h._||(h._=1,p.push(h))})})})}}),r.forEach(function(l){delete l._}),{type:"MultiPolygon",arcs:o.map(function(l){var f=[],p;if(l.forEach(function(g){g.forEach(function(y){y.forEach(function(d){n[d<0?~d:d].length<2&&f.push(d)})})}),f=no(e,f),(p=f.length)>1)for(var c=1,u=s(f[0]),h,v;c<p;++c)(h=s(f[c]))>u&&(v=f[0],f[0]=f[c],f[c]=v,u=h);return f}).filter(function(l){return l.length>0})}}function Hn(e,t){for(var n=0,r=e.length;n<r;){var o=n+r>>>1;e[o]<t?n=o+1:r=o}return n}function oo(e){var t={},n=e.map(function(){return[]});function r(g,y){g.forEach(function(d){d<0&&(d=~d);var m=t[d];m?m.push(y):t[d]=[y]})}function o(g,y){g.forEach(function(d){r(d,y)})}function i(g,y){g.type==="GeometryCollection"?g.geometries.forEach(function(d){i(d,y)}):g.type in a&&a[g.type](g.arcs,y)}var a={LineString:r,MultiLineString:o,Polygon:o,MultiPolygon:function(g,y){g.forEach(function(d){o(d,y)})}};e.forEach(i);for(var s in t)for(var l=t[s],f=l.length,p=0;p<f;++p)for(var c=p+1;c<f;++c){var u=l[p],h=l[c],v;(v=n[u])[s=Hn(v,h)]!==h&&v.splice(s,0,h),(v=n[h])[s=Hn(v,u)]!==u&&v.splice(s,0,u)}return n}function N0(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function q0(e){return e.length===1&&(e=so(e)),{left:function(t,n,r,o){for(r==null&&(r=0),o==null&&(o=t.length);r<o;){var i=r+o>>>1;e(t[i],n)<0?r=i+1:o=i}return r},right:function(t,n,r,o){for(r==null&&(r=0),o==null&&(o=t.length);r<o;){var i=r+o>>>1;e(t[i],n)>0?o=i:r=i+1}return r}}}function so(e){return function(t,n){return N0(e(t),n)}}q0(N0);function ao(e,t){const n={},r={type:"Topology",objects:{triangles:{type:"GeometryCollection",geometries:[]}},arcs:[]};return e.forEach(function(o){const i=[];o.forEach(function(a,s){const l=a[0]<a[1]?a.join(","):a[1]+","+a[0],f=a.map(function(p){return t[p]});l in n?i.push(~n[l]):(i.push(n[l]=r.arcs.length),r.arcs.push(f))}),r.objects.triangles.geometries.push({type:"Polygon",area:Math.abs(b0(o.map(function(a){return t[a[0]]}))),arcs:[i]})}),r.objects.triangles.geometries.sort((o,i)=>o.area-i.area),r}function uo(e,t){const n=e.objects.triangles.geometries,r=q0(i=>i.area).left;for(;n.length>t;)o();if(t>n.length)throw new RangeError("Can't collapse topology into "+t+" pieces.");return eo(e,e.objects.triangles).features.map(i=>(i.geometry.coordinates[0].pop(),i.geometry.coordinates[0]));function o(){const i=n[0],a=oo(n)[0][0],s=n[a],l=io(e,[i,s]);l.area=i.area+s.area,l.type="Polygon",l.arcs=l.arcs[0],n.splice(a,1),n.shift(),n.splice(r(n,l.area),0,l)}}function lo(e,t){return uo(ao(fo(e),e),t)}function fo(e){let t=Y0(e.reduce((r,o)=>[...r,o[0],o[1]],[])),n=[];for(let r=0,o=t.length;r<o;r+=3)n.push([[t[r],t[r+1]],[t[r+1],t[r+2]],[t[r+2],t[r]]]);return n}function co(e,t){if(e.length>8)return e.map((r,o)=>o);let n=e.map(r=>t.map(o=>po(r,o)));return ho(e,t,n)}function ho(e,t,n){let r=1/0,o=e.map((a,s)=>s);function i(a,s=[],l=0){for(let f=0;f<a.length;f++){let p=a.splice(f,1),c=n[p[0]][s.length];l+c<r&&(a.length?i(a.slice(),s.concat(p),l+c):(r=l+c,o=s.concat(p))),a.length&&a.splice(f,0,p[0])}}return i(o),o}function po(e,t){let n=Ct(Wn(e),Wn(t));return n*n}function F0(e,t,{maxSegmentLength:n=10,string:r=!0,single:o=!1}={}){let i=At(e,n);i.length<t.length+2&&Ae(i,t.length+2-i.length);let a=lo(i,t.length),s=t.map(p=>At(p,n)),l=typeof e=="string"&&e,f;return(!o||t.every(p=>typeof p=="string"))&&(f=t.slice(0)),T0(a,s,{match:!0,string:r,single:o,t0:l,t1:f})}function go(e,t,{maxSegmentLength:n=10,string:r=!0,single:o=!1}={}){let i=F0(t,e,{maxSegmentLength:n,string:r,single:o});return o?a=>i(1-a):i.map(a=>s=>a(1-s))}function vo(e,t,{maxSegmentLength:n=10,string:r=!0,single:o=!1}={}){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length||!e.length)throw new TypeError(G1);let i=p=>At(p,n),a=e.map(i),s=t.map(i),l,f;return o?(e.every(p=>typeof p=="string")&&(l=e.slice(0)),t.every(p=>typeof p=="string")&&(f=t.slice(0))):(l=e.slice(0),f=t.slice(0)),T0(a,s,{string:r,single:o,t0:l,t1:f,match:!1})}function T0(e,t,{string:n,single:r,t0:o,t1:i,match:a}={}){let s=a?co(e,t):e.map((f,p)=>p),l=s.map((f,p)=>R0(e[f],t[p],n));if(a&&Array.isArray(o)&&(o=s.map(f=>o[f])),r&&n&&(Array.isArray(o)&&(o=o.join(" ")),Array.isArray(i)&&(i=i.join(" "))),r){let f=n?p=>l.map(c=>c(p)).join(" "):p=>l.map(c=>c(p));return n&&(o||i)?p=>p<1e-4&&o||1-p<1e-4&&i||f(p):f}else if(n)return o=Array.isArray(o)?o.map(f=>typeof f=="string"&&f):[],i=Array.isArray(i)?i.map(f=>typeof f=="string"&&f):[],l.map((f,p)=>o[p]||i[p]?c=>c<1e-4&&o[p]||1-c<1e-4&&i[p]||f(c):f);return l}class yo{constructor(t,n,r=350){Q(this,"waitDuration",75);Q(this,"morphDuration",0);Q(this,"startTime");Q(this,"interpolator");Q(this,"canceled",!1);const o=i1(t,n),i=o?V(o):0,a=V(n),s=V(t),l=.99;(i/a<l||i/s<l)&&(this.morphDuration=Math.min(Math.max(1-i/s,1-i/a)*25e3,r)),this.startTime=+new Date;const f=ye.toArray(n.geometry),p=ye.toArray(t.geometry);let c=null,u=null;n.geometry.type==="MultiPolygon"&&(c=f.sort((h,v)=>V({type:"Polygon",coordinates:[v]})-V({type:"Polygon",coordinates:[h]}))),t.geometry.type==="MultiPolygon"&&(u=p.sort((h,v)=>V({type:"Polygon",coordinates:[v]})-V({type:"Polygon",coordinates:[h]}))),c&&u&&c.length===u.length?this.interpolator=vo(c,u,{string:!1,single:!0}):n.geometry.type==="Polygon"&&t.geometry.type==="MultiPolygon"?this.interpolator=F0(f,u,{string:!1,single:!0}):n.geometry.type==="MultiPolygon"&&t.geometry.type==="Polygon"?this.interpolator=go(c,p,{string:!1,single:!0}):this.interpolator=H1(n.geometry.type==="MultiPolygon"?n.geometry.coordinates.sort((h,v)=>V({type:"Polygon",coordinates:v})-V({type:"Polygon",coordinates:h}))[0][0]:n.geometry.coordinates[0],t.geometry.type==="MultiPolygon"?t.geometry.coordinates.sort((h,v)=>V({type:"Polygon",coordinates:v})-V({type:"Polygon",coordinates:h}))[0][0]:t.geometry.coordinates[0],{string:!1})}cancel(){this.canceled=!0}}class mo{constructor(t,n){Q(this,"source");Q(this,"sourceLoaded",!1);Q(this,"morphOption");Q(this,"feature");this.source=t,this.morphOption=Object.assign({maxDuration:350},n)}async morph(t){if(this.sourceLoaded||(this.feature=await this.initSource(this.source)),!this.feature){this.feature=t,this.source.setData(t);return}const n=this.feature,r=t;this.feature=t;const o=new yo(r,n,this.morphOption.maxDuration),i=()=>{if(o.canceled)return;const a=+new Date-o.startTime;let s;if(a<=o.waitDuration)s=Math.min(a/o.waitDuration,1),window.requestAnimationFrame(i);else if(o.morphDuration>0&&a-o.waitDuration<=o.morphDuration){s=Math.min((a-o.waitDuration)/o.morphDuration,1);const l=o.interpolator(s);let f;l[0][0][0]?f={type:"Feature",properties:n.properties,geometry:ye.toGeoJSON([l],"MultiPolygon")}:f={type:"Feature",properties:n.properties,geometry:{type:"Polygon",coordinates:[l]}},this.source.setData(f),window.requestAnimationFrame(i)}else this.source.setData(t)};i()}async initSource(t){const n=t._data;let r;typeof n=="string"?r=await(await fetch(n)).json():r=n;let o;if(r.type==="FeatureCollection")if(r.features.length===1)o=r.features[0];else{this.sourceLoaded=!0;return}else o=r;if(o.geometry.type==="Polygon"||o.geometry.type==="MultiPolygon")return this.sourceLoaded=!0,o;throw new Error("The type of feature must be 'Polygon' or 'MultiPolygon'.")}}const xo={class:"control"},_o=X0({__name:"polygon-morpher",setup(e){const t={center:[-73.950543,40.7611],zoom:11};let n,r,o=0;const i=s=>{o+=s,o<0&&(o=n.length+o),r&&n.length>0&&r.morph(n[o%n.length])},a=s=>{s.addSource("geojson-source",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),s.addLayer({id:"poly-layer",type:"fill",source:"geojson-source",paint:{"fill-color":"rgba(152, 224, 173, 0.5)"}},"aeroway-line"),s.addLayer({id:"line-layer",type:"line",source:"geojson-source",layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":3,"line-color":"rgba(255, 178, 125, 1)"}});const l=s.getSource("geojson-source");r=new mo(l),fetch(Z0("/data/ny.geojson")).then(f=>f.json()).then(f=>{n=f.features,r.morph(n[o])})};return(s,l)=>(Q0(),U0(J0,{"map-options":t,onLoad:a},{default:W0(()=>[Kt("div",xo,[Kt("span",{class:"control-item",onClick:l[0]||(l[0]=f=>i(-1))},"上一个"),Kt("span",{class:"control-item",onClick:l[1]||(l[1]=f=>i(1))},"下一个")])]),_:1}))}});export{_o as default};
