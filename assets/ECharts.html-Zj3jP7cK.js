import{_ as a,r as n,o as l,c as d,a as e,b as o,d as t,w as _,e as h}from"./app-WXFCxs9o.js";const i={},u=h('<h1 id="echarts" tabindex="-1"><a class="header-anchor" href="#echarts" aria-hidden="true">#</a> ECharts</h1><p><code>ECharts</code> 结合 <code>Marker</code> 即可在地图中展示图表数据。前面说过，<code>Marker</code> ( <strong>如果数量过多，会出现重叠和性能问题</strong> ），但是很多时候又不得不使用，比如在需要用复杂的形式展示数据时，<code>layer</code> 通常满足不了需求。</p>',2),p={href:"https://docs.mapbox.com/mapbox-gl-js/example/cluster-html/",target:"_blank",rel:"noopener noreferrer"},m=e("code",null,"cluster",-1),f=e("code",null,"Marker",-1),x=e("h2",{id:"饼图",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#饼图","aria-hidden":"true"},"#"),o(" 饼图")],-1),g=e("p",null,[o("使用聚合属性来解决图表重叠和性能问题的关键在于：在数据变化时，通过查询可视范围内的 "),e("code",null,"聚合要素"),o(" 及 "),e("code",null,"非聚合要素"),o(" 位置显示图表。")],-1),b={class:"custom-container warning"},C=e("p",{class:"custom-container-title"},"注意",-1),k={href:"https://docs.mapbox.com/mapbox-gl-js/style-spec/#sources-geojson-cluster",target:"_blank",rel:"noopener noreferrer"},E=e("code",null,"GeoJSONSource.getClusterLeaves()",-1),v={href:"https://docs.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterleaves",target:"_blank",rel:"noopener noreferrer"},j=e("p",null,"因为聚合点要素与实际要素的位置有一定的偏差，可以取离聚合点最近的要素。",-1),w=e("p",null,"非聚合要素属性与原始属性一致。",-1),N=e("p",null,[o("如果需要将 "),e("code",null,"ECharts"),o(" 图表的事件与地图结合做交互，由于 "),e("code",null,"ECharts"),o(" 事件回调参数中不能设置自定义属性，我们可以将相关属性融入到 ECharts 的默认属性中，比如：下面示例中将要素的坐标信息放在了 "),e("code",null,"seriesName"),o("。")],-1),y=e("blockquote",null,[e("p",null,"详细实现请查看示例代码")],-1);function L(M,V){const s=n("ExternalLinkIcon"),c=n("common-code-view"),r=n("ClientOnly");return l(),d("div",null,[u,e("p",null,[o("在浏览官方案例 "),e("a",p,[o("Display HTML clusters with custom properties"),t(s)]),o(" 时，想到：可结合 "),m,o(" 属性，来解决 "),f,o(" 在地图中显示重叠以及性能问题。")]),x,g,e("div",b,[C,e("p",null,[o("聚合要素的属性与原始属性不一致（参考 "),e("a",k,[o("geojson-cluster"),t(s)]),o("），需要通过 "),E,o(" 方法来获取原始要素属性（参考："),e("a",v,[o("getClusterLeaves"),t(s)]),o("）。")]),j,w]),N,y,t(r,null,{default:_(()=>[t(c,{name:"echarts-pie"})]),_:1})])}const O=a(i,[["render",L],["__file","ECharts.html.vue"]]);export{O as default};
